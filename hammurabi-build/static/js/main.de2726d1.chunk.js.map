{"version":3,"sources":["redux/store.js","render/serviceWorker.js","redux/actions.js","api.js","FileInput.js","Songs/index.js","Themes/index.js","Videos.js","Credits.js","FrontNav.js","Dashboard/index.js","Login.js","Register.js","Logout.js","render/Settings.js","render/ChooseThread.js","render/Final.js","render/estimate.js","render/TimeEstimator.js","render/Navbar.js","render/sanitize.js","render/PickComments/Comment.js","render/PickComments/SortableComments.js","render/PickComments/index.js","render/Question.js","render/EditorComponent.js","render/SelfText.js","render/App.js","Themes/_id.js","BuyCredits/index.js","Testing.js","Router.js","index.js"],"names":["defaultState","comments","question","processed","song","theme","credits","themes","videos","songs","loggedIn","localStorage","getItem","process","createStore","state","action","type","_objectSpread","Object","assign","val","title","selftext_html","includeSelftext","setItem","removeItem","Boolean","window","location","hostname","match","setQuestion","content","setComments","jsonFetch","RequestInfo","RequestInit","method","headers","Content-Type","credentials","fetch","then","res","ok","json","status","store","dispatch","err","error","getCredits","data","setCreditsAction","checkPrice","quantity","body","JSON","stringify","buyCredits","getSongs","setSongsAction","uploadSong","formData","r","deleteSong","id","getThread","thread","sort","mapping","comment","newcomment","Array","isArray","replies","map","enabled","getThemes","setThemesAction","getTheme","themeId","createTheme","editTheme","uploadThemeFiles","deleteTheme","longPollVideo","vidId","postPreview","options","postRender","_store$getState","getState","Accept","questionData","commentData","_postRender","getVideos","setVideosAction","authorize","email","password","Headers","authorization","user","pass","btoa","register","logout","FileInput","React","Component","render","buttonOnly","this","props","button","react_default","a","createElement","Button","icon","label","style","position","onClick","fileInput","click","name","accept","ref","display","onChange","Icon","size","Input","placeholder","value","file","labelPosition","readOnly","connect","[object Object]","args","super","async","e","target","files","FormData","append","_id","handleChange","setState","handleFileChange","componentDidMount","Container","textAlign","List","relaxed","verticalAlign","Item","className","key","Content","floated","as","Header","Loader","active","Divider","src_FileInput","navigate","selection","Popup","trigger","on","fluid","Form","onSubmit","isNaN","limit","slice","video","jsdate","Date","created","datePad","date","getFullYear","getMonth","getDate","getHours","getMinutes","href","Segment","secondary","Subheader","Menu","Dropdown","item","text","Link","to","Dashboard","src_FrontNav","Grid","stackable","Column","width","horizontal","src_Credits","Videos","Themes","src_Songs","App","constructor","loading","login","bind","catch","console","d","redirectTo","height","maxWidth","disabled","color","router_es","Message","Comment_Comment","Logout","componentWillMount","replace","Fragment","setTheme","setSong","handleTheme","handleSong","themeOptions","songOptions","unshift","Select","required","clearable","resetVideoState","input","fetchThread","log","preventDefault","indexOf","pattern","onlythread","handle","render_Settings","autoFocus","primary","negative","Final","done","send","outroLen","transitionLen","getFull","commentTimes","reduce","b","length","estimateCommentHtml","noTags","trim","splits","str","split","filter","words","estimate","estimateComment","time","commentArr","total","recAdd","push","body_html","Math","round","calculateCommentList","timeInSeconds","mins","floor","hours","readableTime","c","PureComponent","justifyContent","Step","Group","render_TimeEstimator","children","foulSpanArray","findWithRegex","regex","contentBlock","callback","getText","matchArr","start","exec","index","decorators","strategy","forEach","reg","RegExp","component","Comment","p","propagateHtmlChange","html","stateToHTML","editor","getCurrentContent","onBlur","onStateChange","propagateEnableChange","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","convertFromHTML","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","stopPropagation","componentWillUnmount","_this$props","checked","onKeyDown","marginRight","author","score","all_awardings","award","count","icon_url","src","alt","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","PickComments_Comment_Comment","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","innerRef","items","draggableId","draggableProps","dragHandleProps","draggable","current","setCurrent","setProcessed","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","num","parseInt","addEventListener","removeEventListener","topComment","scrollTo","filt","recFilter","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","i","toMinSec","seconds","fullMins","restSecs","calculateTotalTime","fullHtml","onCurrentCommentChange","s","onReorder","end","list","startIndex","endIndex","_result$splice","splice","removed","slicedToArray","flexDirection","render_PickComments_SortableComments","flexGrow","paddingLeft","render_PickComments_Comment","padding","max","min","marginTop","setTitle","EditorComponent","createEmpty","selftext","setSelftext","setIncludeSelftext","onChangeSelftext","onChangeInclude","Checkbox","render_EditorComponent","alignItems","paddingTop","marginLeft","basic","render_Navbar","path","ChooseThread","render_Question","SelfText","render_PickComments","render_Final","default","noThrow","voices","voice","intro","transition","outro","delete","submit","_this$state","preview","open","inline","Field","custom","currentPrice","stripe","timeout","perCredit","onPurchase","session","redirectToCheckout","sessionId","changeQuantity","_","clearTimeout","setTimeout","Stripe","Radio","Testing","message","sendRender","parse","TextArea","NotFound","redirect","NotFoundLogin","src_Dashboard","src_BuyCredits","render_App","Logout_Logout","src_Testing","Register","Login","ReactDOM","react_stripe_elements_es","apiKey","es","Router","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.de2726d1.chunk.js","sourcesContent":["import { createStore } from 'redux'\n\nconst defaultState = {\n\t// Video rendering\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tsong: null,\n\ttheme: null,\n\n\t// Dashboard\n\tcredits: null,\n\tthemes: [],\n\tvideos: [],\n\tsongs: [],\n\n\tloggedIn: localStorage.getItem('loggedIn') === 'true',\n}\n\nfunction state(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'RESET_VIDEOSTATE':\n\t\t\treturn { ...state, question: null, processed: null, comments: [], theme: null, song: null }\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE': {\n\t\t\tlet question = Object.assign({}, state.question, { title: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { selftext_html: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_INCLUDE_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { includeSelftext: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_THEME':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\ttheme: action.val,\n\t\t\t})\n\t\tcase 'SET_SONG':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsong: action.val,\n\t\t\t})\n\t\tcase 'SET_CREDITS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcredits: action.val,\n\t\t\t})\n\t\tcase 'SET_THEMES':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tthemes: action.val,\n\t\t\t})\n\t\tcase 'SET_SONGS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsongs: action.val,\n\t\t\t})\n\t\tcase 'SET_VIDEOS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tvideos: action.val,\n\t\t\t})\n\t\tcase 'LOGIN':\n\t\t\tlocalStorage.setItem('loggedIn', 'true')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: true,\n\t\t\t})\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('loggedIn')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: false,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default process.env.NODE_ENV === \"development\" ?\n\tcreateStore(state, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()) :\n\tcreateStore(state)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const resetVideoState = content => ({\n\ttype: 'RESET_VIDEOSTATE',\n\tval: content,\n})\nexport const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setTheme = content => ({\n\ttype: 'SET_THEME',\n\tval: content,\n})\nexport const setSong = content => ({\n\ttype: 'SET_SONG',\n\tval: content,\n})\nexport const setCredits = content => ({\n\ttype: 'SET_CREDITS',\n\tval: content,\n})\nexport const setThemes = content => ({\n\ttype: 'SET_THEMES',\n\tval: content,\n})\nexport const setSongs = content => ({\n\ttype: 'SET_SONGS',\n\tval: content,\n})\nexport const setVideos = content => ({\n\ttype: 'SET_VIDEOS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSelftext = content => ({\n\ttype: 'SET_SELFTEXT',\n\tval: content,\n})\nexport const setIncludeSelftext = content => ({\n\ttype: 'SET_INCLUDE_SELFTEXT',\n\tval: content,\n})\nexport const login = () => ({\n\ttype: 'LOGIN',\n})\nexport const logout = () => ({\n\ttype: 'LOGOUT',\n})","import {\n\tlogin as loginAction,\n\tlogout as logoutAction,\n\tsetCredits as setCreditsAction,\n\tsetSongs as setSongsAction,\n\tsetThemes as setThemesAction,\n\tsetVideos as setVideosAction,\n\tsetQuestion,\n\tsetComments\n} from './redux/actions'\nimport store from './redux/store'\n\nlet apiurl = process.env.NODE_ENV === \"development\" ?\n\t'http://192.168.1.19:8000/api' :\n\t'/api'\n\n// The jsonFetch function is a wrapper around the native fetch().\n// It returns the response in json, and removes the \"loggedIn\" item\n// from localStorage if the response status code is 401.\n// Returns a promise that throws if the status code is not in the 200-399 range\nconst jsonFetch = (RequestInfo, RequestInit = {}) => {\n\tif (typeof RequestInfo === 'string') {\n\t\tRequestInfo = apiurl + RequestInfo\n\t}\n\tif (RequestInit.method && RequestInit.method !== \"GET\") {\n\t\tif (!RequestInit.headers) {\n\t\t\tRequestInit.headers = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t}\n\t\t}\n\t}\n\n\tRequestInit.credentials = 'include'\n\n\treturn fetch(RequestInfo, RequestInit)\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json()\n\t\t\t} else if (res.status === 401) {\n\t\t\t\tstore.dispatch(logoutAction())\n\t\t\t}\n\t\t\treturn res.json()\n\t\t\t\t.then(err => {\n\t\t\t\t\tthrow err.error // Parse as json, then throw.\n\t\t\t\t})\n\t\t})\n}\n\nexport let getCredits = function () {\n\treturn jsonFetch('/credits')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setCreditsAction(data.credits))\n\t\t\treturn data\n\t\t})\n}\n\n// Returns { total: Number }\nexport let checkPrice = function (quantity) {\n\treturn jsonFetch('/credits/check-price', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\n// Use stripe to buy credits\n// Returns { session: String }\nexport let buyCredits = function (quantity) {\n\treturn jsonFetch('/credits/buy', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\nexport let getSongs = function () {\n\treturn jsonFetch('/songs')\n\t\t.then(songs => {\n\t\t\tstore.dispatch(setSongsAction(songs))\n\t\t\treturn songs\n\t\t})\n}\n\nexport let uploadSong = function (formData) {\n\treturn jsonFetch('/songs', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n\t\t.then(r => {\n\t\t\tgetSongs()\n\t\t\treturn r\n\t\t})\n}\n\nexport let deleteSong = function (id) {\n\treturn jsonFetch('/songs/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let getThread = function (thread, sort) {\n\treturn jsonFetch(`/thread/${thread}?sort=${sort}`)\n\t\t.then(json => {\n\t\t\tlet mapping = comment => {\n\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tdata: newcomment\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet comments = json[1].map(mapping)\n\n\t\t\tstore.dispatch(setQuestion(json[0]))\n\t\t\tstore.dispatch(setComments(comments))\n\n\t\t\treturn json\n\t\t})\n}\n\nexport let getThemes = function () {\n\treturn jsonFetch('/themes')\n\t\t.then(themes => {\n\t\t\tstore.dispatch(setThemesAction(themes))\n\t\t\treturn themes\n\t\t})\n}\n\nexport let getTheme = function (themeId) {\n\treturn jsonFetch('/themes/' + themeId)\n}\n\nexport let createTheme = function (data) {\n\treturn jsonFetch('/themes', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let editTheme = function (id, data) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let uploadThemeFiles = function (id, formData) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n}\n\nexport let deleteTheme = function (id) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let longPollVideo = function (vidId) {\n\treturn jsonFetch('/check-on-video/' + vidId)\n}\n\nexport let postPreview = function (theme, song) {\n\treturn jsonFetch('/preview', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t}\n\t\t}),\n\t})\n}\n\nexport let postRender = function () {\n\tlet { question, processed, theme, song } = store.getState()\n\n\tif (!question.includeSelftext) {\n\t\tdelete question.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData: question,\n\t\t\tcommentData: processed,\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t},\n\t\t})\n\t})\n}\n\nexport let _postRender = function (state) {\n\tlet { questionData, commentData, options } = state\n\n\tif (!questionData.includeSelftext) {\n\t\tdelete questionData.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData,\n\t\t\tcommentData,\n\t\t\toptions,\n\t\t})\n\t})\n}\n\nexport const getVideos = function () {\n\treturn jsonFetch('/videos')\n\t\t.then(r => {\n\t\t\tstore.dispatch(setVideosAction(r))\n\t\t\treturn r\n\t\t})\n}\n\nexport const openVideoLink = function (videoId) {\n\treturn window.open('/videos/' + videoId, '_blank')\n}\n\n// btoa: Binary to Ascii (Base64 only contains ascii characters)\n\n// Basic toBase64(username:password)\nconst toBasicAuth = (user, pass) => `Basic ${btoa(user + ':' + pass)}`\n\nexport let authorize = function (email, password) {\n\treturn jsonFetch('/auth', {\n\t\theaders: new Headers({\n\t\t\tauthorization: toBasicAuth(email, password),\n\t\t}),\n\t\tmethod: 'POST',\n\t}).then(r => {\n\t\tstore.dispatch(loginAction())\n\t\treturn r\n\t})\n}\n\nexport let register = function (email, password) {\n\treturn jsonFetch('/register', {\n\t\tbody: JSON.stringify({ email, password }),\n\t\tmethod: 'POST',\n\t})\n}\n\nexport let logout = function () {\n\treturn jsonFetch('/logout').then(r => {\n\t\tstore.dispatch(logoutAction())\n\t})\n}","import React from 'react'\nimport { Button, Icon, Input } from 'semantic-ui-react'\n\nclass FileInput extends React.Component {\n    render() {\n        let buttonOnly = this.props.buttonOnly\n\n        let button =\n            <Button\n                icon={!this.props.label}\n                style={{ position: 'relative' }}\n                onClick={() => this.fileInput.click()}>\n                <input\n                    name={this.props.name}\n                    type=\"file\"\n                    accept={this.props.accept || null}\n                    ref={r => this.fileInput = r}\n                    style={{ display: 'none' }}\n                    onChange={this.props.onChange} />\n                <Icon name={this.props.icon || \"file\"}\n                    size={this.props.size} />\n                {this.props.label && this.props.label}\n            </Button>\n        return (\n            <div>\n                {\n                    buttonOnly ? button :\n                        <Input\n                            {...this.props}\n                            placeholder={this.props.placeholder || \"No file\"}\n                            value={this.props.file ? this.props.file.name : ''}\n                            label={button}\n                            labelPosition=\"left\"\n                            readOnly={true}\n                            size={this.props.size}\n                            onClick={() => this.fileInput.click()} />}\n            </div>\n        )\n    }\n}\n\nexport default FileInput;","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Icon, List, Loader } from 'semantic-ui-react'\nimport { deleteSong, getSongs, uploadSong } from '../api'\nimport FileInput from '../FileInput'\nimport './index.css'\n\nclass ThemesList extends React.Component {\n    uploadSong = async (e) => {\n        let file = e.target.files[0]\n        let formData = new FormData()\n        formData.append('song', file)\n        await uploadSong(formData)\n    }\n    deleteSong = async song => {\n        await deleteSong(song._id)\n        getSongs()\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = (e, { name }) => this.setState({ [name]: e.target.files[0] })\n    componentDidMount() {\n        getSongs()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List relaxed verticalAlign=\"middle\">\n                    {this.props.songs ? this.props.songs.map(song =>\n                        <List.Item className=\"song-item\" key={song._id}>\n                            <List.Content className=\"song-icon\" floated=\"right\" as=\"a\" onClick={() => this.deleteSong(song)}>\n                                <Icon name=\"delete\" />\n                            </List.Content>\n                            <List.Content>\n                                <List.Header>\n                                    {song.name}\n                                </List.Header>\n                            </List.Content>\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n\n                <FileInput icon=\"music\" accept=\"audio/*\" buttonOnly name=\"song\" label=\"Upload song\" onChange={this.uploadSong} />\n                {/* <Popup trigger={<Button>Upload song</Button>}\n                    on=\"click\"\n                    position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.uploadSong}>\n                            <Header>Upload song</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\" />\n                            <Form.Button type=\"submit\">Upload</Form.Button>\n                            <Message size=\"tiny\" color=\"yellow\">\n                                Songs that are too short will be repeated\n                            </Message>\n                        </Form>\n                    </Container>\n                </Popup> */}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        songs: store.songs,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Divider, Form, Header, List, Loader, Popup } from 'semantic-ui-react'\nimport { createTheme, getThemes } from '../api'\n\nclass ThemesList extends React.Component {\n    createTheme = async () => {\n        const { theme } = await createTheme({ name: this.state.name })\n        navigate(`/themes/${theme}`)\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getThemes()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.themes ? this.props.themes.map(theme =>\n                        <List.Item key={theme._id} onClick={() => navigate(\"/themes/\" + theme._id)}>\n                            {/* <Link to={\"/themes/\" + theme._id}> */}\n                                <List.Content>\n                                    <List.Header>{theme.name}</List.Header>\n                                </List.Content>\n                            {/* </Link> */}\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n                <Popup trigger={<Button>New theme</Button>} on=\"click\" position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.createTheme}>\n                            <Header>Create new theme</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\"></Form.Input>\n                            <Form.Button type=\"submit\">Create</Form.Button>\n                        </Form>\n                    </Container>\n                </Popup>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, List, Loader } from 'semantic-ui-react'\nimport { getVideos } from './api'\n\nclass VideosList extends React.Component {\n    componentDidMount() {\n        getVideos()\n    }\n    getVideos = () => {\n        return isNaN(this.props.limit) ? this.props.videos : this.props.videos.slice(0, this.props.limit)\n    }\n    render() {\n        return (\n            <Container>\n                <List selection>\n                    {this.props.videos ? this.getVideos().map(video => {\n                        let jsdate = new Date(video.created)\n                        let datePad = date => (\"0\" + date).slice(-2)\n                        let date = `${jsdate.getFullYear()}-${datePad(jsdate.getMonth())}-${datePad(jsdate.getDate())} ${datePad(jsdate.getHours())}:${datePad(jsdate.getMinutes())}`\n                        return (\n                            <List.Item key={video._id} as=\"a\" href={\"/api/videos/\" + video.file}>\n                                <List.Content>\n                                    <List.Header>{video.name || \"Unnamed video\"}</List.Header>\n                                    {date}\n                                </List.Content>\n                            </List.Item>\n                        )\n                    }) :\n                        <List.Item><Loader active /></List.Item>}\n                </List>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        videos: store.videos,\n    }\n}\n\nexport default connect(mapStateToProps)(VideosList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Header, Segment, Loader } from 'semantic-ui-react'\nimport { getCredits } from './api'\n\nclass Credits extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getCredits()\n    }\n    render() {\n        return (\n            <Segment textAlign=\"center\" secondary>\n                <Header size=\"huge\">\n                    <Header.Subheader>Credits</Header.Subheader>\n                    <Header.Content>\n                        {this.props.credits != null ?\n                            this.props.credits :\n                            <Loader active />}\n                    </Header.Content>\n                </Header>\n            </Segment>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(Credits);","import React from 'react'\nimport { Link } from '@reach/router'\nimport { connect } from 'react-redux'\nimport { Menu, Dropdown } from 'semantic-ui-react'\n\nclass FrontNav extends React.Component {\n    render() {\n        return (\n            <Menu>\n                <Menu.Item>\n                    Reddit Video Maker\n                </Menu.Item>\n                <Menu.Menu position=\"right\">\n                    <Dropdown item text=\"Account\">\n                        <Dropdown.Menu>\n                            <Dropdown.Item as={Link} to=\"/logout\">Log out</Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n                </Menu.Menu>\n            </Menu>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n    }\n}\n\nexport default connect(mapStateToProps)(FrontNav);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Songs from '../Songs'\nimport Themes from '../Themes/index'\nimport Videos from '../Videos'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Videos</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Videos limit={8} />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/video\">Make video</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Themes</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Themes />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Songs</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Songs />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react';\nimport { Grid, Header, Segment, Form, Message } from 'semantic-ui-react'\nimport { authorize } from './api'\nimport { Link, redirectTo } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            loading: false,\n        }\n\n        this.login = this.login.bind(this)\n    }\n    login() {\n        this.setState({ error: null, loading: true })\n        authorize(this.state.email, this.state.password)\n            .catch(err => {\n                this.setState({ loading: false })\n                if (typeof err === \"string\") {\n                    this.setState({ error: err })\n                } else {\n                    console.error(err)\n                }\n            })\n            .then(d => {\n                redirectTo('/dashboard')\n            })\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Log in</Header>\n                    <Form onSubmit={this.login}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                disabled={this.state.loading}\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                disabled={this.state.loading}\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                disabled={this.state.loading}\n                                color=\"teal\">\n                                Log in\n                            </Form.Button>\n                            <div><Link to=\"/register\">Register</Link></div>\n                        </Segment>\n                    </Form>\n                    <Message size=\"small\">Forgot password?</Message>\n                    {this.state.error && <Message error>{this.state.error}</Message>}\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Grid, Header, Segment, Form, Message,Comment } from 'semantic-ui-react'\nimport { register } from './api'\nimport { Link } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n        }\n\n        this.register = this.register.bind(this)\n    }\n    register() {\n        register(this.state.email, this.state.password)\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Register</Header>\n                    <Form onSubmit={this.register}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                color=\"teal\">\n                                Register\n                            </Form.Button>\n                            <Comment><Link to=\"/login\">Log in</Link></Comment>\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react'\nimport { logout } from './api'\nimport { navigate } from '@reach/router'\n\nexport default class Logout extends React.Component {\n    componentWillMount() {\n        this.logout();\n    }\n    logout() {\n        logout()\n            .then(r => {\n                navigate('/login', { replace: true })\n            })\n    }\n    render() {\n        return <></>\n    }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form } from 'semantic-ui-react';\nimport { setSong, setTheme } from '../redux/actions';\n\nclass Settings extends Component {\n\thandleTheme = (e, { value }) => {\n\t\tthis.props.setTheme(value)\n\t}\n\thandleSong = (e, { value }) => {\n\t\tthis.props.setSong(value)\n\t}\n\trender() {\n\t\tlet themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n\t\tlet songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.name }))\n\t\tsongOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n\n\t\treturn (\n\t\t\t<Form onSubmit={this.props.onSubmit}>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Theme\"\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\tvalue={this.props.theme}\n\t\t\t\t\tname=\"theme\"\n\t\t\t\t\toptions={themeOptions}\n\t\t\t\t\tonChange={this.handleTheme}\n\t\t\t\t/>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Song\"\n\t\t\t\t\tclearable\n\t\t\t\t\tplaceholder=\"No song\"\n\t\t\t\t\tvalue={this.props.song}\n\t\t\t\t\tname=\"song\"\n\t\t\t\t\toptions={songOptions}\n\t\t\t\t\tonChange={this.handleSong}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n\tsong: state.song,\n\tthemes: state.themes,\n\tsongs: state.songs,\n}), { setTheme, setSong })(Settings);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Divider, Form, Icon, Message, Segment } from 'semantic-ui-react'\nimport { getThread } from '../api'\nimport { setComments, setQuestion, resetVideoState } from '../redux/actions'\nimport Settings from './Settings'\n\nclass Thread extends React.Component {\n\tstate = {\n\t\tinput: '',\n\t\tsort: 'top',\n\t\tloading: null,\n\t\terror: null,\n\t}\n\tcomponentWillMount() {\n\t\tthis.props.resetVideoState()\n\t}\n\tfetchThread = (thread, sort) => {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread, sort)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t\tnavigate('/video/post')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(\"Here?\")\n\t\t\t\tthis.setState({ error: err, loading: false })\n\t\t\t})\n\t}\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread, this.state.sort)\n\t}\n\thandle = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\tlet sortOptions = [\n\t\t\t{ text: 'Top', value: 'top' },\n\t\t\t{ text: 'Best', value: 'best' },\n\t\t\t{ text: 'New', value: 'new' },\n\t\t]\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Settings />\n\t\t\t\t<Divider />\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Form.Input label=\"Thread\" required value={this.state.input} onChange={this.handle} name=\"input\" placeholder=\"Type a reddit thread ID or paste its URL\" autoFocus />\n\t\t\t\t\t<Form.Select label=\"Sort by\" required value={this.state.sort} onChange={this.handle} name=\"sort\" options={sortOptions} />\n\t\t\t\t\t<Form.Button primary loading={this.state.loading} disabled={!this.props.theme || !this.state.input}>OK<Icon name=\"angle right\" /></Form.Button>\n\t\t\t\t\t{this.state.error && <Message negative>{this.state.error}</Message>}\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tresetVideoState,\n})(Thread);","import React, { Component } from 'react';\nimport { Button, Divider, Segment } from 'semantic-ui-react';\nimport { postRender } from '../api';\nimport Settings from './Settings';\n\nclass Final extends Component {\n    state = { loading: false, done: false }\n    send = async () => {\n        this.setState({ loading: true, done: false })\n        await postRender()\n        this.setState({ loading: false, done: true })\n    }\n    render() {\n\n        return (\n            <Segment>\n                {this.state.done ?\n                    <p>The video is now rendering.</p> :\n                    <>\n                        <p>Change settings if needed and then send to render video.</p>\n                        <Settings />\n                        <Divider />\n                        <Button primary size=\"large\" loading={this.state.loading} onClick={this.send}>Render</Button>\n                    </>\n                }\n            </Segment>\n        )\n    }\n}\n\nexport default Final","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn (splits * 0.38152203637725923 + words * 0.2767486833003453) * 1.08\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}\n\nexport function calculateCommentList(commentArr) {\n\tlet total = []\n\tlet recAdd = comment => {\n\t\ttotal.push(estimateCommentHtml(comment.data.body_html).estimate)\n\n\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\tcomment.data.replies\n\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t.map(recAdd)\n\t\t}\n\t}\n\tcommentArr\n\t\t.filter(d => d.enabled)\n\t\t.map(recAdd)\n\n\treturn Math.round(1e2 * getFull(total)) / 1e2\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Header } from 'semantic-ui-react';\nimport { calculateCommentList, estimateCommentHtml } from './estimate';\n\nfunction readableTime(timeInSeconds) {\n    let mins = Math.floor(timeInSeconds / 60)\n    let hours = Math.floor(mins / 60)\n    mins -= hours * 60\n\n    let seconds = Math.floor(timeInSeconds) - mins * 60 - hours * 60\n\n    let str = \"\"\n    if (hours > 0) {\n        str += hours + \" h, \"\n    }\n    if (mins > 0) {\n        str += mins + \" m, \"\n    }\n    str += seconds + \" s\"\n\n    return str\n}\n\nclass TimeEstimator extends Component {\n    render() {\n        let time = calculateCommentList(this.props.comments)\n\n        if (this.props.question.includeSelftext && this.props.question.selftext_html) {\n            let selftext = this.props.question.selftext_html\n            time += estimateCommentHtml(selftext).estimate\n        }\n\n        return (\n            <div>\n                <Header>\n                    <Header.Content>Estimated video length: {readableTime(time)}</Header.Content>\n                </Header>\n                Comments selected: {this.props.comments.filter(c => c.enabled).length}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    comments: state.comments,\n    question: state.question,\n}))(TimeEstimator);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Header, Step } from 'semantic-ui-react'\nimport TimeEstimator from './TimeEstimator'\nimport { connect } from 'react-redux'\n\nclass Navbar extends React.PureComponent {\n    render() {\n        return (\n            <div>\n                {this.props.question && \n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                            <Step.Group>\n                                <Step active={this.props[\"*\"] === \"post\"} as={Link} to=\"post\">Question title</Step>\n                                <Step active={this.props[\"*\"] === \"selftext\"} as={Link} to=\"selftext\">Body text</Step>\n                                <Step active={this.props[\"*\"] === \"comments\"} as={Link} to=\"comments\">Comments</Step>\n                                <Step active={this.props[\"*\"] === \"final\"} as={Link} to=\"final\">Finish</Step>\n                            </Step.Group>\n                        </div>\n                        <TimeEstimator />\n                        <Header as=\"h2\">{this.props.question.title}</Header>\n                    </div>\n                }\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    question: state.question,\n}))(Navbar)","// These will hide the middle of the three regex groups\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nimport './Comment.css'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange = () => {\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tonBlur = e => {\n\t\tthis.propagateHtmlChange()\n\t}\n\tonStateChange = editor => this.setState({ editor })\n\tpropagateEnableChange = () => {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.propagateHtmlChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score >= 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <span key={award.count + award.icon_url}><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</span>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.onStateChange}\n\t\t\t\t\t\tonBlur={this.onBlur}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport './SortableComments.css'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tonDragEnd = (result) => {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import { navigate } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setComments, setProcessed } from '../../redux/actions';\nimport { estimateCommentHtml, getFull } from '../estimate';\nimport Comment from './Comment';\nimport SortableComments from './SortableComments';\nimport { Segment, Container, Header, Button, Input, Icon } from 'semantic-ui-react';\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tonSubmit() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\n\t\tnavigate('/video/final')\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tif (this.props.comments.length === 0) {\n\t\t\treturn (<Container>\n\t\t\t\t<Header>No comments found for this thread</Header>\n\t\t\t</Container>)\n\t\t}\n\t\tlet comment = this.props.comments[this.state.current]\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center' }}>\n\t\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t\t<div style={{ flexGrow: 1, paddingLeft: 10 }}>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<div ref={ref => this.topComment = ref}>\n\t\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", padding: 10 }}>\n\t\t\t\t\t\t\t<Button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>\n\t\t\t\t\t\t\t\t<Icon name=\"arrow left\" />\n\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<Button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t<Icon name=\"arrow right\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 10 }}>\n\t\t\t\t\t\t\t<Button onClick={this.onSubmit} size=\"huge\" primary>Finish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tcomments: state.comments,\n}), {\n\tsetProcessed,\n\tsetComments\n})(PickComments);","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setTitle } from '../redux/actions';\n\nclass Question extends Component {\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tnavigate('selftext')\n\t}\n\tonChange = e => {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Header size=\"large\">Edit question</Header>\n\t\t\t\t\t<Form.Input value={this.props.title} onChange={this.onChange} />\n\t\t\t\t\t<Form.Button primary type=\"submit\">Continue</Form.Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle })(Question);","import React, { Component } from 'react'\nimport { foulSpanArray } from './sanitize'\n\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nfunction handleStrategy(contentBlock, callback) {\n    foulSpanArray.forEach(reg => {\n        findWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n    })\n}\nfunction editStrategy(contentBlock, callback) {\n    findWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n    return <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n    return <span className=\"highlight-warn\">{props.children}</span>\n}\n\nlet decorators = [\n    {\n        strategy: handleStrategy,\n        component: handleSpan,\n    },\n    {\n        strategy: editStrategy,\n        component: editSpan,\n    },\n]\n\nclass EditorComponent extends Component {\n    constructor(p) {\n        super(p)\n\n        this.inlineToolbarPlugin = createInlineToolbarPlugin()\n        this.linkPlugin = createLinkPlugin()\n        this.plugins = [\n            this.inlineToolbarPlugin,\n            this.linkPlugin,\n        ]\n\n        let d = convertFromHTML(p.data)\n        \n        this.state = {\n            editor: d.contentBlocks ? EditorState.createWithContent(\n                ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)\n            ) : EditorState.createEmpty(),\n        }\n    }\n    handlePress = e => {\n        e.stopPropagation()\n    }\n    onChange = val => {\n        this.setState({ editor: val })\n\n        let html = stateToHTML(this.state.editor.getCurrentContent())\n\n        if (this.props.data !== html) {\n            this.props.onChange(html)\n        }\n    }\n    render() {\n        return <div>\n            <Editor\n                editorState={this.state.editor}\n                onChange={this.onChange}\n                decorators={decorators}\n                plugins={this.plugins}\n            />\n            <this.inlineToolbarPlugin.InlineToolbar>\n                {extProps => <>\n                    <BoldButton {...extProps} />\n                    <ItalicButton {...extProps} />\n                    <UnderlineButton {...extProps} />\n                    <this.linkPlugin.LinkButton {...extProps} />\n                </>}\n            </this.inlineToolbarPlugin.InlineToolbar>\n        </div>\n    }\n}\n\nexport default EditorComponent","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setSelftext, setIncludeSelftext } from '../redux/actions';\nimport EditorComponent from './EditorComponent';\n\nclass Selftext extends Component {\n    onSubmit = e => {\n        e.preventDefault()\n\n        navigate('/video/comments')\n    }\n    onChangeSelftext = value => {\n        this.props.setSelftext(value)\n    }\n    onChangeInclude = (e, { checked }) => {\n        this.props.setIncludeSelftext(checked)\n    }\n    render() {\n        return (\n            <Segment>\n                <Form onSubmit={this.onSubmit}>\n                    <Header size=\"large\">Edit selftext</Header>\n                    <Form.Checkbox label=\"Include selftext?\" checked={this.props.includeSelftext} onChange={this.onChangeInclude} />\n                    <Segment style={{ display: this.props.includeSelftext ? 'block' : 'none' }}>\n                        <EditorComponent onChange={this.onChangeSelftext} data={this.props.selftext} />\n                    </Segment>\n                    <Form.Button primary type=\"submit\">Continue</Form.Button>\n                </Form>\n            </Segment>\n        )\n    }\n}\n\nexport default connect(state => ({\n    selftext: state.question.selftext_html || \"\",\n    includeSelftext: state.question.includeSelftext,\n}), { setSelftext, setIncludeSelftext })(Selftext);","import { Link, Redirect, Router } from '@reach/router'\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Header } from 'semantic-ui-react'\nimport { getSongs, getThemes } from '../api'\nimport SelectThread from './ChooseThread'\nimport Final from './Final'\nimport Navbar from './Navbar'\nimport PickComments from './PickComments/index'\nimport Question from './Question'\nimport SelfText from './SelfText'\n\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tgetThemes()\n\t\tgetSongs()\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t\t\t<Header style={{ paddingTop: 10 }} as=\"h1\">\n\t\t\t\t\t\t<Header.Content>Project BOG</Header.Content>\n\t\t\t\t\t\t<Header.Subheader>Create video</Header.Subheader>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Button style={{ marginLeft: 20 }} basic as={Link} to=\"/\">Go back</Button>\n\t\t\t\t</div>\n\t\t\t\t<Router>\n\t\t\t\t\t<Navbar path=\"/\">\n\t\t\t\t\t\t<SelectThread path=\"/\" />\n\t\t\t\t\t\t{/* Can't have fragments in Router element */}\n\t\t\t\t\t\t{this.props.question && <Question path=\"post\" />}\n\t\t\t\t\t\t{this.props.question && <SelfText path=\"selftext\" />}\n\t\t\t\t\t\t{this.props.question && <PickComments path=\"comments\" />}\n\t\t\t\t\t\t{this.props.question && <Final path=\"final\" />}\n\t\t\t\t\t\t<Redirect default from=\"*\" to=\"/video/\" noThrow />\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Router>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t}\n}\n\nexport default connect(mapStateToProps)(App)","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Form, Header, Segment } from 'semantic-ui-react'\nimport { deleteTheme, editTheme, getTheme, longPollVideo, postPreview, uploadThemeFiles } from '../api'\nimport FileInput from '../FileInput'\nimport { getForkTsCheckerWebpackPluginHooks } from 'fork-ts-checker-webpack-plugin/lib/hooks'\n\nlet voices = [\n    {\n        value: \"daniel\",\n        text: \"Daniel UK\"\n    },\n    {\n        value: \"google-us\",\n        text: \"Google US\"\n    },\n]\n\nclass Theme extends React.Component {\n    state = {\n        name: \"\",\n        voice: \"\",\n\n        // Files\n        intro: null,\n        transition: null,\n        outro: null,\n\n        loading: true,\n    }\n    componentDidMount() {\n        getTheme(this.props.themeId)\n            .then(theme => {\n                this.setState(theme)\n            })\n    }\n    delete = async () => {\n        await deleteTheme(this.props.themeId)\n        navigate('/', { replace: true })\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = e => {\n        e.preventDefault()\n        this.setState({ [e.target.name]: e.target.files[0] })\n    }\n    submit = () => {\n        this.setState({ loading: true })\n        editTheme(this.props.themeId, {\n            name: this.state.name,\n            voice: this.state.voice,\n        }).then(async () => {\n            const { intro, transition, outro } = this.state\n\n            // If at least one file has been selected, upload it/them.\n            if (intro || transition || outro) {\n                const data = new FormData()\n\n                intro && data.append('intro', intro)\n                outro && data.append('outro', outro)\n                transition && data.append('transition', transition)\n\n                await uploadThemeFiles(this.props.themeId, data)\n\n                this.setState({ loading: false })\n            } else {\n                this.setState({ loading: false })\n            }\n        })\n    }\n    preview = () => {\n        postPreview(this.props.themeId)\n            .then(res => {\n                console.log(res)\n                return longPollVideo(res.id)\n            })\n            .then(res => {\n                let file = res.file\n                window.open('/api/videos/' + file, '_blank')\n            })\n    }\n    render() {\n        return (\n            <Container>\n                <Form onSubmit={e => e.preventDefault()}>\n                    <Segment>\n                        <Form.Group inline>\n                            <Form.Input\n                                name=\"name\"\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={this.state.name}\n                                onChange={this.handleChange}>\n                            </Form.Input>\n                            <Form.Select\n                                name=\"voice\"\n                                placeholder=\"Voice\"\n                                value={this.state.voice}\n                                options={voices}\n                                onChange={this.handleChange}>\n                            </Form.Select>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Field>\n                                <Header>Intro</Header>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"intro\"\n                                    buttonOnly\n                                    label={this.state.intro ? \"Change intro\" : \"No intro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Field>\n                                <Header>Transition</Header>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"transition\"\n                                    buttonOnly\n                                    label={this.state.transition ? \"Change transition\" : \"No transition\"}\n                                    onChange={this.handleFileChange}\n                                />\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Field>\n                                <Header>Outro</Header>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"outro\"\n                                    buttonOnly\n                                    label={this.state.outro ? \"Change outro\" : \"No outro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group inline>\n                            <Form.Button onClick={this.submit} type=\"submit\">Save</Form.Button>\n                            <Form.Button type=\"button\" color=\"red\" onClick={this.delete}>Delete</Form.Button>\n                        </Form.Group>\n                    </Segment>\n                </Form>\n                <Segment>\n                    <Button onClick={this.preview}>Preview</Button>\n                </Segment>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(Theme);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { buyCredits, checkPrice } from '../api'\nimport Credits from '../Credits'\n\nclass BuyCredits extends React.Component {\n    state = {\n        credits: 10,\n        custom: false,\n        currentPrice: null,\n        stripe: null,\n\n        timeout: null,\n        perCredit: null,\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        // getCredits()\n        this.setState({ stripe: window.Stripe('pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK') })\n        this.changeQuantity(null, { value: this.state.credits })\n    }\n    onPurchase = async () => {\n        let { session } = await buyCredits(this.state.credits)\n        this.state.stripe.redirectToCheckout({\n            sessionId: session.id,\n        }).then(res => {\n            console.log(res)\n        })\n    }\n    changeQuantity = (_, { value }) => {\n        this.setState({ credits: value })\n\n        if (this.state.timeout !== null) {\n            clearTimeout(this.state.timeout)\n        }\n        let timeout = setTimeout(async () => {\n            let { total } = await checkPrice(value)\n            this.setState({ currentPrice: total, perCredit: total / value, timeout: null })\n        }, 200)\n        this.setState({ timeout })\n    }\n    render() {\n        return (\n            <Container>\n                <Credits />\n                <Grid>\n                    <Grid.Column>\n                        <Segment>\n                            <Header>Buy credits</Header>\n                            <Message>This is a message to show how much one credit is worth</Message>\n                            <Form>\n                                <Form.Radio name=\"credits\" label=\"10 Credits\" value={10} checked={this.state.credits === 10} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"25 Credits\" value={25} checked={this.state.credits === 25} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"50 Credits\" value={50} checked={this.state.credits === 50} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"100 Credits\" value={100} checked={this.state.credits === 100} onChange={this.changeQuantity} />\n                                <Form.Input name=\"credits\" label=\"Custom amount\" value={this.state.credits} onChange={this.changeQuantity} type=\"number\" min={1} />\n                                <Header>\n                                    <Header.Content>\n                                        {this.state.currentPrice}\n                                    </Header.Content>\n                                    <Header.Subheader>\n                                        {this.state.perCredit}/Credit\n                                    </Header.Subheader>\n                                </Header>\n                                <Form.Button onClick={this.onPurchase} size=\"large\">Buy</Form.Button>\n                            </Form>\n                        </Segment>\n                    </Grid.Column>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(BuyCredits);","import React from 'react';\nimport { Container, Form, Message, Segment } from 'semantic-ui-react';\nimport { _postRender } from './api';\n\nclass Testing extends React.Component {\n    state = { text: \"\", message: null }\n    onChange = (_, { name, value }) => this.setState({ [name]: value })\n    sendRender = () => {\n        let json = JSON.parse(this.state.text) // Parse the text as json\n        _postRender(json) // Send it to render\n            .then(() => {\n                this.setState({ message: \"Rendering...\" })\n            })\n    }\n    render() {\n        return (\n            <Container>\n                <Segment>\n                    <Form>\n                        <Form.TextArea value={this.state.text} name=\"text\" onChange={this.onChange} />\n                        <Form.Button onClick={this.sendRender}>Render</Form.Button>\n                        {this.state.message && <Message>{this.state.message}</Message>}\n                    </Form>\n                </Segment>\n            </Container>\n        )\n    }\n}\n\nexport default Testing","import React from 'react';\n\nimport { connect } from 'react-redux'\nimport { Router, Redirect } from '@reach/router'\n\nimport Dashboard from './Dashboard/index'\nimport Login from './Login'\nimport Register from './Register'\nimport Logout from './Logout'\nimport App from './render/App'\nimport ThemeEdit from './Themes/_id'\nimport 'semantic-ui-css/semantic.min.css'\nimport BuyCredits from './BuyCredits';\nimport Testing from './Testing';\n\nconst NotFound = ({ redirect = \"/\" }) => <Redirect noThrow from=\"*\" to={redirect} />\nconst NotFoundLogin = ({ redirect = \"/login\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nclass BogRouter extends React.Component {\n    render() {\n        return (\n            this.props.loggedIn ?\n                <Router>\n                    <Dashboard path=\"/\" />\n                    <BuyCredits path=\"/buy-credits\" />\n                    <App path=\"/video/*\" />\n                    <ThemeEdit path=\"/themes/:themeId\" />\n                    <Logout path=\"/logout\" />\n                    <Testing path=\"/__testing_ground\" />\n                    <NotFound default />\n                </Router> :\n                <Router>\n                    <Register path=\"/register\" />\n                    <Login path=\"/login\" />\n                    <NotFoundLogin default />\n                </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(BogRouter)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport './index.css'\nimport store from './redux/store';\nimport * as serviceWorker from './render/serviceWorker';\nimport Router from './Router';\nimport { StripeProvider } from 'react-stripe-elements';\n\nReactDOM.render(\n\t<StripeProvider apiKey=\"pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK\">\n\t\t<Provider store={store}>\n\t\t\t<Router />\n\t\t</Provider>\n\t</StripeProvider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}