{"version":3,"sources":["redux/actions.js","redux/store.js","api.js","Credits.js","FrontNav.js","BuyCredits/index.js","FileInput.js","Songs/index.js","Themes/index.js","Videos.js","Preview.js","Dashboard/index.js","Logout.js","render/Settings.js","render/ChooseThread.js","render/Final.js","render/estimate.js","render/TimeEstimator.js","render/Navbar.js","render/sanitize.js","render/PickComments/Comment.js","render/PickComments/SortableComments.js","render/PickComments/index.js","render/Question.js","render/EditorComponent.js","render/SelfText.js","render/App.js","Testing.js","Themes/_id.js","Admin/UserList.js","Admin/index.js","Account.js","AuthedRouter.js","Login.js","Register.js","DefaultRouter.js","App.js","render/serviceWorker.js","index.js"],"names":["setQuestion","content","type","val","setComments","defaultState","comments","question","processed","song","theme","credits","themes","videos","songs","user","users","loggedIn","localStorage","getItem","process","createStore","state","action","_objectSpread","Object","assign","title","selftext_html","includeSelftext","setItem","removeItem","jsonFetch","RequestInfo","RequestInit","method","headers","Content-Type","credentials","fetch","then","res","ok","json","status","store","dispatch","err","error","toast","console","adminGetUsers","data","setUsers","adminCreateUser","email","password","body","JSON","stringify","adminChangePass","id","adminGiveCredits","quantity","getUser","setUser","changePassword","current","newPassword","passwordCurrent","passwordNew","getCredits","setCreditsAction","checkPrice","buyCredits","getSongs","setSongsAction","uploadSong","formData","r","deleteSong","getThread","thread","sort","mapping","comment","newcomment","Array","isArray","replies","map","enabled","getThemes","setThemesAction","getTheme","themeId","createTheme","editTheme","uploadThemeFiles","deleteTheme","deleteThemeFile","intro","transition","outro","longPollVideo","fileId","postPreview","options","postRender","_store$getState","getState","Accept","questionData","commentData","_postRender","getVideos","setVideosAction","authorize","Headers","authorization","pass","btoa","register","logout","connect","React","Component","[object Object]","args","super","this","handleChange","e","name","value","setState","componentDidMount","render","react_default","a","createElement","Segment","textAlign","secondary","Header","size","Subheader","Content","props","Loader","active","Menu","Item","header","as","Link","to","position","Dropdown","item","text","isAdmin","stripekey","custom","currentPrice","stripe","timeout","perCredit","onPurchase","async","session","redirectToCheckout","sessionId","log","changeQuantity","_","clearTimeout","setTimeout","total","window","Stripe","Container","src_FrontNav","src_Credits","Grid","Column","Message","Form","Radio","label","checked","onChange","Input","min","Button","onClick","FileInput","buttonOnly","button","icon","style","fileInput","click","accept","ref","display","Icon","placeholder","file","labelPosition","readOnly","target","files","FormData","append","_id","handleFileChange","List","relaxed","verticalAlign","className","key","floated","origname","Divider","src_FileInput","navigate","selection","Popup","trigger","on","fluid","onSubmit","isNaN","limit","slice","video","disabled","finished","href","date","datePad","jsdate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","formatDate","rendering","preview","info","open","url","songOptions","themeOptions","unshift","Select","required","clearable","Dashboard","stackable","width","horizontal","Videos","Themes","src_Songs","src_Preview","Logout","componentWillMount","replace","Fragment","setTheme","setSong","handleTheme","handleSong","resetVideoState","input","loading","fetchThread","catch","preventDefault","indexOf","pattern","match","onlythread","handle","render_Settings","autoFocus","primary","negative","Final","done","send","outroLen","transitionLen","getFull","commentTimes","reduce","b","length","estimateCommentHtml","noTags","trim","splits","str","split","filter","d","words","estimate","estimateComment","time","commentArr","recAdd","push","body_html","Math","round","calculateCommentList","timeInSeconds","mins","floor","hours","readableTime","c","PureComponent","justifyContent","Step","Group","render_TimeEstimator","children","foulSpanArray","findWithRegex","regex","contentBlock","callback","getText","matchArr","start","exec","index","decorators","strategy","forEach","reg","RegExp","component","Comment","constructor","p","propagateHtmlChange","html","stateToHTML","editor","getCurrentContent","onBlur","onStateChange","propagateEnableChange","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","convertFromHTML","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","stopPropagation","componentWillUnmount","_this$props","onKeyDown","color","marginRight","author","score","all_awardings","award","count","icon_url","src","alt","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","Comment_Comment","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","innerRef","items","draggableId","draggableProps","dragHandleProps","draggable","setCurrent","setProcessed","bind","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","num","parseInt","addEventListener","removeEventListener","topComment","scrollTo","filt","recFilter","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","i","toMinSec","seconds","fullMins","restSecs","calculateTotalTime","fullHtml","onCurrentCommentChange","s","onReorder","end","list","startIndex","endIndex","_result$splice","splice","removed","slicedToArray","flexDirection","render_PickComments_SortableComments","flexGrow","paddingLeft","render_PickComments_Comment","padding","max","marginTop","setTitle","EditorComponent","createEmpty","selftext","setSelftext","setIncludeSelftext","onChangeSelftext","onChangeInclude","Checkbox","render_EditorComponent","alignItems","paddingTop","marginLeft","basic","router_es","render_Navbar","path","ChooseThread","render_Question","SelfText","render_PickComments","render_Final","default","noThrow","Testing","message","sendRender","parse","TextArea","voices","find","th","voice","voiceSpeed","previewSong","delete","submit","_this$state","removeFile","inline","grouped","Field","addingUser","editingUser","selectedUser","creditsToGive","createUser","closeAddModal","openAddModal","changeUserPass","closeEditModal","giveCredits","openEditModal","Label","Description","videoCount","Modal","onClose","Actions","step","Admin_UserList","passwordConfirm","changedPass","changePass","inputerror","NotFound","redirect","AdminPath","src_Dashboard","src_BuyCredits","render_App","Logout_Logout","src_Account","src_Testing","Admin","App","login","redirectTo","height","maxWidth","views_Comment_Comment","NotFoundLogin","Register","Login","src_AuthedRouter","DefaultRouter","Boolean","location","hostname","ReactDOM","es","src_App","react_toastify","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8e93c99e.chunk.js","sourcesContent":["export const resetVideoState = content => ({\n\ttype: 'RESET_VIDEOSTATE',\n\tval: content,\n})\nexport const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setUser = content => ({\n\ttype: 'SET_USER',\n\tval: content,\n})\nexport const setUsers = content => ({\n\ttype: 'SET_USERS',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setTheme = content => ({\n\ttype: 'SET_THEME',\n\tval: content,\n})\nexport const setSong = content => ({\n\ttype: 'SET_SONG',\n\tval: content,\n})\nexport const setCredits = content => ({\n\ttype: 'SET_CREDITS',\n\tval: content,\n})\nexport const setThemes = content => ({\n\ttype: 'SET_THEMES',\n\tval: content,\n})\nexport const setSongs = content => ({\n\ttype: 'SET_SONGS',\n\tval: content,\n})\nexport const setVideos = content => ({\n\ttype: 'SET_VIDEOS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSelftext = content => ({\n\ttype: 'SET_SELFTEXT',\n\tval: content,\n})\nexport const setIncludeSelftext = content => ({\n\ttype: 'SET_INCLUDE_SELFTEXT',\n\tval: content,\n})\nexport const login = () => ({\n\ttype: 'LOGIN',\n})\nexport const logout = () => ({\n\ttype: 'LOGOUT',\n})","import { createStore } from 'redux'\n\nconst defaultState = {\n\t// Video rendering\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tsong: null,\n\ttheme: null,\n\n\t// Dashboard\n\tcredits: null,\n\tthemes: [],\n\tvideos: [],\n\tsongs: [],\n\n\tuser: {},\n\n\n\t// Admin\n\tusers: [],\n\n\tloggedIn: localStorage.getItem('loggedIn') === 'true',\n}\n\nfunction state(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'RESET_VIDEOSTATE':\n\t\t\treturn { ...state, question: null, processed: null, comments: [], theme: null, song: null }\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_USER':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tuser: action.val,\n\t\t\t})\n\t\tcase 'SET_USERS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tusers: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE': {\n\t\t\tlet question = Object.assign({}, state.question, { title: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { selftext_html: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_INCLUDE_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { includeSelftext: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_THEME':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\ttheme: action.val,\n\t\t\t})\n\t\tcase 'SET_SONG':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsong: action.val,\n\t\t\t})\n\t\tcase 'SET_CREDITS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcredits: action.val,\n\t\t\t})\n\t\tcase 'SET_THEMES':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tthemes: action.val,\n\t\t\t})\n\t\tcase 'SET_SONGS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsongs: action.val,\n\t\t\t})\n\t\tcase 'SET_VIDEOS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tvideos: action.val,\n\t\t\t})\n\t\tcase 'LOGIN':\n\t\t\tlocalStorage.setItem('loggedIn', 'true')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: true,\n\t\t\t})\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('loggedIn')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: false,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default process.env.NODE_ENV === \"development\" ?\n\tcreateStore(state, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()) :\n\tcreateStore(state)","import {\n\tlogin as loginAction,\n\tlogout as logoutAction,\n\tsetCredits as setCreditsAction,\n\tsetSongs as setSongsAction,\n\tsetThemes as setThemesAction,\n\tsetVideos as setVideosAction,\n\tsetQuestion,\n\tsetComments,\n\tsetUser,\n\tsetUsers\n} from './redux/actions'\nimport store from './redux/store'\nimport { toast } from 'react-toastify'\n\nlet apiurl = process.env.NODE_ENV === \"development\" ?\n\t'http://localhost:4001/api' :\n\t'/api'\n\n// The jsonFetch function is a wrapper around the native fetch().\n// It returns the response in json, and removes the \"loggedIn\" item\n// from localStorage if the response status code is 401.\n// Returns a promise that throws if the status code is not in the 200-399 range\nconst jsonFetch = (RequestInfo, RequestInit = {}) => {\n\tif (typeof RequestInfo === 'string') {\n\t\tRequestInfo = apiurl + RequestInfo\n\t}\n\tif (RequestInit.method && RequestInit.method !== \"GET\") {\n\t\tif (!RequestInit.headers) {\n\t\t\tRequestInit.headers = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t}\n\t\t}\n\t}\n\n\tRequestInit.credentials = 'include'\n\n\treturn fetch(RequestInfo, RequestInit)\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json()\n\t\t\t} else if (res.status === 401) {\n\t\t\t\tstore.dispatch(logoutAction())\n\t\t\t}\n\t\t\treturn res.json()\n\t\t\t\t.then(err => {\n\t\t\t\t\tif (err && err.error) {\n\t\t\t\t\t\ttoast.error(err.error)\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error(\"Something went wrong, try again later\")\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tthrow err.error // Parse as json, then throw.\n\t\t\t\t})\n\t\t})\n}\n\n// ADMIN ROUTES\n\nexport let adminGetUsers = function () {\n\treturn jsonFetch('/admin/users')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUsers(data))\n\t\t})\n}\n\nexport let adminCreateUser = function (email, password) {\n\treturn jsonFetch('/admin/users', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ email, password })\n\t})\n}\n\nexport let adminChangePass = function (id, password) {\n\treturn jsonFetch(`/admin/users/${id}/change-password`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ password })\n\t})\n}\n\nexport let adminGiveCredits = function (id, quantity) {\n\treturn jsonFetch(`/admin/users/${id}/add-credits`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ quantity })\n\t})\n}\n\n// NORMAL ROUTES\n\nexport let getUser = function () {\n\treturn jsonFetch('/me')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUser(data))\n\t\t})\n}\n\nexport let changePassword = function (current, newPassword) {\n\treturn jsonFetch('/me/change-password', {\n\t\tmethod: 'POST',\n\t\tbody: {\n\t\t\tpasswordCurrent: current,\n\t\t\tpasswordNew: newPassword,\n\t\t}\n\t})\n}\n\nexport let getCredits = function () {\n\treturn jsonFetch('/credits')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setCreditsAction(data.credits))\n\t\t\treturn data\n\t\t})\n}\n\n// Returns { total: Number }\nexport let checkPrice = function (quantity) {\n\treturn jsonFetch('/credits/check-price', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\n// Use stripe to buy credits\n// Returns { session: String }\nexport let buyCredits = function (quantity) {\n\treturn jsonFetch('/credits/buy', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\nexport let getSongs = function () {\n\treturn jsonFetch('/songs')\n\t\t.then(songs => {\n\t\t\tstore.dispatch(setSongsAction(songs))\n\t\t\treturn songs\n\t\t})\n}\n\nexport let uploadSong = function (formData) {\n\treturn jsonFetch('/songs', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n\t\t.then(r => {\n\t\t\tgetSongs()\n\t\t\treturn r\n\t\t})\n}\n\nexport let deleteSong = function (id) {\n\treturn jsonFetch('/songs/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let getThread = function (thread, sort) {\n\treturn jsonFetch(`/thread/${thread}?sort=${sort}`)\n\t\t.then(json => {\n\t\t\tlet mapping = comment => {\n\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tdata: newcomment\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet comments = json[1].map(mapping)\n\n\t\t\tstore.dispatch(setQuestion(json[0]))\n\t\t\tstore.dispatch(setComments(comments))\n\n\t\t\treturn json\n\t\t})\n}\n\nexport let getThemes = function () {\n\treturn jsonFetch('/themes')\n\t\t.then(themes => {\n\t\t\tstore.dispatch(setThemesAction(themes))\n\t\t\treturn themes\n\t\t})\n}\n\nexport let getTheme = function (themeId) {\n\treturn jsonFetch('/themes/' + themeId)\n}\n\nexport let createTheme = function (data) {\n\treturn jsonFetch('/themes', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let editTheme = function (id, data) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let uploadThemeFiles = function (id, formData) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n}\n\nexport let deleteTheme = function (id) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let deleteThemeFile = function (id, body = { intro: false, transition: false, outro: false }) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'DELETE',\n\t\tbody: JSON.stringify(body),\n\t})\n}\n\nexport let longPollVideo = function (fileId) {\n\treturn jsonFetch('/long-poll-video/' + fileId)\n}\n\nexport let postPreview = function (theme, song) {\n\treturn jsonFetch('/preview', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t}\n\t\t}),\n\t})\n}\n\nexport let postRender = function () {\n\tlet { question, processed, theme, song } = store.getState()\n\n\tif (!question.includeSelftext) {\n\t\tdelete question.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData: question,\n\t\t\tcommentData: processed,\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t},\n\t\t})\n\t})\n}\n\nexport let _postRender = function (state) {\n\tlet { questionData, commentData, options } = state\n\n\tif (!questionData.includeSelftext) {\n\t\tdelete questionData.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData,\n\t\t\tcommentData,\n\t\t\toptions,\n\t\t})\n\t})\n}\n\nexport const getVideos = function () {\n\treturn jsonFetch('/videos')\n\t\t.then(r => {\n\t\t\tstore.dispatch(setVideosAction(r))\n\t\t\treturn r\n\t\t})\n}\n\nexport const openVideoLink = function (videoId) {\n\treturn window.open('/videos/' + videoId, '_blank')\n}\n\n// btoa: Binary to Ascii (Base64 only contains ascii characters)\n\n// Basic toBase64(username:password)\nconst toBasicAuth = (user, pass) => `Basic ${btoa(user + ':' + pass)}`\n\nexport let authorize = function (email, password) {\n\treturn jsonFetch('/auth', {\n\t\theaders: new Headers({\n\t\t\tauthorization: toBasicAuth(email, password),\n\t\t}),\n\t\tmethod: 'POST',\n\t}).then(r => {\n\t\tstore.dispatch(loginAction())\n\t\treturn r\n\t})\n}\n\nexport let register = function (email, password) {\n\treturn jsonFetch('/register', {\n\t\tbody: JSON.stringify({ email, password }),\n\t\tmethod: 'POST',\n\t})\n}\n\nexport let logout = function () {\n\treturn jsonFetch('/logout').then(r => {\n\t\tstore.dispatch(logoutAction())\n\t})\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Header, Segment, Loader } from 'semantic-ui-react'\nimport { getCredits } from './api'\n\nclass Credits extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getCredits()\n    }\n    render() {\n        return (\n            <Segment textAlign=\"center\" secondary>\n                <Header size=\"huge\">\n                    <Header.Subheader>Credits</Header.Subheader>\n                    <Header.Content>\n                        {this.props.credits != null ?\n                            this.props.credits :\n                            <Loader active />}\n                    </Header.Content>\n                </Header>\n            </Segment>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(Credits);","import React from 'react'\nimport { Link } from '@reach/router'\nimport { connect } from 'react-redux'\nimport { Menu, Dropdown } from 'semantic-ui-react'\n\nclass FrontNav extends React.Component {\n    render() {\n        return (\n            <Menu>\n                <Menu.Item header>Reddit Video Maker</Menu.Item>\n                <Menu.Item as={Link} to=\"/\">Dashboard</Menu.Item>\n                <Menu.Menu position=\"right\">\n                    <Dropdown item text=\"Account\">\n                        <Dropdown.Menu>\n                            <Dropdown.Item as={Link} to=\"/account\">My Account</Dropdown.Item>\n                            {this.props.user.isAdmin && <Dropdown.Item as={Link} to=\"/admin\">Admin</Dropdown.Item>}\n                            <Dropdown.Item as={Link} to=\"/logout\">Log out</Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n                </Menu.Menu>\n            </Menu>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(FrontNav);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { buyCredits, checkPrice } from '../api'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\n\nlet stripekey = process.env.NODE_ENV === \"production\" ? \"pk_live_Dh8aRBNWH73HfNvlOVb4cOJE00eX9d9CAv\" : \"pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK\"\n\nclass BuyCredits extends React.Component {\n    state = {\n        credits: 10,\n        custom: false,\n        currentPrice: null,\n        stripe: null,\n\n        timeout: null,\n        perCredit: null,\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        // getCredits()\n        this.setState({ stripe: window.Stripe(stripekey) })\n        this.changeQuantity(null, { value: this.state.credits })\n    }\n    onPurchase = async () => {\n        let { session } = await buyCredits(this.state.credits)\n        this.state.stripe.redirectToCheckout({\n            sessionId: session.id,\n        }).then(res => {\n            console.log(res)\n        })\n    }\n    changeQuantity = (_, { value }) => {\n        this.setState({ credits: value })\n\n        if (this.state.timeout !== null) {\n            clearTimeout(this.state.timeout)\n        }\n        let timeout = setTimeout(async () => {\n            let { total } = await checkPrice(value)\n            this.setState({ currentPrice: total, perCredit: total / value, timeout: null })\n        }, 200)\n        this.setState({ timeout })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Credits />\n                <Grid>\n                    <Grid.Column>\n                        <Segment>\n                            <Header>Buy credits</Header>\n                            <Message>This is a message to show how much one credit is worth</Message>\n                            <Form>\n                                <Form.Radio name=\"credits\" label=\"10 Credits\" value={10} checked={this.state.credits === 10} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"25 Credits\" value={25} checked={this.state.credits === 25} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"50 Credits\" value={50} checked={this.state.credits === 50} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"100 Credits\" value={100} checked={this.state.credits === 100} onChange={this.changeQuantity} />\n                                <Form.Input name=\"credits\" label=\"Custom amount\" value={this.state.credits} onChange={this.changeQuantity} type=\"number\" min={1} />\n                                <Header>\n                                    <Header.Content>\n                                        {this.state.currentPrice}\n                                    </Header.Content>\n                                    <Header.Subheader>\n                                        {this.state.perCredit}/Credit\n                                    </Header.Subheader>\n                                </Header>\n                                <Form.Button onClick={this.onPurchase} size=\"large\">Buy</Form.Button>\n                            </Form>\n                        </Segment>\n                    </Grid.Column>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(BuyCredits);","import React from 'react'\nimport { Button, Icon, Input } from 'semantic-ui-react'\n\nclass FileInput extends React.Component {\n    render() {\n        let buttonOnly = this.props.buttonOnly\n\n        let button =\n            <Button\n                icon={!this.props.label}\n                style={{ position: 'relative' }}\n                onClick={() => this.fileInput.click()}>\n                <input\n                    name={this.props.name}\n                    type=\"file\"\n                    accept={this.props.accept || null}\n                    ref={r => this.fileInput = r}\n                    style={{ display: 'none' }}\n                    onChange={this.props.onChange} />\n                <Icon name={this.props.icon || \"file\"}\n                    size={this.props.size} />\n                {this.props.label && this.props.label}\n            </Button>\n        return (\n            buttonOnly ? button :\n                <Input\n                    {...this.props}\n                    placeholder={this.props.placeholder || \"No file\"}\n                    value={this.props.file ? this.props.file.name : ''}\n                    label={button}\n                    labelPosition=\"left\"\n                    readOnly={true}\n                    size={this.props.size}\n                    onClick={() => this.fileInput.click()} />\n        )\n    }\n}\n\nexport default FileInput;","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Icon, List, Loader } from 'semantic-ui-react'\nimport { deleteSong, getSongs, uploadSong } from '../api'\nimport FileInput from '../FileInput'\nimport './index.css'\n\nclass ThemesList extends React.Component {\n    uploadSong = async (e) => {\n        let file = e.target.files[0]\n        let formData = new FormData()\n        formData.append('song', file)\n        await uploadSong(formData)\n    }\n    deleteSong = async song => {\n        await deleteSong(song._id)\n        getSongs()\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = (e, { name }) => this.setState({ [name]: e.target.files[0] })\n    componentDidMount() {\n        getSongs()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List relaxed verticalAlign=\"middle\">\n                    {this.props.songs ? this.props.songs.map(song =>\n                        <List.Item className=\"song-item\" key={song._id}>\n                            <List.Content className=\"song-icon\" floated=\"right\" as=\"a\" onClick={() => this.deleteSong(song)} title=\"Delete song\">\n                                <Icon name=\"delete\" />\n                            </List.Content>\n                            <List.Content>\n                                <List.Header>\n                                    {song.file.origname}\n                                </List.Header>\n                            </List.Content>\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n\n                <FileInput icon=\"music\" accept=\"audio/*\" buttonOnly name=\"song\" label=\"Upload song\" onChange={this.uploadSong} />\n                {/* <Popup trigger={<Button>Upload song</Button>}\n                    on=\"click\"\n                    position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.uploadSong}>\n                            <Header>Upload song</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\" />\n                            <Form.Button type=\"submit\">Upload</Form.Button>\n                            <Message size=\"tiny\" color=\"yellow\">\n                                Songs that are too short will be repeated\n                            </Message>\n                        </Form>\n                    </Container>\n                </Popup> */}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        songs: store.songs,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Divider, Form, Header, List, Loader, Popup } from 'semantic-ui-react'\nimport { createTheme, getThemes } from '../api'\n\nclass ThemesList extends React.Component {\n    createTheme = async () => {\n        const { theme } = await createTheme({ name: this.state.name })\n        navigate(`/themes/${theme}`)\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getThemes()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.themes ? this.props.themes.map(theme =>\n                        <List.Item key={theme._id} onClick={() => navigate(\"/themes/\" + theme._id)}>\n                            {/* <Link to={\"/themes/\" + theme._id}> */}\n                            <List.Content>\n                                <List.Header>{theme.name}</List.Header>\n                            </List.Content>\n                            {/* </Link> */}\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n                <Popup trigger={<Button>New theme</Button>} on=\"click\" position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.createTheme}>\n                            <Header>Create new theme</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\"></Form.Input>\n                            <Form.Button type=\"submit\">Create</Form.Button>\n                        </Form>\n                    </Container>\n                </Popup>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, List, Loader } from 'semantic-ui-react'\nimport { getVideos } from './api'\n\nfunction formatDate(date) {\n    let datePad = date => (\"0\" + date).slice(-2)\n    let jsdate = new Date(date)\n    return `${jsdate.getFullYear()}-${datePad(jsdate.getMonth())}-${datePad(jsdate.getDate())} ${datePad(jsdate.getHours())}:${datePad(jsdate.getMinutes())}`\n}\n\nclass VideosList extends React.Component {\n    componentDidMount() {\n        getVideos()\n    }\n    getVideos = () => {\n        return isNaN(this.props.limit) ? this.props.videos : this.props.videos.slice(0, this.props.limit)\n    }\n    render() {\n        return (\n            <Container>\n                <List selection>\n                    {this.props.videos ? this.getVideos().map(video => {\n                        return (\n                            <List.Item disabled={!video.finished} key={video._id} as=\"a\" href={\"/api/videos/\" + video.file}>\n                                <List.Content>\n                                    <List.Header>{video.name || \"Unnamed video\"}</List.Header>\n                                    {video.finished ? formatDate(video.finished) : \"Rendering...\"}\n                                </List.Content>\n                            </List.Item>\n                        )\n                    }) : <List.Item><Loader active /></List.Item>}\n                </List>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        videos: store.videos,\n    }\n}\n\nexport default connect(mapStateToProps)(VideosList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Form, Header } from 'semantic-ui-react'\nimport { longPollVideo, postPreview } from './api'\nimport { toast } from 'react-toastify'\n\nclass Preview extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    state = {\n        song: null,\n        theme: null,\n        rendering: false,\n    }\n    preview = () => {\n        this.setState({ rendering: true })\n\n        postPreview(this.state.theme, this.state.song)\n            .then(res => {\n                return longPollVideo(res.file)\n            })\n            .then(res => {\n                toast.info('Preview is ready', {\n                    onClick: () => window.open(res.url, '_blank'),\n                })\n            })\n    }\n    render() {\n        let songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n        let themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n        songOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n        return (\n            <Form>\n                <Header>Preview</Header>\n                <p>You can render a preview of a theme and song. It will take about 20 seconds to render, and will not cost any credits. It will show up in your videos. </p>\n                <Form.Select\n                    label=\"Theme\"\n                    required\n                    disabled={this.state.rendering}\n                    placeholder=\"Select a theme\"\n                    value={this.props.theme}\n                    name=\"theme\"\n                    options={themeOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Select\n                    label=\"Song\"\n                    clearable\n                    disabled={this.state.rendering}\n                    placeholder=\"No song\"\n                    value={this.props.song}\n                    name=\"song\"\n                    options={songOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Button disabled={this.state.rendering || !this.state.theme} onClick={this.preview}>Preview</Form.Button>\n            </Form>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    songs: state.songs,\n    themes: state.themes,\n})\n\nexport default connect(mapStateToProps)(Preview);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Songs from '../Songs'\nimport Themes from '../Themes/index'\nimport Videos from '../Videos'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport Preview from '../Preview'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Videos</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Videos limit={8} />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/video\">Make video</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Themes</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Themes />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Songs</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Songs />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Preview</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Preview />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react'\nimport { logout } from './api'\nimport { navigate } from '@reach/router'\n\nexport default class Logout extends React.Component {\n    componentWillMount() {\n        this.logout();\n    }\n    logout() {\n        logout()\n            .then(r => {\n                navigate('/login', { replace: true })\n            })\n    }\n    render() {\n        return <></>\n    }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form } from 'semantic-ui-react';\nimport { setSong, setTheme } from '../redux/actions';\n\nclass Settings extends Component {\n\thandleTheme = (e, { value }) => {\n\t\tthis.props.setTheme(value)\n\t}\n\thandleSong = (e, { value }) => {\n\t\tthis.props.setSong(value)\n\t}\n\trender() {\n\t\tlet themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n\t\tlet songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n\t\tsongOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n\n\t\treturn (\n\t\t\t<Form onSubmit={this.props.onSubmit}>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Theme\"\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\tvalue={this.props.theme}\n\t\t\t\t\tname=\"theme\"\n\t\t\t\t\toptions={themeOptions}\n\t\t\t\t\tonChange={this.handleTheme}\n\t\t\t\t/>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Song\"\n\t\t\t\t\tclearable\n\t\t\t\t\tplaceholder=\"No song\"\n\t\t\t\t\tvalue={this.props.song}\n\t\t\t\t\tname=\"song\"\n\t\t\t\t\toptions={songOptions}\n\t\t\t\t\tonChange={this.handleSong}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n\tsong: state.song,\n\tthemes: state.themes,\n\tsongs: state.songs,\n}), { setTheme, setSong })(Settings);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Divider, Form, Icon, Message, Segment } from 'semantic-ui-react'\nimport { getThread } from '../api'\nimport { setComments, setQuestion, resetVideoState } from '../redux/actions'\nimport Settings from './Settings'\n\nclass Thread extends React.Component {\n\tstate = {\n\t\tinput: '',\n\t\tsort: 'top',\n\t\tloading: null,\n\t\terror: null,\n\t}\n\tcomponentWillMount() {\n\t\tthis.props.resetVideoState()\n\t}\n\tfetchThread = (thread, sort) => {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread, sort)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t\tnavigate('/video/post')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({ error: err, loading: false })\n\t\t\t})\n\t}\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread, this.state.sort)\n\t}\n\thandle = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\tlet sortOptions = [\n\t\t\t{ text: 'Top', value: 'top' },\n\t\t\t{ text: 'Best', value: 'best' },\n\t\t\t{ text: 'New', value: 'new' },\n\t\t]\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Settings />\n\t\t\t\t<Divider />\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Form.Input label=\"Thread\" required value={this.state.input} onChange={this.handle} name=\"input\" placeholder=\"Type a reddit thread ID or paste its URL\" autoFocus />\n\t\t\t\t\t<Form.Select label=\"Sort by\" required value={this.state.sort} onChange={this.handle} name=\"sort\" options={sortOptions} />\n\t\t\t\t\t<Form.Button primary loading={this.state.loading} disabled={!this.props.theme || !this.state.input}>OK<Icon name=\"angle right\" /></Form.Button>\n\t\t\t\t\t{this.state.error && <Message negative>{this.state.error}</Message>}\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tresetVideoState,\n})(Thread);","import React, { Component } from 'react';\nimport { Button, Divider, Segment } from 'semantic-ui-react';\nimport { postRender } from '../api';\nimport Settings from './Settings';\n\nclass Final extends Component {\n    state = { loading: false, done: false }\n    send = async () => {\n        this.setState({ loading: true, done: false })\n        await postRender()\n        this.setState({ loading: false, done: true })\n    }\n    render() {\n\n        return (\n            <Segment>\n                {this.state.done ?\n                    <p>The video is now rendering.</p> :\n                    <>\n                        <p>Change settings if needed and then send to render video.</p>\n                        <Settings />\n                        <Divider />\n                        <Button primary size=\"large\" loading={this.state.loading} onClick={this.send}>Render</Button>\n                    </>\n                }\n            </Segment>\n        )\n    }\n}\n\nexport default Final","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn (splits * 0.38152203637725923 + words * 0.2767486833003453) * 0.98\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}\n\nexport function calculateCommentList(commentArr) {\n\tlet total = []\n\tlet recAdd = comment => {\n\t\ttotal.push(estimateCommentHtml(comment.data.body_html).estimate)\n\n\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\tcomment.data.replies\n\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t.map(recAdd)\n\t\t}\n\t}\n\tcommentArr\n\t\t.filter(d => d.enabled)\n\t\t.map(recAdd)\n\n\treturn Math.round(1e2 * getFull(total)) / 1e2\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Header } from 'semantic-ui-react';\nimport { calculateCommentList, estimateCommentHtml } from './estimate';\n\nfunction readableTime(timeInSeconds) {\n    let mins = Math.floor(timeInSeconds / 60)\n    let hours = Math.floor(mins / 60)\n    mins -= hours * 60\n\n    let seconds = Math.floor(timeInSeconds) - mins * 60 - hours * 60\n\n    let str = \"\"\n    if (hours > 0) {\n        str += hours + \" h, \"\n    }\n    if (mins > 0) {\n        str += mins + \" m, \"\n    }\n    str += seconds + \" s\"\n\n    return str\n}\n\nclass TimeEstimator extends Component {\n    render() {\n        let time = calculateCommentList(this.props.comments)\n\n        if (this.props.question.includeSelftext && this.props.question.selftext_html) {\n            let selftext = this.props.question.selftext_html\n            time += estimateCommentHtml(selftext).estimate\n        }\n\n        return (\n            <div>\n                <Header>\n                    <Header.Content>Estimated video length: {readableTime(time)}</Header.Content>\n                </Header>\n                Comments selected: {this.props.comments.filter(c => c.enabled).length}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    comments: state.comments,\n    question: state.question,\n}))(TimeEstimator);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Header, Step } from 'semantic-ui-react'\nimport TimeEstimator from './TimeEstimator'\nimport { connect } from 'react-redux'\n\nclass Navbar extends React.PureComponent {\n    render() {\n        return (\n            <div>\n                {this.props.question && \n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                            <Step.Group>\n                                <Step active={this.props[\"*\"] === \"post\"} as={Link} to=\"post\">Question title</Step>\n                                <Step active={this.props[\"*\"] === \"selftext\"} as={Link} to=\"selftext\">Body text</Step>\n                                <Step active={this.props[\"*\"] === \"comments\"} as={Link} to=\"comments\">Comments</Step>\n                                <Step active={this.props[\"*\"] === \"final\"} as={Link} to=\"final\">Finish</Step>\n                            </Step.Group>\n                        </div>\n                        <TimeEstimator />\n                        <Header as=\"h2\">{this.props.question.title}</Header>\n                    </div>\n                }\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    question: state.question,\n}))(Navbar)","// These will hide the middle of the three regex groups\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nimport './Comment.css'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange = () => {\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tonBlur = e => {\n\t\tthis.propagateHtmlChange()\n\t}\n\tonStateChange = editor => this.setState({ editor })\n\tpropagateEnableChange = () => {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.propagateHtmlChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score >= 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <span key={award.count + award.icon_url}><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</span>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.onStateChange}\n\t\t\t\t\t\tonBlur={this.onBlur}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport './SortableComments.css'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tonDragEnd = (result) => {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import { navigate } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setComments, setProcessed } from '../../redux/actions';\nimport { estimateCommentHtml, getFull } from '../estimate';\nimport Comment from './Comment';\nimport SortableComments from './SortableComments';\nimport { Segment, Container, Header, Button, Input, Icon } from 'semantic-ui-react';\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tonSubmit() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\n\t\tnavigate('/video/final')\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tif (this.props.comments.length === 0) {\n\t\t\treturn (<Container>\n\t\t\t\t<Header>No comments found for this thread</Header>\n\t\t\t</Container>)\n\t\t}\n\t\tlet comment = this.props.comments[this.state.current]\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center' }}>\n\t\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t\t<div style={{ flexGrow: 1, paddingLeft: 10 }}>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<div ref={ref => this.topComment = ref}>\n\t\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", padding: 10 }}>\n\t\t\t\t\t\t\t<Button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>\n\t\t\t\t\t\t\t\t<Icon name=\"arrow left\" />\n\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<Button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t<Icon name=\"arrow right\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 10 }}>\n\t\t\t\t\t\t\t<Button onClick={this.onSubmit} size=\"huge\" primary>Finish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tcomments: state.comments,\n}), {\n\tsetProcessed,\n\tsetComments\n})(PickComments);","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setTitle } from '../redux/actions';\n\nclass Question extends Component {\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tnavigate('selftext')\n\t}\n\tonChange = e => {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Header size=\"large\">Edit question</Header>\n\t\t\t\t\t<Form.Input value={this.props.title} onChange={this.onChange} />\n\t\t\t\t\t<Form.Button primary type=\"submit\">Continue</Form.Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle })(Question);","import React, { Component } from 'react'\nimport { foulSpanArray } from './sanitize'\n\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nfunction handleStrategy(contentBlock, callback) {\n    foulSpanArray.forEach(reg => {\n        findWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n    })\n}\nfunction editStrategy(contentBlock, callback) {\n    findWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n    return <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n    return <span className=\"highlight-warn\">{props.children}</span>\n}\n\nlet decorators = [\n    {\n        strategy: handleStrategy,\n        component: handleSpan,\n    },\n    {\n        strategy: editStrategy,\n        component: editSpan,\n    },\n]\n\nclass EditorComponent extends Component {\n    constructor(p) {\n        super(p)\n\n        this.inlineToolbarPlugin = createInlineToolbarPlugin()\n        this.linkPlugin = createLinkPlugin()\n        this.plugins = [\n            this.inlineToolbarPlugin,\n            this.linkPlugin,\n        ]\n\n        let d = convertFromHTML(p.data)\n        \n        this.state = {\n            editor: d.contentBlocks ? EditorState.createWithContent(\n                ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)\n            ) : EditorState.createEmpty(),\n        }\n    }\n    handlePress = e => {\n        e.stopPropagation()\n    }\n    onChange = val => {\n        this.setState({ editor: val })\n\n        let html = stateToHTML(this.state.editor.getCurrentContent())\n\n        if (this.props.data !== html) {\n            this.props.onChange(html)\n        }\n    }\n    render() {\n        return <div>\n            <Editor\n                editorState={this.state.editor}\n                onChange={this.onChange}\n                decorators={decorators}\n                plugins={this.plugins}\n            />\n            <this.inlineToolbarPlugin.InlineToolbar>\n                {extProps => <>\n                    <BoldButton {...extProps} />\n                    <ItalicButton {...extProps} />\n                    <UnderlineButton {...extProps} />\n                    <this.linkPlugin.LinkButton {...extProps} />\n                </>}\n            </this.inlineToolbarPlugin.InlineToolbar>\n        </div>\n    }\n}\n\nexport default EditorComponent","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setSelftext, setIncludeSelftext } from '../redux/actions';\nimport EditorComponent from './EditorComponent';\n\nclass Selftext extends Component {\n    onSubmit = e => {\n        e.preventDefault()\n\n        navigate('/video/comments')\n    }\n    onChangeSelftext = value => {\n        this.props.setSelftext(value)\n    }\n    onChangeInclude = (e, { checked }) => {\n        this.props.setIncludeSelftext(checked)\n    }\n    render() {\n        return (\n            <Segment>\n                <Form onSubmit={this.onSubmit}>\n                    <Header size=\"large\">Edit selftext</Header>\n                    <Form.Checkbox label=\"Include selftext?\" checked={this.props.includeSelftext} onChange={this.onChangeInclude} />\n                    <Segment style={{ display: this.props.includeSelftext ? 'block' : 'none' }}>\n                        <EditorComponent onChange={this.onChangeSelftext} data={this.props.selftext} />\n                    </Segment>\n                    <Form.Button primary type=\"submit\">Continue</Form.Button>\n                </Form>\n            </Segment>\n        )\n    }\n}\n\nexport default connect(state => ({\n    selftext: state.question.selftext_html || \"\",\n    includeSelftext: state.question.includeSelftext,\n}), { setSelftext, setIncludeSelftext })(Selftext);","import { Link, Redirect, Router } from '@reach/router'\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Header } from 'semantic-ui-react'\nimport { getSongs, getThemes } from '../api'\nimport SelectThread from './ChooseThread'\nimport Final from './Final'\nimport Navbar from './Navbar'\nimport PickComments from './PickComments/index'\nimport Question from './Question'\nimport SelfText from './SelfText'\n\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tgetThemes()\n\t\tgetSongs()\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t\t\t<Header style={{ paddingTop: 10 }} as=\"h1\">\n\t\t\t\t\t\t<Header.Content>Project BOG</Header.Content>\n\t\t\t\t\t\t<Header.Subheader>Create video</Header.Subheader>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Button style={{ marginLeft: 20 }} basic as={Link} to=\"/\">Go back</Button>\n\t\t\t\t</div>\n\t\t\t\t<Router>\n\t\t\t\t\t<Navbar path=\"/\">\n\t\t\t\t\t\t<SelectThread path=\"/\" />\n\t\t\t\t\t\t{/* Can't have fragments in Router element */}\n\t\t\t\t\t\t{this.props.question && <Question path=\"post\" />}\n\t\t\t\t\t\t{this.props.question && <SelfText path=\"selftext\" />}\n\t\t\t\t\t\t{this.props.question && <PickComments path=\"comments\" />}\n\t\t\t\t\t\t{this.props.question && <Final path=\"final\" />}\n\t\t\t\t\t\t<Redirect default from=\"*\" to=\"/video/\" noThrow />\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Router>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t}\n}\n\nexport default connect(mapStateToProps)(App)","import React from 'react';\nimport { Container, Form, Message, Segment } from 'semantic-ui-react';\nimport { _postRender } from './api';\n\nclass Testing extends React.Component {\n    state = { text: \"\", message: null }\n    onChange = (_, { name, value }) => this.setState({ [name]: value })\n    sendRender = () => {\n        let json = JSON.parse(this.state.text) // Parse the text as json\n        _postRender(json) // Send it to render\n            .then(() => {\n                this.setState({ message: \"Rendering...\" })\n            })\n    }\n    render() {\n        return (\n            <Container>\n                <Segment>\n                    <Form>\n                        <Form.TextArea value={this.state.text} name=\"text\" onChange={this.onChange} />\n                        <Form.Button onClick={this.sendRender}>Render</Form.Button>\n                        {this.state.message && <Message>{this.state.message}</Message>}\n                    </Form>\n                </Segment>\n            </Container>\n        )\n    }\n}\n\nexport default Testing","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Form, Header, Segment } from 'semantic-ui-react'\nimport { deleteTheme, deleteThemeFile, editTheme, getTheme, uploadThemeFiles } from '../api'\nimport FileInput from '../FileInput'\nimport FrontNav from '../FrontNav'\n\nlet voices = [\n    {\n        value: \"daniel\",\n        text: \"Daniel UK\"\n    },\n    {\n        value: \"google-us\",\n        text: \"Google US\"\n    },\n]\n\nclass Theme extends React.Component {\n    state = {\n        name: \"\",\n        voice: \"\",\n        voiceSpeed: 1,\n\n        // Files\n        intro: null,\n        transition: null,\n        outro: null,\n\n        loading: true,\n\n        previewSong: false,\n    }\n    componentDidMount() {\n        getTheme(this.props.themeId)\n            .then(theme => {\n                this.setState(theme)\n            })\n    }\n    delete = async () => {\n        await deleteTheme(this.props.themeId)\n        navigate('/', { replace: true })\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = e => {\n        e.preventDefault()\n        this.setState({ [e.target.name]: e.target.files[0] })\n    }\n    submit = () => {\n        this.setState({ loading: true })\n        editTheme(this.props.themeId, {\n            name: this.state.name,\n            voice: this.state.voice,\n            voiceSpeed: this.state.voiceSpeed,\n        }).then(async () => {\n            const { intro, transition, outro } = this.state\n\n            // If at least one file has been selected, upload it/them.\n            if (intro || transition || outro) {\n                const data = new FormData()\n\n                intro && data.append('intro', intro)\n                outro && data.append('outro', outro)\n                transition && data.append('transition', transition)\n\n                await uploadThemeFiles(this.props.themeId, data)\n\n                this.setState({ loading: false })\n            } else {\n                this.setState({ loading: false })\n            }\n        })\n    }\n    removeFile = type => {\n        deleteThemeFile(this.props.themeId, { [type]: true })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Form onSubmit={e => e.preventDefault()}>\n                    <Segment>\n                        <Header>Edit theme</Header>\n                        <p>Themes consist of an intro, a transition, an outro, and a voice. You can have several themes on one account. </p>\n                        <Divider />\n                        <Form.Group inline>\n                            <Form.Input\n                                name=\"name\"\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={this.state.name}\n                                onChange={this.handleChange}>\n                            </Form.Input>\n                            <Form.Select\n                                name=\"voice\"\n                                placeholder=\"Voice\"\n                                value={this.state.voice}\n                                options={voices}\n                                onChange={this.handleChange}>\n                            </Form.Select>\n\n                            {/* <Form.Input\n                                name=\"voiceSpeed\"\n                                type=\"number\"\n                                placeholder=\"Voice speed (default 1)\"\n                                step={0.01}\n                                min={0.2}\n                                max={5}\n                                value={this.state.voiceSpeed}\n                                onChange={this.handleChange}>\n                            </Form.Input> */}\n\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Intro</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"intro\"\n                                    buttonOnly\n                                    label={this.state.intro ? \"Change intro\" : \"No intro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.intro && this.state.intro.origname}</label>\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Transition</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"transition\"\n                                    buttonOnly\n                                    label={this.state.transition ? \"Change transition\" : \"No transition\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.transition && this.state.transition.origname}</label>\n                                {/* {this.state.transition.origname && <Button icon=\"trash\" secondary size=\"mini\" onClick={() => this.removeFile('transition')}></Button>} */}\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Outro</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"outro\"\n                                    buttonOnly\n                                    label={this.state.outro ? \"Change outro\" : \"No outro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.outro && this.state.outro.origname}</label>\n                            </Form.Field>\n                        </Form.Group>\n                        <Divider />\n                        <Form.Group inline>\n                            <Form.Button floated=\"right\" onClick={this.submit} type=\"submit\">Save</Form.Button>\n                            <Form.Button floated=\"right\" type=\"button\" color=\"red\" onClick={this.delete}>Delete</Form.Button>\n                        </Form.Group>\n                    </Segment>\n                </Form>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = (state, props) => ({\n    theme: state.themes.find(th => th._id === props.themeId),\n})\n\nexport default connect(mapStateToProps)(Theme);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Header, List, Loader, Modal, Form, Button, Label, Search } from 'semantic-ui-react'\nimport { adminGetUsers, adminCreateUser, adminChangePass, adminGiveCredits } from '../api'\n\nclass UserList extends React.Component {\n    state = {\n        addingUser: false,\n        editingUser: false,\n        selectedUser: null,\n        email: \"\",\n        password: \"\",\n        creditsToGive: 0,\n        loading: false,\n    }\n    componentDidMount() {\n        adminGetUsers()\n    }\n    createUser = async () => {\n        this.setState({ loading: true })\n        await adminCreateUser(this.state.email, this.state.password)\n        this.setState({ loading: false })\n        adminGetUsers()\n        this.closeAddModal()\n    }\n    openAddModal = () => this.setState({ addingUser: true, editingUser: false, loading: false, email: \"\", password: \"\" })\n    closeAddModal = () => this.setState({ addingUser: false })\n\n    changeUserPass = async () => {\n        this.setState({ loading: true })\n        await adminChangePass(this.state.selectedUser._id, this.state.password)\n        this.setState({ loading: false })\n        this.closeEditModal()\n    }\n    giveCredits = async () => {\n        this.setState({ loading: true })\n        await adminGiveCredits(this.state.selectedUser._id, this.state.creditsToGive)\n        this.setState({ loading: false, creditsToGive: 0 })\n        adminGetUsers()\n        this.closeEditModal()\n    }\n    openEditModal = (user) => this.setState({ addingUser: false, editingUser: true, loading: false, email: user.email, password: user.password, selectedUser: user })\n    closeEditModal = () => this.setState({ editingUser: false })\n\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.users ? this.props.users.map(user =>\n                        <List.Item key={user._id} onClick={() => this.openEditModal(user)}>\n                            <List.Content>\n                                <List.Header>{user.email} {user.isAdmin && <Label size=\"tiny\" color=\"red\">admin</Label>}</List.Header>\n                                <List.Description>{user.credits} credits</List.Description>\n                                <List.Description>{user.videoCount} videos made</List.Description>\n                            </List.Content>\n                        </List.Item>\n                    ) : <Loader active />}\n                </List>\n                <Divider />\n                <Button onClick={this.openAddModal}>Create user</Button>\n                {/* Adding Modal */}\n                <Modal open={this.state.addingUser} onClose={this.closeAddModal}>\n                    <Modal.Content>\n                        <Header>Add user</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input placeholder=\"Email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.createUser}>Create</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n                {/* Editing Modal */}\n                <Modal open={this.state.editingUser} onClose={this.closeEditModal}>\n                    <Modal.Content>\n                        <Header>Give credits</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form loading={this.state.loading}>\n                            <Header>Current credits: {this.state.selectedUser && this.state.selectedUser.credits}</Header>\n                            <Form.Input type=\"number\" name=\"creditsToGive\" step={1} value={this.state.creditsToGive} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.giveCredits} loading={this.state.loading}>Give credits</Form.Button>\n                    </Modal.Actions>\n                    <Divider />\n                    <Modal.Content>\n                        <Header>Change user password</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input disabled placeholder=\"Email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.changeUserPass} loading={this.state.loading}>Change password</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        users: store.users,\n    }\n}\n\nexport default connect(mapStateToProps)(UserList);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport UserList from './UserList'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Admin Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Users</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<UserList />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Container, Form, Segment, Header, Message } from 'semantic-ui-react';\nimport FrontNav from './FrontNav';\nimport { changePassword } from './api';\nimport { toast } from 'react-toastify';\n\nclass Account extends React.Component {\n\thandleChange = (e, { name, value }) => this.setState({ [name]: value })\n\tstate = {\n\t\tcurrent: \"\",\n\t\tpassword: \"\",\n\t\tpasswordConfirm: \"\",\n\t\tchangedPass: false,\n\t\tloading: false,\n\t}\n\tchangePass = async () => {\n\t\tthis.setState({ loading: true })\n\t\tawait changePassword(this.state.current, this.state.password)\n\t\t\t.catch(err => {\n\t\t\t\ttoast.error(\"Something went wrong\")\n\t\t\t})\n\t\tthis.setState({ changePass: true, loading: false })\n\t}\n\trender() {\n\t\tlet inputerror = this.state.passwordConfirm.length > 0 && this.state.password !== this.state.passwordConfirm\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header>Change password</Header>\n\t\t\t\t\t{this.state.changedPass ? <p>Password updated!</p>\n\t\t\t\t\t\t: <Form onSubmit={this.changePass}>\n\t\t\t\t\t\t\t<Form.Input label=\"Email\" name=\"email\" value={this.props.user.email} disabled />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Current password\" label=\"Current password\" name=\"current\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"New password\" label=\"New password\" name=\"password\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Confirm password\" label=\"Confirm password\" name=\"passwordConfirm\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t{inputerror && <Message negative>Passwords do not match</Message>}\n\t\t\t\t\t\t\t<Form.Button primary type=\"submit\" disabled={!this.state.current || !this.state.passwordConfirm || inputerror}>Change password</Form.Button>\n\t\t\t\t\t\t</Form>}\n\t\t\t\t</Segment>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n})\n\nexport default connect(mapStateToProps)(Account)","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport BuyCredits from './BuyCredits';\nimport Dashboard from './Dashboard/index';\nimport Logout from './Logout';\nimport App from './render/App';\nimport Testing from './Testing';\nimport ThemeEdit from './Themes/_id';\nimport { getUser } from './api';\nimport Admin from './Admin'\nimport Account from './Account'\n\nconst NotFound = ({ redirect = \"/\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nconst AdminPath = props => <div>{props.children}</div>\n\nclass AuthedRouter extends React.Component {\n    componentWillMount() {\n        getUser()\n    }\n    render() {\n        return (\n                <Router>\n                    <Dashboard path=\"/\" />\n                    <BuyCredits path=\"/buy-credits\" />\n                    <App path=\"/video/*\" />\n                    <ThemeEdit path=\"/themes/:themeId\" />\n                    <Logout path=\"/logout\" />\n                    <Account path=\"/account\" />\n                    <Testing path=\"/__testing_ground\" />\n                    <AdminPath path=\"/admin\">\n                        <Admin path=\"/\" />\n                    </AdminPath>\n                    <NotFound default />\n                </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(AuthedRouter)","import React from 'react';\nimport { Grid, Header, Segment, Form, Message } from 'semantic-ui-react'\nimport { authorize } from './api'\nimport { Link, redirectTo } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            loading: false,\n        }\n\n        this.login = this.login.bind(this)\n    }\n    login() {\n        this.setState({ error: null, loading: true })\n        authorize(this.state.email, this.state.password)\n            .catch(err => {\n                this.setState({ loading: false })\n                if (typeof err === \"string\") {\n                    this.setState({ error: err })\n                } else {\n                    console.error(err)\n                }\n            })\n            .then(d => {\n                redirectTo('/dashboard')\n            })\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Log in</Header>\n                    <Form onSubmit={this.login}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                disabled={this.state.loading}\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                disabled={this.state.loading}\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                disabled={this.state.loading}\n                                color=\"teal\">\n                                Log in\n                            </Form.Button>\n                            <div><Link to=\"/register\">Register</Link></div>\n                        </Segment>\n                    </Form>\n                    <Message size=\"small\">Forgot password?</Message>\n                    {this.state.error && <Message error>{this.state.error}</Message>}\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Grid, Header, Segment, Form, Message,Comment } from 'semantic-ui-react'\nimport { register } from './api'\nimport { Link } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n        }\n\n        this.register = this.register.bind(this)\n    }\n    register() {\n        register(this.state.email, this.state.password)\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Register</Header>\n                    <Form onSubmit={this.register}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                color=\"teal\">\n                                Register\n                            </Form.Button>\n                            <Comment><Link to=\"/login\">Log in</Link></Comment>\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport Login from './Login';\nimport Register from './Register';\n\nconst NotFoundLogin = ({ redirect = \"/login\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nclass BogRouter extends React.Component {\n    render() {\n        return (\n            <Router>\n                <Register path=\"/register\" />\n                <Login path=\"/login\" />\n                <NotFoundLogin default />\n            </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(BogRouter)","import React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport AuthedRouter from './AuthedRouter';\nimport DefaultRouter from './DefaultRouter';\n\nclass App extends React.Component {\n    render() {\n        return (\n            this.props.loggedIn ? <AuthedRouter /> : <DefaultRouter />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\nimport './index.css';\nimport store from './redux/store';\nimport * as serviceWorker from './render/serviceWorker';\n\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t\t<ToastContainer position=\"bottom-right\" />\n\t</Provider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}