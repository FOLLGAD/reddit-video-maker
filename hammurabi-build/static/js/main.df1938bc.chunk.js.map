{"version":3,"sources":["redux/actions.js","redux/store.js","api.js","Credits.js","FrontNav.js","BuyCredits/index.js","FileInput.js","Songs/index.js","Themes/index.js","Videos.js","Preview.js","Dashboard/index.js","Logout.js","render/Settings.js","render/ChooseThread.js","render/Final.js","render/estimate.js","render/TimeEstimator.js","render/Navbar.js","render/sanitize.js","render/PickComments/Comment.js","render/PickComments/SortableComments.js","render/PickComments/index.js","render/Question.js","render/EditorComponent.js","render/SelfText.js","render/App.js","Testing.js","Themes/_id.js","Admin/UserList.js","Admin/index.js","Account.js","AuthedRouter.js","Login.js","Register.js","DefaultRouter.js","App.js","render/serviceWorker.js","index.js"],"names":["setQuestion","content","type","val","setComments","defaultState","comments","question","processed","song","theme","credits","themes","videos","songs","user","users","loggedIn","localStorage","getItem","process","createStore","state","action","_objectSpread","Object","assign","title","selftext_html","includeSelftext","setItem","removeItem","jsonFetch","RequestInfo","RequestInit","method","headers","Content-Type","credentials","fetch","then","res","ok","json","status","store","dispatch","err","error","toast","console","adminGetUsers","data","setUsers","adminCreateUser","email","password","body","JSON","stringify","adminChangePass","id","adminGiveCredits","quantity","getUser","setUser","changePassword","current","newPassword","passwordCurrent","passwordNew","getCredits","setCreditsAction","checkPrice","buyCredits","getSongs","setSongsAction","uploadSong","formData","r","deleteSong","getThread","thread","sort","mapping","comment","newcomment","Array","isArray","replies","map","enabled","getThemes","setThemesAction","getTheme","themeId","createTheme","editTheme","uploadThemeFiles","deleteTheme","deleteThemeFile","intro","transition","outro","longPollVideo","fileId","postPreview","options","postRender","_store$getState","getState","Accept","questionData","commentData","_postRender","getVideos","setVideosAction","authorize","Headers","authorization","pass","btoa","register","logout","connect","React","Component","[object Object]","args","super","this","handleChange","e","name","value","setState","componentDidMount","render","react_default","a","createElement","Segment","textAlign","secondary","Header","size","Subheader","Content","props","Loader","active","Menu","Item","header","as","Link","to","position","Dropdown","item","text","isAdmin","custom","currentPrice","stripe","timeout","perCredit","onPurchase","async","session","redirectToCheckout","sessionId","log","changeQuantity","_","clearTimeout","setTimeout","total","window","Stripe","Container","src_FrontNav","src_Credits","Grid","Column","Message","Form","Radio","label","checked","onChange","Input","min","Button","onClick","FileInput","buttonOnly","button","icon","style","fileInput","click","accept","ref","display","Icon","placeholder","file","labelPosition","readOnly","target","files","FormData","append","_id","handleFileChange","List","relaxed","verticalAlign","className","key","floated","origname","Divider","src_FileInput","navigate","selection","Popup","trigger","on","fluid","onSubmit","isNaN","limit","slice","video","disabled","finished","href","date","datePad","jsdate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","formatDate","rendering","preview","info","open","url","songOptions","themeOptions","unshift","Select","required","clearable","Dashboard","stackable","width","horizontal","Videos","Themes","src_Songs","src_Preview","Logout","componentWillMount","replace","Fragment","setTheme","setSong","handleTheme","handleSong","resetVideoState","input","loading","fetchThread","catch","preventDefault","indexOf","pattern","match","onlythread","handle","render_Settings","autoFocus","primary","negative","Final","done","send","outroLen","transitionLen","getFull","commentTimes","reduce","b","length","estimateCommentHtml","noTags","trim","splits","str","split","filter","d","words","estimate","estimateComment","time","commentArr","recAdd","push","body_html","Math","round","calculateCommentList","timeInSeconds","mins","floor","hours","readableTime","c","PureComponent","justifyContent","Step","Group","render_TimeEstimator","children","foulSpanArray","findWithRegex","regex","contentBlock","callback","getText","matchArr","start","exec","index","decorators","strategy","forEach","reg","RegExp","component","Comment","constructor","p","propagateHtmlChange","html","stateToHTML","editor","getCurrentContent","onBlur","onStateChange","propagateEnableChange","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","convertFromHTML","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","stopPropagation","componentWillUnmount","_this$props","onKeyDown","color","marginRight","author","score","all_awardings","award","count","icon_url","src","alt","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","Comment_Comment","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","innerRef","items","draggableId","draggableProps","dragHandleProps","draggable","setCurrent","setProcessed","bind","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","num","parseInt","addEventListener","removeEventListener","topComment","scrollTo","filt","recFilter","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","i","toMinSec","seconds","fullMins","restSecs","calculateTotalTime","fullHtml","onCurrentCommentChange","s","onReorder","end","list","startIndex","endIndex","_result$splice","splice","removed","slicedToArray","flexDirection","render_PickComments_SortableComments","flexGrow","paddingLeft","render_PickComments_Comment","padding","max","marginTop","setTitle","EditorComponent","createEmpty","selftext","setSelftext","setIncludeSelftext","onChangeSelftext","onChangeInclude","Checkbox","render_EditorComponent","alignItems","paddingTop","marginLeft","basic","router_es","render_Navbar","path","ChooseThread","render_Question","SelfText","render_PickComments","render_Final","default","noThrow","Testing","message","sendRender","parse","TextArea","voices","find","th","voice","voiceSpeed","previewSong","delete","submit","_this$state","removeFile","inline","grouped","Field","addingUser","editingUser","selectedUser","creditsToGive","createUser","closeAddModal","openAddModal","changeUserPass","closeEditModal","giveCredits","openEditModal","Label","Description","videoCount","Modal","onClose","Actions","step","Admin_UserList","passwordConfirm","changedPass","changePass","inputerror","NotFound","redirect","AdminPath","src_Dashboard","src_BuyCredits","render_App","Logout_Logout","src_Account","src_Testing","Admin","App","login","redirectTo","height","maxWidth","views_Comment_Comment","NotFoundLogin","Register","Login","src_AuthedRouter","DefaultRouter","Boolean","location","hostname","ReactDOM","react_stripe_elements_es","apiKey","es","src_App","react_toastify","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.df1938bc.chunk.js","sourcesContent":["export const resetVideoState = content => ({\n\ttype: 'RESET_VIDEOSTATE',\n\tval: content,\n})\nexport const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setUser = content => ({\n\ttype: 'SET_USER',\n\tval: content,\n})\nexport const setUsers = content => ({\n\ttype: 'SET_USERS',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setTheme = content => ({\n\ttype: 'SET_THEME',\n\tval: content,\n})\nexport const setSong = content => ({\n\ttype: 'SET_SONG',\n\tval: content,\n})\nexport const setCredits = content => ({\n\ttype: 'SET_CREDITS',\n\tval: content,\n})\nexport const setThemes = content => ({\n\ttype: 'SET_THEMES',\n\tval: content,\n})\nexport const setSongs = content => ({\n\ttype: 'SET_SONGS',\n\tval: content,\n})\nexport const setVideos = content => ({\n\ttype: 'SET_VIDEOS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSelftext = content => ({\n\ttype: 'SET_SELFTEXT',\n\tval: content,\n})\nexport const setIncludeSelftext = content => ({\n\ttype: 'SET_INCLUDE_SELFTEXT',\n\tval: content,\n})\nexport const login = () => ({\n\ttype: 'LOGIN',\n})\nexport const logout = () => ({\n\ttype: 'LOGOUT',\n})","import { createStore } from 'redux'\n\nconst defaultState = {\n\t// Video rendering\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tsong: null,\n\ttheme: null,\n\n\t// Dashboard\n\tcredits: null,\n\tthemes: [],\n\tvideos: [],\n\tsongs: [],\n\n\tuser: {},\n\n\n\t// Admin\n\tusers: [],\n\n\tloggedIn: localStorage.getItem('loggedIn') === 'true',\n}\n\nfunction state(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'RESET_VIDEOSTATE':\n\t\t\treturn { ...state, question: null, processed: null, comments: [], theme: null, song: null }\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_USER':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tuser: action.val,\n\t\t\t})\n\t\tcase 'SET_USERS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tusers: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE': {\n\t\t\tlet question = Object.assign({}, state.question, { title: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { selftext_html: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_INCLUDE_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { includeSelftext: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_THEME':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\ttheme: action.val,\n\t\t\t})\n\t\tcase 'SET_SONG':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsong: action.val,\n\t\t\t})\n\t\tcase 'SET_CREDITS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcredits: action.val,\n\t\t\t})\n\t\tcase 'SET_THEMES':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tthemes: action.val,\n\t\t\t})\n\t\tcase 'SET_SONGS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsongs: action.val,\n\t\t\t})\n\t\tcase 'SET_VIDEOS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tvideos: action.val,\n\t\t\t})\n\t\tcase 'LOGIN':\n\t\t\tlocalStorage.setItem('loggedIn', 'true')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: true,\n\t\t\t})\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('loggedIn')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: false,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default process.env.NODE_ENV === \"development\" ?\n\tcreateStore(state, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()) :\n\tcreateStore(state)","import {\n\tlogin as loginAction,\n\tlogout as logoutAction,\n\tsetCredits as setCreditsAction,\n\tsetSongs as setSongsAction,\n\tsetThemes as setThemesAction,\n\tsetVideos as setVideosAction,\n\tsetQuestion,\n\tsetComments,\n\tsetUser,\n\tsetUsers\n} from './redux/actions'\nimport store from './redux/store'\nimport { toast } from 'react-toastify'\n\nlet apiurl = process.env.NODE_ENV === \"development\" ?\n\t'http://localhost:4001/api' :\n\t'/api'\n\n// The jsonFetch function is a wrapper around the native fetch().\n// It returns the response in json, and removes the \"loggedIn\" item\n// from localStorage if the response status code is 401.\n// Returns a promise that throws if the status code is not in the 200-399 range\nconst jsonFetch = (RequestInfo, RequestInit = {}) => {\n\tif (typeof RequestInfo === 'string') {\n\t\tRequestInfo = apiurl + RequestInfo\n\t}\n\tif (RequestInit.method && RequestInit.method !== \"GET\") {\n\t\tif (!RequestInit.headers) {\n\t\t\tRequestInit.headers = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t}\n\t\t}\n\t}\n\n\tRequestInit.credentials = 'include'\n\n\treturn fetch(RequestInfo, RequestInit)\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json()\n\t\t\t} else if (res.status === 401) {\n\t\t\t\tstore.dispatch(logoutAction())\n\t\t\t}\n\t\t\treturn res.json()\n\t\t\t\t.then(err => {\n\t\t\t\t\tif (err && err.error) {\n\t\t\t\t\t\ttoast.error(err.error)\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error(\"Something went wrong, try again later\")\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tthrow err.error // Parse as json, then throw.\n\t\t\t\t})\n\t\t})\n}\n\n// ADMIN ROUTES\n\nexport let adminGetUsers = function () {\n\treturn jsonFetch('/admin/users')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUsers(data))\n\t\t})\n}\n\nexport let adminCreateUser = function (email, password) {\n\treturn jsonFetch('/admin/users', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ email, password })\n\t})\n}\n\nexport let adminChangePass = function (id, password) {\n\treturn jsonFetch(`/admin/users/${id}/change-password`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ password })\n\t})\n}\n\nexport let adminGiveCredits = function (id, quantity) {\n\treturn jsonFetch(`/admin/users/${id}/add-credits`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ quantity })\n\t})\n}\n\n// NORMAL ROUTES\n\nexport let getUser = function () {\n\treturn jsonFetch('/me')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUser(data))\n\t\t})\n}\n\nexport let changePassword = function (current, newPassword) {\n\treturn jsonFetch('/me/change-password', {\n\t\tmethod: 'POST',\n\t\tbody: {\n\t\t\tpasswordCurrent: current,\n\t\t\tpasswordNew: newPassword,\n\t\t}\n\t})\n}\n\nexport let getCredits = function () {\n\treturn jsonFetch('/credits')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setCreditsAction(data.credits))\n\t\t\treturn data\n\t\t})\n}\n\n// Returns { total: Number }\nexport let checkPrice = function (quantity) {\n\treturn jsonFetch('/credits/check-price', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\n// Use stripe to buy credits\n// Returns { session: String }\nexport let buyCredits = function (quantity) {\n\treturn jsonFetch('/credits/buy', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\nexport let getSongs = function () {\n\treturn jsonFetch('/songs')\n\t\t.then(songs => {\n\t\t\tstore.dispatch(setSongsAction(songs))\n\t\t\treturn songs\n\t\t})\n}\n\nexport let uploadSong = function (formData) {\n\treturn jsonFetch('/songs', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n\t\t.then(r => {\n\t\t\tgetSongs()\n\t\t\treturn r\n\t\t})\n}\n\nexport let deleteSong = function (id) {\n\treturn jsonFetch('/songs/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let getThread = function (thread, sort) {\n\treturn jsonFetch(`/thread/${thread}?sort=${sort}`)\n\t\t.then(json => {\n\t\t\tlet mapping = comment => {\n\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tdata: newcomment\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet comments = json[1].map(mapping)\n\n\t\t\tstore.dispatch(setQuestion(json[0]))\n\t\t\tstore.dispatch(setComments(comments))\n\n\t\t\treturn json\n\t\t})\n}\n\nexport let getThemes = function () {\n\treturn jsonFetch('/themes')\n\t\t.then(themes => {\n\t\t\tstore.dispatch(setThemesAction(themes))\n\t\t\treturn themes\n\t\t})\n}\n\nexport let getTheme = function (themeId) {\n\treturn jsonFetch('/themes/' + themeId)\n}\n\nexport let createTheme = function (data) {\n\treturn jsonFetch('/themes', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let editTheme = function (id, data) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let uploadThemeFiles = function (id, formData) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n}\n\nexport let deleteTheme = function (id) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let deleteThemeFile = function (id, body = { intro: false, transition: false, outro: false }) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'DELETE',\n\t\tbody: JSON.stringify(body),\n\t})\n}\n\nexport let longPollVideo = function (fileId) {\n\treturn jsonFetch('/long-poll-video/' + fileId)\n}\n\nexport let postPreview = function (theme, song) {\n\treturn jsonFetch('/preview', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t}\n\t\t}),\n\t})\n}\n\nexport let postRender = function () {\n\tlet { question, processed, theme, song } = store.getState()\n\n\tif (!question.includeSelftext) {\n\t\tdelete question.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData: question,\n\t\t\tcommentData: processed,\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t},\n\t\t})\n\t})\n}\n\nexport let _postRender = function (state) {\n\tlet { questionData, commentData, options } = state\n\n\tif (!questionData.includeSelftext) {\n\t\tdelete questionData.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData,\n\t\t\tcommentData,\n\t\t\toptions,\n\t\t})\n\t})\n}\n\nexport const getVideos = function () {\n\treturn jsonFetch('/videos')\n\t\t.then(r => {\n\t\t\tstore.dispatch(setVideosAction(r))\n\t\t\treturn r\n\t\t})\n}\n\nexport const openVideoLink = function (videoId) {\n\treturn window.open('/videos/' + videoId, '_blank')\n}\n\n// btoa: Binary to Ascii (Base64 only contains ascii characters)\n\n// Basic toBase64(username:password)\nconst toBasicAuth = (user, pass) => `Basic ${btoa(user + ':' + pass)}`\n\nexport let authorize = function (email, password) {\n\treturn jsonFetch('/auth', {\n\t\theaders: new Headers({\n\t\t\tauthorization: toBasicAuth(email, password),\n\t\t}),\n\t\tmethod: 'POST',\n\t}).then(r => {\n\t\tstore.dispatch(loginAction())\n\t\treturn r\n\t})\n}\n\nexport let register = function (email, password) {\n\treturn jsonFetch('/register', {\n\t\tbody: JSON.stringify({ email, password }),\n\t\tmethod: 'POST',\n\t})\n}\n\nexport let logout = function () {\n\treturn jsonFetch('/logout').then(r => {\n\t\tstore.dispatch(logoutAction())\n\t})\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Header, Segment, Loader } from 'semantic-ui-react'\nimport { getCredits } from './api'\n\nclass Credits extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getCredits()\n    }\n    render() {\n        return (\n            <Segment textAlign=\"center\" secondary>\n                <Header size=\"huge\">\n                    <Header.Subheader>Credits</Header.Subheader>\n                    <Header.Content>\n                        {this.props.credits != null ?\n                            this.props.credits :\n                            <Loader active />}\n                    </Header.Content>\n                </Header>\n            </Segment>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(Credits);","import React from 'react'\nimport { Link } from '@reach/router'\nimport { connect } from 'react-redux'\nimport { Menu, Dropdown } from 'semantic-ui-react'\n\nclass FrontNav extends React.Component {\n    render() {\n        return (\n            <Menu>\n                <Menu.Item header>Reddit Video Maker</Menu.Item>\n                <Menu.Item as={Link} to=\"/\">Dashboard</Menu.Item>\n                <Menu.Menu position=\"right\">\n                    <Dropdown item text=\"Account\">\n                        <Dropdown.Menu>\n                            <Dropdown.Item as={Link} to=\"/account\">My Account</Dropdown.Item>\n                            {this.props.user.isAdmin && <Dropdown.Item as={Link} to=\"/admin\">Admin</Dropdown.Item>}\n                            <Dropdown.Item as={Link} to=\"/logout\">Log out</Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n                </Menu.Menu>\n            </Menu>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(FrontNav);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { buyCredits, checkPrice } from '../api'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\n\nclass BuyCredits extends React.Component {\n    state = {\n        credits: 10,\n        custom: false,\n        currentPrice: null,\n        stripe: null,\n\n        timeout: null,\n        perCredit: null,\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        // getCredits()\n        this.setState({ stripe: window.Stripe('pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK') })\n        this.changeQuantity(null, { value: this.state.credits })\n    }\n    onPurchase = async () => {\n        let { session } = await buyCredits(this.state.credits)\n        this.state.stripe.redirectToCheckout({\n            sessionId: session.id,\n        }).then(res => {\n            console.log(res)\n        })\n    }\n    changeQuantity = (_, { value }) => {\n        this.setState({ credits: value })\n\n        if (this.state.timeout !== null) {\n            clearTimeout(this.state.timeout)\n        }\n        let timeout = setTimeout(async () => {\n            let { total } = await checkPrice(value)\n            this.setState({ currentPrice: total, perCredit: total / value, timeout: null })\n        }, 200)\n        this.setState({ timeout })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Credits />\n                <Grid>\n                    <Grid.Column>\n                        <Segment>\n                            <Header>Buy credits</Header>\n                            <Message>This is a message to show how much one credit is worth</Message>\n                            <Form>\n                                <Form.Radio name=\"credits\" label=\"10 Credits\" value={10} checked={this.state.credits === 10} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"25 Credits\" value={25} checked={this.state.credits === 25} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"50 Credits\" value={50} checked={this.state.credits === 50} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"100 Credits\" value={100} checked={this.state.credits === 100} onChange={this.changeQuantity} />\n                                <Form.Input name=\"credits\" label=\"Custom amount\" value={this.state.credits} onChange={this.changeQuantity} type=\"number\" min={1} />\n                                <Header>\n                                    <Header.Content>\n                                        {this.state.currentPrice}\n                                    </Header.Content>\n                                    <Header.Subheader>\n                                        {this.state.perCredit}/Credit\n                                    </Header.Subheader>\n                                </Header>\n                                <Form.Button onClick={this.onPurchase} size=\"large\">Buy</Form.Button>\n                            </Form>\n                        </Segment>\n                    </Grid.Column>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(BuyCredits);","import React from 'react'\nimport { Button, Icon, Input } from 'semantic-ui-react'\n\nclass FileInput extends React.Component {\n    render() {\n        let buttonOnly = this.props.buttonOnly\n\n        let button =\n            <Button\n                icon={!this.props.label}\n                style={{ position: 'relative' }}\n                onClick={() => this.fileInput.click()}>\n                <input\n                    name={this.props.name}\n                    type=\"file\"\n                    accept={this.props.accept || null}\n                    ref={r => this.fileInput = r}\n                    style={{ display: 'none' }}\n                    onChange={this.props.onChange} />\n                <Icon name={this.props.icon || \"file\"}\n                    size={this.props.size} />\n                {this.props.label && this.props.label}\n            </Button>\n        return (\n            buttonOnly ? button :\n                <Input\n                    {...this.props}\n                    placeholder={this.props.placeholder || \"No file\"}\n                    value={this.props.file ? this.props.file.name : ''}\n                    label={button}\n                    labelPosition=\"left\"\n                    readOnly={true}\n                    size={this.props.size}\n                    onClick={() => this.fileInput.click()} />\n        )\n    }\n}\n\nexport default FileInput;","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Icon, List, Loader } from 'semantic-ui-react'\nimport { deleteSong, getSongs, uploadSong } from '../api'\nimport FileInput from '../FileInput'\nimport './index.css'\n\nclass ThemesList extends React.Component {\n    uploadSong = async (e) => {\n        let file = e.target.files[0]\n        let formData = new FormData()\n        formData.append('song', file)\n        await uploadSong(formData)\n    }\n    deleteSong = async song => {\n        await deleteSong(song._id)\n        getSongs()\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = (e, { name }) => this.setState({ [name]: e.target.files[0] })\n    componentDidMount() {\n        getSongs()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List relaxed verticalAlign=\"middle\">\n                    {this.props.songs ? this.props.songs.map(song =>\n                        <List.Item className=\"song-item\" key={song._id}>\n                            <List.Content className=\"song-icon\" floated=\"right\" as=\"a\" onClick={() => this.deleteSong(song)} title=\"Delete song\">\n                                <Icon name=\"delete\" />\n                            </List.Content>\n                            <List.Content>\n                                <List.Header>\n                                    {song.file.origname}\n                                </List.Header>\n                            </List.Content>\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n\n                <FileInput icon=\"music\" accept=\"audio/*\" buttonOnly name=\"song\" label=\"Upload song\" onChange={this.uploadSong} />\n                {/* <Popup trigger={<Button>Upload song</Button>}\n                    on=\"click\"\n                    position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.uploadSong}>\n                            <Header>Upload song</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\" />\n                            <Form.Button type=\"submit\">Upload</Form.Button>\n                            <Message size=\"tiny\" color=\"yellow\">\n                                Songs that are too short will be repeated\n                            </Message>\n                        </Form>\n                    </Container>\n                </Popup> */}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        songs: store.songs,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Divider, Form, Header, List, Loader, Popup } from 'semantic-ui-react'\nimport { createTheme, getThemes } from '../api'\n\nclass ThemesList extends React.Component {\n    createTheme = async () => {\n        const { theme } = await createTheme({ name: this.state.name })\n        navigate(`/themes/${theme}`)\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getThemes()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.themes ? this.props.themes.map(theme =>\n                        <List.Item key={theme._id} onClick={() => navigate(\"/themes/\" + theme._id)}>\n                            {/* <Link to={\"/themes/\" + theme._id}> */}\n                            <List.Content>\n                                <List.Header>{theme.name}</List.Header>\n                            </List.Content>\n                            {/* </Link> */}\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n                <Popup trigger={<Button>New theme</Button>} on=\"click\" position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.createTheme}>\n                            <Header>Create new theme</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\"></Form.Input>\n                            <Form.Button type=\"submit\">Create</Form.Button>\n                        </Form>\n                    </Container>\n                </Popup>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, List, Loader } from 'semantic-ui-react'\nimport { getVideos } from './api'\n\nfunction formatDate(date) {\n    let datePad = date => (\"0\" + date).slice(-2)\n    let jsdate = new Date(date)\n    return `${jsdate.getFullYear()}-${datePad(jsdate.getMonth())}-${datePad(jsdate.getDate())} ${datePad(jsdate.getHours())}:${datePad(jsdate.getMinutes())}`\n}\n\nclass VideosList extends React.Component {\n    componentDidMount() {\n        getVideos()\n    }\n    getVideos = () => {\n        return isNaN(this.props.limit) ? this.props.videos : this.props.videos.slice(0, this.props.limit)\n    }\n    render() {\n        return (\n            <Container>\n                <List selection>\n                    {this.props.videos ? this.getVideos().map(video => {\n                        return (\n                            <List.Item disabled={!video.finished} key={video._id} as=\"a\" href={\"/api/videos/\" + video.file}>\n                                <List.Content>\n                                    <List.Header>{video.name || \"Unnamed video\"}</List.Header>\n                                    {video.finished ? formatDate(video.finished) : \"Rendering...\"}\n                                </List.Content>\n                            </List.Item>\n                        )\n                    }) : <List.Item><Loader active /></List.Item>}\n                </List>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        videos: store.videos,\n    }\n}\n\nexport default connect(mapStateToProps)(VideosList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Form, Header } from 'semantic-ui-react'\nimport { longPollVideo, postPreview } from './api'\nimport { toast } from 'react-toastify'\n\nclass Preview extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    state = {\n        song: null,\n        theme: null,\n        rendering: false,\n    }\n    preview = () => {\n        this.setState({ rendering: true })\n\n        postPreview(this.state.theme, this.state.song)\n            .then(res => {\n                return longPollVideo(res.file)\n            })\n            .then(res => {\n                toast.info('Preview is ready', {\n                    onClick: () => window.open(res.url, '_blank'),\n                })\n            })\n    }\n    render() {\n        let songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n        let themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n        songOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n        return (\n            <Form>\n                <Header>Preview</Header>\n                <p>You can render a preview of a theme and song. It will take about 20 seconds to render, and will not cost any credits. It will show up in your videos. </p>\n                <Form.Select\n                    label=\"Theme\"\n                    required\n                    disabled={this.state.rendering}\n                    placeholder=\"Select a theme\"\n                    value={this.props.theme}\n                    name=\"theme\"\n                    options={themeOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Select\n                    label=\"Song\"\n                    clearable\n                    disabled={this.state.rendering}\n                    placeholder=\"No song\"\n                    value={this.props.song}\n                    name=\"song\"\n                    options={songOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Button disabled={this.state.rendering} onClick={this.preview}>Preview</Form.Button>\n            </Form>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    songs: state.songs,\n    themes: state.themes,\n})\n\nexport default connect(mapStateToProps)(Preview);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Songs from '../Songs'\nimport Themes from '../Themes/index'\nimport Videos from '../Videos'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport Preview from '../Preview'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Videos</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Videos limit={8} />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/video\">Make video</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Themes</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Themes />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Songs</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Songs />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Preview</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Preview />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react'\nimport { logout } from './api'\nimport { navigate } from '@reach/router'\n\nexport default class Logout extends React.Component {\n    componentWillMount() {\n        this.logout();\n    }\n    logout() {\n        logout()\n            .then(r => {\n                navigate('/login', { replace: true })\n            })\n    }\n    render() {\n        return <></>\n    }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form } from 'semantic-ui-react';\nimport { setSong, setTheme } from '../redux/actions';\n\nclass Settings extends Component {\n\thandleTheme = (e, { value }) => {\n\t\tthis.props.setTheme(value)\n\t}\n\thandleSong = (e, { value }) => {\n\t\tthis.props.setSong(value)\n\t}\n\trender() {\n\t\tlet themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n\t\tlet songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n\t\tsongOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n\n\t\treturn (\n\t\t\t<Form onSubmit={this.props.onSubmit}>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Theme\"\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\tvalue={this.props.theme}\n\t\t\t\t\tname=\"theme\"\n\t\t\t\t\toptions={themeOptions}\n\t\t\t\t\tonChange={this.handleTheme}\n\t\t\t\t/>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Song\"\n\t\t\t\t\tclearable\n\t\t\t\t\tplaceholder=\"No song\"\n\t\t\t\t\tvalue={this.props.song}\n\t\t\t\t\tname=\"song\"\n\t\t\t\t\toptions={songOptions}\n\t\t\t\t\tonChange={this.handleSong}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n\tsong: state.song,\n\tthemes: state.themes,\n\tsongs: state.songs,\n}), { setTheme, setSong })(Settings);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Divider, Form, Icon, Message, Segment } from 'semantic-ui-react'\nimport { getThread } from '../api'\nimport { setComments, setQuestion, resetVideoState } from '../redux/actions'\nimport Settings from './Settings'\n\nclass Thread extends React.Component {\n\tstate = {\n\t\tinput: '',\n\t\tsort: 'top',\n\t\tloading: null,\n\t\terror: null,\n\t}\n\tcomponentWillMount() {\n\t\tthis.props.resetVideoState()\n\t}\n\tfetchThread = (thread, sort) => {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread, sort)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t\tnavigate('/video/post')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({ error: err, loading: false })\n\t\t\t})\n\t}\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread, this.state.sort)\n\t}\n\thandle = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\tlet sortOptions = [\n\t\t\t{ text: 'Top', value: 'top' },\n\t\t\t{ text: 'Best', value: 'best' },\n\t\t\t{ text: 'New', value: 'new' },\n\t\t]\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Settings />\n\t\t\t\t<Divider />\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Form.Input label=\"Thread\" required value={this.state.input} onChange={this.handle} name=\"input\" placeholder=\"Type a reddit thread ID or paste its URL\" autoFocus />\n\t\t\t\t\t<Form.Select label=\"Sort by\" required value={this.state.sort} onChange={this.handle} name=\"sort\" options={sortOptions} />\n\t\t\t\t\t<Form.Button primary loading={this.state.loading} disabled={!this.props.theme || !this.state.input}>OK<Icon name=\"angle right\" /></Form.Button>\n\t\t\t\t\t{this.state.error && <Message negative>{this.state.error}</Message>}\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tresetVideoState,\n})(Thread);","import React, { Component } from 'react';\nimport { Button, Divider, Segment } from 'semantic-ui-react';\nimport { postRender } from '../api';\nimport Settings from './Settings';\n\nclass Final extends Component {\n    state = { loading: false, done: false }\n    send = async () => {\n        this.setState({ loading: true, done: false })\n        await postRender()\n        this.setState({ loading: false, done: true })\n    }\n    render() {\n\n        return (\n            <Segment>\n                {this.state.done ?\n                    <p>The video is now rendering.</p> :\n                    <>\n                        <p>Change settings if needed and then send to render video.</p>\n                        <Settings />\n                        <Divider />\n                        <Button primary size=\"large\" loading={this.state.loading} onClick={this.send}>Render</Button>\n                    </>\n                }\n            </Segment>\n        )\n    }\n}\n\nexport default Final","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn (splits * 0.38152203637725923 + words * 0.2767486833003453) * 0.98\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}\n\nexport function calculateCommentList(commentArr) {\n\tlet total = []\n\tlet recAdd = comment => {\n\t\ttotal.push(estimateCommentHtml(comment.data.body_html).estimate)\n\n\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\tcomment.data.replies\n\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t.map(recAdd)\n\t\t}\n\t}\n\tcommentArr\n\t\t.filter(d => d.enabled)\n\t\t.map(recAdd)\n\n\treturn Math.round(1e2 * getFull(total)) / 1e2\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Header } from 'semantic-ui-react';\nimport { calculateCommentList, estimateCommentHtml } from './estimate';\n\nfunction readableTime(timeInSeconds) {\n    let mins = Math.floor(timeInSeconds / 60)\n    let hours = Math.floor(mins / 60)\n    mins -= hours * 60\n\n    let seconds = Math.floor(timeInSeconds) - mins * 60 - hours * 60\n\n    let str = \"\"\n    if (hours > 0) {\n        str += hours + \" h, \"\n    }\n    if (mins > 0) {\n        str += mins + \" m, \"\n    }\n    str += seconds + \" s\"\n\n    return str\n}\n\nclass TimeEstimator extends Component {\n    render() {\n        let time = calculateCommentList(this.props.comments)\n\n        if (this.props.question.includeSelftext && this.props.question.selftext_html) {\n            let selftext = this.props.question.selftext_html\n            time += estimateCommentHtml(selftext).estimate\n        }\n\n        return (\n            <div>\n                <Header>\n                    <Header.Content>Estimated video length: {readableTime(time)}</Header.Content>\n                </Header>\n                Comments selected: {this.props.comments.filter(c => c.enabled).length}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    comments: state.comments,\n    question: state.question,\n}))(TimeEstimator);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Header, Step } from 'semantic-ui-react'\nimport TimeEstimator from './TimeEstimator'\nimport { connect } from 'react-redux'\n\nclass Navbar extends React.PureComponent {\n    render() {\n        return (\n            <div>\n                {this.props.question && \n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                            <Step.Group>\n                                <Step active={this.props[\"*\"] === \"post\"} as={Link} to=\"post\">Question title</Step>\n                                <Step active={this.props[\"*\"] === \"selftext\"} as={Link} to=\"selftext\">Body text</Step>\n                                <Step active={this.props[\"*\"] === \"comments\"} as={Link} to=\"comments\">Comments</Step>\n                                <Step active={this.props[\"*\"] === \"final\"} as={Link} to=\"final\">Finish</Step>\n                            </Step.Group>\n                        </div>\n                        <TimeEstimator />\n                        <Header as=\"h2\">{this.props.question.title}</Header>\n                    </div>\n                }\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    question: state.question,\n}))(Navbar)","// These will hide the middle of the three regex groups\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nimport './Comment.css'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange = () => {\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tonBlur = e => {\n\t\tthis.propagateHtmlChange()\n\t}\n\tonStateChange = editor => this.setState({ editor })\n\tpropagateEnableChange = () => {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.propagateHtmlChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score >= 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <span key={award.count + award.icon_url}><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</span>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.onStateChange}\n\t\t\t\t\t\tonBlur={this.onBlur}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport './SortableComments.css'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tonDragEnd = (result) => {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import { navigate } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setComments, setProcessed } from '../../redux/actions';\nimport { estimateCommentHtml, getFull } from '../estimate';\nimport Comment from './Comment';\nimport SortableComments from './SortableComments';\nimport { Segment, Container, Header, Button, Input, Icon } from 'semantic-ui-react';\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tonSubmit() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\n\t\tnavigate('/video/final')\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tif (this.props.comments.length === 0) {\n\t\t\treturn (<Container>\n\t\t\t\t<Header>No comments found for this thread</Header>\n\t\t\t</Container>)\n\t\t}\n\t\tlet comment = this.props.comments[this.state.current]\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center' }}>\n\t\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t\t<div style={{ flexGrow: 1, paddingLeft: 10 }}>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<div ref={ref => this.topComment = ref}>\n\t\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", padding: 10 }}>\n\t\t\t\t\t\t\t<Button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>\n\t\t\t\t\t\t\t\t<Icon name=\"arrow left\" />\n\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<Button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t<Icon name=\"arrow right\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 10 }}>\n\t\t\t\t\t\t\t<Button onClick={this.onSubmit} size=\"huge\" primary>Finish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tcomments: state.comments,\n}), {\n\tsetProcessed,\n\tsetComments\n})(PickComments);","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setTitle } from '../redux/actions';\n\nclass Question extends Component {\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tnavigate('selftext')\n\t}\n\tonChange = e => {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Header size=\"large\">Edit question</Header>\n\t\t\t\t\t<Form.Input value={this.props.title} onChange={this.onChange} />\n\t\t\t\t\t<Form.Button primary type=\"submit\">Continue</Form.Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle })(Question);","import React, { Component } from 'react'\nimport { foulSpanArray } from './sanitize'\n\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nfunction handleStrategy(contentBlock, callback) {\n    foulSpanArray.forEach(reg => {\n        findWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n    })\n}\nfunction editStrategy(contentBlock, callback) {\n    findWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n    return <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n    return <span className=\"highlight-warn\">{props.children}</span>\n}\n\nlet decorators = [\n    {\n        strategy: handleStrategy,\n        component: handleSpan,\n    },\n    {\n        strategy: editStrategy,\n        component: editSpan,\n    },\n]\n\nclass EditorComponent extends Component {\n    constructor(p) {\n        super(p)\n\n        this.inlineToolbarPlugin = createInlineToolbarPlugin()\n        this.linkPlugin = createLinkPlugin()\n        this.plugins = [\n            this.inlineToolbarPlugin,\n            this.linkPlugin,\n        ]\n\n        let d = convertFromHTML(p.data)\n        \n        this.state = {\n            editor: d.contentBlocks ? EditorState.createWithContent(\n                ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)\n            ) : EditorState.createEmpty(),\n        }\n    }\n    handlePress = e => {\n        e.stopPropagation()\n    }\n    onChange = val => {\n        this.setState({ editor: val })\n\n        let html = stateToHTML(this.state.editor.getCurrentContent())\n\n        if (this.props.data !== html) {\n            this.props.onChange(html)\n        }\n    }\n    render() {\n        return <div>\n            <Editor\n                editorState={this.state.editor}\n                onChange={this.onChange}\n                decorators={decorators}\n                plugins={this.plugins}\n            />\n            <this.inlineToolbarPlugin.InlineToolbar>\n                {extProps => <>\n                    <BoldButton {...extProps} />\n                    <ItalicButton {...extProps} />\n                    <UnderlineButton {...extProps} />\n                    <this.linkPlugin.LinkButton {...extProps} />\n                </>}\n            </this.inlineToolbarPlugin.InlineToolbar>\n        </div>\n    }\n}\n\nexport default EditorComponent","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setSelftext, setIncludeSelftext } from '../redux/actions';\nimport EditorComponent from './EditorComponent';\n\nclass Selftext extends Component {\n    onSubmit = e => {\n        e.preventDefault()\n\n        navigate('/video/comments')\n    }\n    onChangeSelftext = value => {\n        this.props.setSelftext(value)\n    }\n    onChangeInclude = (e, { checked }) => {\n        this.props.setIncludeSelftext(checked)\n    }\n    render() {\n        return (\n            <Segment>\n                <Form onSubmit={this.onSubmit}>\n                    <Header size=\"large\">Edit selftext</Header>\n                    <Form.Checkbox label=\"Include selftext?\" checked={this.props.includeSelftext} onChange={this.onChangeInclude} />\n                    <Segment style={{ display: this.props.includeSelftext ? 'block' : 'none' }}>\n                        <EditorComponent onChange={this.onChangeSelftext} data={this.props.selftext} />\n                    </Segment>\n                    <Form.Button primary type=\"submit\">Continue</Form.Button>\n                </Form>\n            </Segment>\n        )\n    }\n}\n\nexport default connect(state => ({\n    selftext: state.question.selftext_html || \"\",\n    includeSelftext: state.question.includeSelftext,\n}), { setSelftext, setIncludeSelftext })(Selftext);","import { Link, Redirect, Router } from '@reach/router'\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Header } from 'semantic-ui-react'\nimport { getSongs, getThemes } from '../api'\nimport SelectThread from './ChooseThread'\nimport Final from './Final'\nimport Navbar from './Navbar'\nimport PickComments from './PickComments/index'\nimport Question from './Question'\nimport SelfText from './SelfText'\n\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tgetThemes()\n\t\tgetSongs()\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t\t\t<Header style={{ paddingTop: 10 }} as=\"h1\">\n\t\t\t\t\t\t<Header.Content>Project BOG</Header.Content>\n\t\t\t\t\t\t<Header.Subheader>Create video</Header.Subheader>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Button style={{ marginLeft: 20 }} basic as={Link} to=\"/\">Go back</Button>\n\t\t\t\t</div>\n\t\t\t\t<Router>\n\t\t\t\t\t<Navbar path=\"/\">\n\t\t\t\t\t\t<SelectThread path=\"/\" />\n\t\t\t\t\t\t{/* Can't have fragments in Router element */}\n\t\t\t\t\t\t{this.props.question && <Question path=\"post\" />}\n\t\t\t\t\t\t{this.props.question && <SelfText path=\"selftext\" />}\n\t\t\t\t\t\t{this.props.question && <PickComments path=\"comments\" />}\n\t\t\t\t\t\t{this.props.question && <Final path=\"final\" />}\n\t\t\t\t\t\t<Redirect default from=\"*\" to=\"/video/\" noThrow />\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Router>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t}\n}\n\nexport default connect(mapStateToProps)(App)","import React from 'react';\nimport { Container, Form, Message, Segment } from 'semantic-ui-react';\nimport { _postRender } from './api';\n\nclass Testing extends React.Component {\n    state = { text: \"\", message: null }\n    onChange = (_, { name, value }) => this.setState({ [name]: value })\n    sendRender = () => {\n        let json = JSON.parse(this.state.text) // Parse the text as json\n        _postRender(json) // Send it to render\n            .then(() => {\n                this.setState({ message: \"Rendering...\" })\n            })\n    }\n    render() {\n        return (\n            <Container>\n                <Segment>\n                    <Form>\n                        <Form.TextArea value={this.state.text} name=\"text\" onChange={this.onChange} />\n                        <Form.Button onClick={this.sendRender}>Render</Form.Button>\n                        {this.state.message && <Message>{this.state.message}</Message>}\n                    </Form>\n                </Segment>\n            </Container>\n        )\n    }\n}\n\nexport default Testing","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Form, Header, Segment } from 'semantic-ui-react'\nimport { deleteTheme, deleteThemeFile, editTheme, getTheme, uploadThemeFiles } from '../api'\nimport FileInput from '../FileInput'\nimport FrontNav from '../FrontNav'\n\nlet voices = [\n    {\n        value: \"daniel\",\n        text: \"Daniel UK\"\n    },\n    {\n        value: \"google-us\",\n        text: \"Google US\"\n    },\n]\n\nclass Theme extends React.Component {\n    state = {\n        name: \"\",\n        voice: \"\",\n        voiceSpeed: 1,\n\n        // Files\n        intro: null,\n        transition: null,\n        outro: null,\n\n        loading: true,\n\n        previewSong: false,\n    }\n    componentDidMount() {\n        getTheme(this.props.themeId)\n            .then(theme => {\n                this.setState(theme)\n            })\n    }\n    delete = async () => {\n        await deleteTheme(this.props.themeId)\n        navigate('/', { replace: true })\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = e => {\n        e.preventDefault()\n        this.setState({ [e.target.name]: e.target.files[0] })\n    }\n    submit = () => {\n        this.setState({ loading: true })\n        editTheme(this.props.themeId, {\n            name: this.state.name,\n            voice: this.state.voice,\n            voiceSpeed: this.state.voiceSpeed,\n        }).then(async () => {\n            const { intro, transition, outro } = this.state\n\n            // If at least one file has been selected, upload it/them.\n            if (intro || transition || outro) {\n                const data = new FormData()\n\n                intro && data.append('intro', intro)\n                outro && data.append('outro', outro)\n                transition && data.append('transition', transition)\n\n                await uploadThemeFiles(this.props.themeId, data)\n\n                this.setState({ loading: false })\n            } else {\n                this.setState({ loading: false })\n            }\n        })\n    }\n    removeFile = type => {\n        deleteThemeFile(this.props.themeId, { [type]: true })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Form onSubmit={e => e.preventDefault()}>\n                    <Segment>\n                        <Header>Edit theme</Header>\n                        <p>Themes consist of an intro, a transition, an outro, and a voice. You can have several themes on one account. </p>\n                        <Divider />\n                        <Form.Group inline>\n                            <Form.Input\n                                name=\"name\"\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={this.state.name}\n                                onChange={this.handleChange}>\n                            </Form.Input>\n                            <Form.Select\n                                name=\"voice\"\n                                placeholder=\"Voice\"\n                                value={this.state.voice}\n                                options={voices}\n                                onChange={this.handleChange}>\n                            </Form.Select>\n\n                            {/* <Form.Input\n                                name=\"voiceSpeed\"\n                                type=\"number\"\n                                placeholder=\"Voice speed (default 1)\"\n                                step={0.01}\n                                min={0.2}\n                                max={5}\n                                value={this.state.voiceSpeed}\n                                onChange={this.handleChange}>\n                            </Form.Input> */}\n\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Intro</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"intro\"\n                                    buttonOnly\n                                    label={this.state.intro ? \"Change intro\" : \"No intro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.intro && this.state.intro.origname}</label>\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Transition</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"transition\"\n                                    buttonOnly\n                                    label={this.state.transition ? \"Change transition\" : \"No transition\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.transition && this.state.transition.origname}</label>\n                                {/* {this.state.transition.origname && <Button icon=\"trash\" secondary size=\"mini\" onClick={() => this.removeFile('transition')}></Button>} */}\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Outro</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"outro\"\n                                    buttonOnly\n                                    label={this.state.outro ? \"Change outro\" : \"No outro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.outro && this.state.outro.origname}</label>\n                            </Form.Field>\n                        </Form.Group>\n                        <Divider />\n                        <Form.Group inline>\n                            <Form.Button floated=\"right\" onClick={this.submit} type=\"submit\">Save</Form.Button>\n                            <Form.Button floated=\"right\" type=\"button\" color=\"red\" onClick={this.delete}>Delete</Form.Button>\n                        </Form.Group>\n                    </Segment>\n                </Form>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = (state, props) => ({\n    theme: state.themes.find(th => th._id === props.themeId),\n})\n\nexport default connect(mapStateToProps)(Theme);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Header, List, Loader, Modal, Form, Button, Label, Search } from 'semantic-ui-react'\nimport { adminGetUsers, adminCreateUser, adminChangePass, adminGiveCredits } from '../api'\n\nclass UserList extends React.Component {\n    state = {\n        addingUser: false,\n        editingUser: false,\n        selectedUser: null,\n        email: \"\",\n        password: \"\",\n        creditsToGive: 0,\n        loading: false,\n    }\n    componentDidMount() {\n        adminGetUsers()\n    }\n    createUser = async () => {\n        this.setState({ loading: true })\n        await adminCreateUser(this.state.email, this.state.password)\n        this.setState({ loading: false })\n        adminGetUsers()\n        this.closeAddModal()\n    }\n    openAddModal = () => this.setState({ addingUser: true, editingUser: false, loading: false, email: \"\", password: \"\" })\n    closeAddModal = () => this.setState({ addingUser: false })\n\n    changeUserPass = async () => {\n        this.setState({ loading: true })\n        await adminChangePass(this.state.selectedUser._id, this.state.password)\n        this.setState({ loading: false })\n        this.closeEditModal()\n    }\n    giveCredits = async () => {\n        this.setState({ loading: true })\n        await adminGiveCredits(this.state.selectedUser._id, this.state.creditsToGive)\n        this.setState({ loading: false, creditsToGive: 0 })\n        adminGetUsers()\n        this.closeEditModal()\n    }\n    openEditModal = (user) => this.setState({ addingUser: false, editingUser: true, loading: false, email: user.email, password: user.password, selectedUser: user })\n    closeEditModal = () => this.setState({ editingUser: false })\n\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.users ? this.props.users.map(user =>\n                        <List.Item key={user._id} onClick={() => this.openEditModal(user)}>\n                            <List.Content>\n                                <List.Header>{user.email} {user.isAdmin && <Label size=\"tiny\" color=\"red\">admin</Label>}</List.Header>\n                                <List.Description>{user.credits} credits</List.Description>\n                                <List.Description>{user.videoCount} videos made</List.Description>\n                            </List.Content>\n                        </List.Item>\n                    ) : <Loader active />}\n                </List>\n                <Divider />\n                <Button onClick={this.openAddModal}>Create user</Button>\n                {/* Adding Modal */}\n                <Modal open={this.state.addingUser} onClose={this.closeAddModal}>\n                    <Modal.Content>\n                        <Header>Add user</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input placeholder=\"Email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.createUser}>Create</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n                {/* Editing Modal */}\n                <Modal open={this.state.editingUser} onClose={this.closeEditModal}>\n                    <Modal.Content>\n                        <Header>Give credits</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form loading={this.state.loading}>\n                            <Header>Current credits: {this.state.selectedUser && this.state.selectedUser.credits}</Header>\n                            <Form.Input type=\"number\" name=\"creditsToGive\" step={1} value={this.state.creditsToGive} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.giveCredits} loading={this.state.loading}>Give credits</Form.Button>\n                    </Modal.Actions>\n                    <Divider />\n                    <Modal.Content>\n                        <Header>Change user password</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input disabled placeholder=\"Email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.changeUserPass} loading={this.state.loading}>Change password</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        users: store.users,\n    }\n}\n\nexport default connect(mapStateToProps)(UserList);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport UserList from './UserList'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Admin Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Users</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<UserList />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Container, Form, Segment, Header, Message } from 'semantic-ui-react';\nimport FrontNav from './FrontNav';\nimport { changePassword } from './api';\nimport { toast } from 'react-toastify';\n\nclass Account extends React.Component {\n\thandleChange = (e, { name, value }) => this.setState({ [name]: value })\n\tstate = {\n\t\tcurrent: \"\",\n\t\tpassword: \"\",\n\t\tpasswordConfirm: \"\",\n\t\tchangedPass: false,\n\t\tloading: false,\n\t}\n\tchangePass = async () => {\n\t\tthis.setState({ loading: true })\n\t\tawait changePassword(this.state.current, this.state.password)\n\t\t\t.catch(err => {\n\t\t\t\ttoast.error(\"Something went wrong\")\n\t\t\t})\n\t\tthis.setState({ changePass: true, loading: false })\n\t}\n\trender() {\n\t\tlet inputerror = this.state.passwordConfirm.length > 0 && this.state.password !== this.state.passwordConfirm\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header>Change password</Header>\n\t\t\t\t\t{this.state.changedPass ? <p>Password updated!</p>\n\t\t\t\t\t\t: <Form onSubmit={this.changePass}>\n\t\t\t\t\t\t\t<Form.Input label=\"Email\" name=\"email\" value={this.props.user.email} disabled />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Current password\" label=\"Current password\" name=\"current\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"New password\" label=\"New password\" name=\"password\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Confirm password\" label=\"Confirm password\" name=\"passwordConfirm\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t{inputerror && <Message negative>Passwords do not match</Message>}\n\t\t\t\t\t\t\t<Form.Button primary type=\"submit\" disabled={!this.state.current || !this.state.passwordConfirm || inputerror}>Change password</Form.Button>\n\t\t\t\t\t\t</Form>}\n\t\t\t\t</Segment>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n})\n\nexport default connect(mapStateToProps)(Account)","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport BuyCredits from './BuyCredits';\nimport Dashboard from './Dashboard/index';\nimport Logout from './Logout';\nimport App from './render/App';\nimport Testing from './Testing';\nimport ThemeEdit from './Themes/_id';\nimport { getUser } from './api';\nimport Admin from './Admin'\nimport Account from './Account'\n\nconst NotFound = ({ redirect = \"/\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nconst AdminPath = props => <div>{props.children}</div>\n\nclass AuthedRouter extends React.Component {\n    componentWillMount() {\n        getUser()\n    }\n    render() {\n        return (\n                <Router>\n                    <Dashboard path=\"/\" />\n                    <BuyCredits path=\"/buy-credits\" />\n                    <App path=\"/video/*\" />\n                    <ThemeEdit path=\"/themes/:themeId\" />\n                    <Logout path=\"/logout\" />\n                    <Account path=\"/account\" />\n                    <Testing path=\"/__testing_ground\" />\n                    <AdminPath path=\"/admin\">\n                        <Admin path=\"/\" />\n                    </AdminPath>\n                    <NotFound default />\n                </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(AuthedRouter)","import React from 'react';\nimport { Grid, Header, Segment, Form, Message } from 'semantic-ui-react'\nimport { authorize } from './api'\nimport { Link, redirectTo } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            loading: false,\n        }\n\n        this.login = this.login.bind(this)\n    }\n    login() {\n        this.setState({ error: null, loading: true })\n        authorize(this.state.email, this.state.password)\n            .catch(err => {\n                this.setState({ loading: false })\n                if (typeof err === \"string\") {\n                    this.setState({ error: err })\n                } else {\n                    console.error(err)\n                }\n            })\n            .then(d => {\n                redirectTo('/dashboard')\n            })\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Log in</Header>\n                    <Form onSubmit={this.login}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                disabled={this.state.loading}\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                disabled={this.state.loading}\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                disabled={this.state.loading}\n                                color=\"teal\">\n                                Log in\n                            </Form.Button>\n                            <div><Link to=\"/register\">Register</Link></div>\n                        </Segment>\n                    </Form>\n                    <Message size=\"small\">Forgot password?</Message>\n                    {this.state.error && <Message error>{this.state.error}</Message>}\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Grid, Header, Segment, Form, Message,Comment } from 'semantic-ui-react'\nimport { register } from './api'\nimport { Link } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n        }\n\n        this.register = this.register.bind(this)\n    }\n    register() {\n        register(this.state.email, this.state.password)\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Register</Header>\n                    <Form onSubmit={this.register}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                color=\"teal\">\n                                Register\n                            </Form.Button>\n                            <Comment><Link to=\"/login\">Log in</Link></Comment>\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport Login from './Login';\nimport Register from './Register';\n\nconst NotFoundLogin = ({ redirect = \"/login\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nclass BogRouter extends React.Component {\n    render() {\n        return (\n            <Router>\n                <Register path=\"/register\" />\n                <Login path=\"/login\" />\n                <NotFoundLogin default />\n            </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(BogRouter)","import React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport AuthedRouter from './AuthedRouter';\nimport DefaultRouter from './DefaultRouter';\n\nclass App extends React.Component {\n    render() {\n        return (\n            this.props.loggedIn ? <AuthedRouter /> : <DefaultRouter />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { StripeProvider } from 'react-stripe-elements';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\nimport './index.css';\nimport store from './redux/store';\nimport * as serviceWorker from './render/serviceWorker';\n\n\nReactDOM.render(\n\t<StripeProvider apiKey=\"pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK\">\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t\t<ToastContainer position=\"bottom-right\" />\n\t\t</Provider>\n\t</StripeProvider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}