{"version":3,"sources":["redux/actions.js","redux/store.js","api.js","Credits.js","FrontNav.js","BuyCredits/index.js","FileInput.js","Songs/index.js","Themes/index.js","Videos.js","Preview.js","Dashboard/index.js","Logout.js","render/Settings.js","render/ChooseThread.js","render/Final.js","render/estimate.js","render/TimeEstimator.js","render/Navbar.js","render/sanitize.js","render/PickComments/Comment.js","render/PickComments/SortableComments.js","render/PickComments/index.js","render/Question.js","render/EditorComponent.js","render/SelfText.js","render/App.js","Themes/_id.js","Admin/UserList.js","Admin/index.js","Account.js","Support.js","AuthedRouter.js","Login.js","Register.js","DefaultRouter.js","App.js","render/serviceWorker.js","index.js"],"names":["setQuestion","content","type","val","setComments","defaultState","comments","question","processed","song","theme","credits","themes","videos","songs","user","users","loggedIn","localStorage","getItem","process","createStore","state","action","_id","undefined","Object","assign","title","selftext_html","includeSelftext","setItem","removeItem","jsonFetch","RequestInfo","RequestInit","method","headers","Content-Type","credentials","fetch","then","res","ok","json","status","store","dispatch","err","error","toast","console","adminGetUsers","data","setUsers","adminCreateUser","body","JSON","stringify","adminSetMultiplier","id","multiplier","adminChangePass","password","adminGiveCredits","quantity","getUser","setUser","changePassword","current","newPassword","passwordCurrent","passwordNew","getCredits","setCreditsAction","checkPrice","buyCredits","getSongs","setSongsAction","uploadSong","formData","r","deleteSong","getThread","thread","sort","mapping","comment","newcomment","Array","isArray","replies","map","enabled","getThemes","setThemesAction","getTheme","themeId","createTheme","editTheme","uploadThemeFiles","deleteTheme","deleteThemeFile","intro","transition","outro","longPollVideo","fileId","postPreview","options","postRender","getState","Accept","questionData","commentData","getVideos","setVideosAction","authorize","email","Headers","authorization","pass","btoa","register","logout","connect","React","Component","[object Object]","args","super","this","handleChange","e","name","value","setState","componentDidMount","render","react_default","a","createElement","Segment","textAlign","secondary","Header","size","Subheader","Content","props","Loader","active","Menu","Item","header","as","Link","to","position","Dropdown","item","text","isAdmin","stripekey","custom","currentPrice","stripe","timeout","perCredit","onPurchase","async","session","redirectToCheckout","sessionId","log","changeQuantity","_","clearTimeout","setTimeout","total","window","Stripe","Container","src_FrontNav","src_Credits","Grid","Column","Message","Form","Radio","label","checked","onChange","Input","min","Math","round","Button","onClick","FileInput","buttonOnly","button","icon","style","fileInput","click","accept","ref","display","Icon","placeholder","file","labelPosition","readOnly","target","files","FormData","append","handleFileChange","List","relaxed","verticalAlign","className","key","floated","origname","Divider","src_FileInput","navigate","selection","length","Popup","trigger","on","fluid","onSubmit","isNaN","limit","slice","video","disabled","finished","failed","href","date","datePad","jsdate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","formatDate","rendering","preview","info","open","url","songOptions","themeOptions","unshift","Select","required","clearable","Dashboard","stackable","width","horizontal","Videos","Themes","src_Songs","src_Preview","Logout","componentWillMount","replace","Fragment","setTheme","setSong","handleTheme","handleSong","resetVideoState","input","loading","fetchThread","catch","preventDefault","indexOf","pattern","match","onlythread","handle","render_Settings","autoFocus","primary","negative","Final","done","send","outroLen","transitionLen","getFull","commentTimes","reduce","b","estimateCommentHtml","noTags","trim","splits","str","split","filter","d","words","estimate","estimateComment","time","commentArr","recAdd","push","body_html","calculateCommentList","timeInSeconds","mins","floor","hours","readableTime","c","PureComponent","justifyContent","Step","Group","render_TimeEstimator","children","foulSpanArray","findWithRegex","regex","contentBlock","callback","getText","matchArr","start","exec","index","decorators","strategy","forEach","reg","RegExp","component","Comment","constructor","p","propagateHtmlChange","html","stateToHTML","editor","getCurrentContent","onBlur","onStateChange","propagateEnableChange","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","convertFromHTML","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","stopPropagation","componentWillUnmount","onKeyDown","color","marginRight","author","score","all_awardings","award","count","icon_url","src","alt","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","Comment_Comment","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","innerRef","items","draggableId","draggableProps","dragHandleProps","draggable","setCurrent","setProcessed","bind","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","num","parseInt","addEventListener","removeEventListener","topComment","scrollTo","filt","recFilter","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","i","toMinSec","seconds","fullMins","restSecs","calculateTotalTime","fullHtml","onCurrentCommentChange","s","onReorder","end","list","startIndex","endIndex","removed","splice","flexDirection","render_PickComments_SortableComments","flexGrow","paddingLeft","render_PickComments_Comment","padding","max","marginTop","setTitle","EditorComponent","createEmpty","selftext","setSelftext","setIncludeSelftext","onChangeSelftext","onChangeInclude","Checkbox","render_EditorComponent","beforeUnload","alignItems","paddingTop","marginLeft","basic","router_es","render_Navbar","path","ChooseThread","render_Question","SelfText","render_PickComments","render_Final","default","noThrow","voices","find","th","form","previewSong","delete","handleCheckboxChange","submit","removeFile","voice","step","volume","callToAction","grouped","Field","inline","addingUser","editingUser","selectedUser","username","creditsToGive","createUser","closeAddModal","openAddModal","setMultiplier","closeEditModal","changeUserPass","giveCredits","openEditModal","Label","Description","videoCount","Modal","onClose","Actions","Admin_UserList","passwordConfirm","changedPass","changePass","inputerror","NotFound","redirect","AdminPath","src_Dashboard","Support","src_BuyCredits","render_App","Logout_Logout","src_Account","Admin","App","login","redirectTo","height","maxWidth","views_Comment_Comment","NotFoundLogin","Register","Login","src_AuthedRouter","DefaultRouter","Boolean","location","hostname","ReactDOM","es","src_App","react_toastify","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c2c5099d.chunk.js","sourcesContent":["export const resetVideoState = content => ({\n\ttype: 'RESET_VIDEOSTATE',\n\tval: content,\n})\nexport const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setUser = content => ({\n\ttype: 'SET_USER',\n\tval: content,\n})\nexport const setUsers = content => ({\n\ttype: 'SET_USERS',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setTheme = content => ({\n\ttype: 'SET_THEME',\n\tval: content,\n})\nexport const setSong = content => ({\n\ttype: 'SET_SONG',\n\tval: content,\n})\nexport const setCredits = content => ({\n\ttype: 'SET_CREDITS',\n\tval: content,\n})\nexport const setThemes = content => ({\n\ttype: 'SET_THEMES',\n\tval: content,\n})\nexport const setSongs = content => ({\n\ttype: 'SET_SONGS',\n\tval: content,\n})\nexport const setVideos = content => ({\n\ttype: 'SET_VIDEOS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSelftext = content => ({\n\ttype: 'SET_SELFTEXT',\n\tval: content,\n})\nexport const setIncludeSelftext = content => ({\n\ttype: 'SET_INCLUDE_SELFTEXT',\n\tval: content,\n})\nexport const login = () => ({\n\ttype: 'LOGIN',\n})\nexport const logout = () => ({\n\ttype: 'LOGOUT',\n})","import { createStore } from 'redux'\n\nconst defaultState = {\n\t// Video rendering\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tsong: null,\n\ttheme: null,\n\n\t// Dashboard\n\tcredits: null,\n\tthemes: [],\n\tvideos: [],\n\tsongs: [],\n\n\tuser: {},\n\n\n\t// If Admin\n\tusers: [],\n\n\tloggedIn: localStorage.getItem('loggedIn') === 'true',\n}\n\nfunction state(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'RESET_VIDEOSTATE':\n\t\t\treturn { ...state, question: null, processed: null, comments: [], theme: state.themes[0] ? state.themes[0]._id : undefined, song: null }\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_USER':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tuser: action.val,\n\t\t\t})\n\t\tcase 'SET_USERS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tusers: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE': {\n\t\t\tlet question = Object.assign({}, state.question, { title: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { selftext_html: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_INCLUDE_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { includeSelftext: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_THEME':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\ttheme: action.val,\n\t\t\t})\n\t\tcase 'SET_SONG':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsong: action.val,\n\t\t\t})\n\t\tcase 'SET_CREDITS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcredits: action.val,\n\t\t\t})\n\t\tcase 'SET_THEMES':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tthemes: action.val,\n\t\t\t})\n\t\tcase 'SET_SONGS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsongs: action.val,\n\t\t\t})\n\t\tcase 'SET_VIDEOS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tvideos: action.val,\n\t\t\t})\n\t\tcase 'LOGIN':\n\t\t\tlocalStorage.setItem('loggedIn', 'true')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: true,\n\t\t\t})\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('loggedIn')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: false,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default process.env.NODE_ENV === \"development\" ?\n\tcreateStore(state, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()) :\n\tcreateStore(state)","import {\n\tlogin as loginAction,\n\tlogout as logoutAction,\n\tsetCredits as setCreditsAction,\n\tsetSongs as setSongsAction,\n\tsetThemes as setThemesAction,\n\tsetVideos as setVideosAction,\n\tsetQuestion,\n\tsetComments,\n\tsetUser,\n\tsetUsers\n} from './redux/actions'\nimport store from './redux/store'\nimport { toast } from 'react-toastify'\n\nlet apiurl = process.env.NODE_ENV === \"development\" ?\n\t'http://localhost:4001/api' :\n\t'/api'\n\n// The jsonFetch function is a wrapper around the native fetch().\n// It returns the response in json, and removes the \"loggedIn\" item\n// from localStorage if the response status code is 401.\n// Returns a promise that throws if the status code is not in the 200-399 range\nconst jsonFetch = (RequestInfo, RequestInit = {}) => {\n\tif (typeof RequestInfo === 'string') {\n\t\tRequestInfo = apiurl + RequestInfo\n\t}\n\tif (RequestInit.method && RequestInit.method !== \"GET\") {\n\t\tif (!RequestInit.headers) {\n\t\t\tRequestInit.headers = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t}\n\t\t}\n\t}\n\n\tRequestInit.credentials = 'include'\n\n\treturn fetch(RequestInfo, RequestInit)\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json()\n\t\t\t} else if (res.status === 401) {\n\t\t\t\tstore.dispatch(logoutAction())\n\t\t\t}\n\t\t\treturn res.json()\n\t\t\t\t.then(err => {\n\t\t\t\t\tif (err && err.error) {\n\t\t\t\t\t\ttoast.error(err.error)\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error(\"Something went wrong, try again later\")\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tthrow err.error // Parse as json, then throw.\n\t\t\t\t})\n\t\t})\n}\n\n// ADMIN ROUTES\n\nexport let adminGetUsers = function () {\n\treturn jsonFetch('/admin/users')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUsers(data))\n\t\t})\n}\n\nexport let adminCreateUser = function (user) {\n\treturn jsonFetch('/admin/users', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(user)\n\t})\n}\n\nexport let adminSetMultiplier = function (id, multiplier) {\n\treturn jsonFetch(`/admin/users/${id}/set-multiplier`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ multiplier })\n\t})\n}\n\nexport let adminChangePass = function (id, password) {\n\treturn jsonFetch(`/admin/users/${id}/change-password`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ password })\n\t})\n}\n\nexport let adminGiveCredits = function (id, quantity) {\n\treturn jsonFetch(`/admin/users/${id}/add-credits`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ quantity })\n\t})\n}\n\n// NORMAL ROUTES\n\nexport let getUser = function () {\n\treturn jsonFetch('/me')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUser(data))\n\t\t})\n}\n\nexport let changePassword = function (current, newPassword) {\n\treturn jsonFetch('/me/change-password', {\n\t\tmethod: 'POST',\n\t\tbody: {\n\t\t\tpasswordCurrent: current,\n\t\t\tpasswordNew: newPassword,\n\t\t}\n\t})\n}\n\nexport let getCredits = function () {\n\treturn jsonFetch('/credits')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setCreditsAction(data.credits))\n\t\t\treturn data\n\t\t})\n}\n\n// Returns { total: Number }\nexport let checkPrice = function (quantity) {\n\treturn jsonFetch('/credits/check-price', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\n// Use stripe to buy credits\n// Returns { session: String }\nexport let buyCredits = function (quantity) {\n\treturn jsonFetch('/credits/buy', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\nexport let getSongs = function () {\n\treturn jsonFetch('/songs')\n\t\t.then(songs => {\n\t\t\tstore.dispatch(setSongsAction(songs))\n\t\t\treturn songs\n\t\t})\n}\n\nexport let uploadSong = function (formData) {\n\treturn jsonFetch('/songs', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n\t\t.then(r => {\n\t\t\tgetSongs()\n\t\t\treturn r\n\t\t})\n}\n\nexport let deleteSong = function (id) {\n\treturn jsonFetch('/songs/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let getThread = function (thread, sort) {\n\treturn jsonFetch(`/thread/${thread}?sort=${sort}`)\n\t\t.then(json => {\n\t\t\tlet mapping = comment => {\n\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tdata: newcomment\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet comments = json[1].map(mapping)\n\n\t\t\tstore.dispatch(setQuestion(json[0]))\n\t\t\tstore.dispatch(setComments(comments))\n\n\t\t\treturn json\n\t\t})\n}\n\nexport let getThemes = function () {\n\treturn jsonFetch('/themes')\n\t\t.then(themes => {\n\t\t\tstore.dispatch(setThemesAction(themes))\n\t\t\treturn themes\n\t\t})\n}\n\nexport let getTheme = function (themeId) {\n\treturn jsonFetch('/themes/' + themeId)\n}\n\nexport let createTheme = function (data) {\n\treturn jsonFetch('/themes', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let editTheme = function (id, data) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let uploadThemeFiles = function (id, formData) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n}\n\nexport let deleteTheme = function (id) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let deleteThemeFile = function (id, body = { intro: false, transition: false, outro: false }) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'DELETE',\n\t\tbody: JSON.stringify(body),\n\t})\n}\n\nexport let longPollVideo = function (fileId) {\n\treturn jsonFetch('/long-poll-video/' + fileId)\n}\n\nexport let postPreview = function (theme, song) {\n\treturn jsonFetch('/preview', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t}\n\t\t}),\n\t})\n}\n\nexport let postRender = function () {\n\tlet { question, processed, theme, song } = store.getState()\n\n\tif (!question.includeSelftext) {\n\t\tdelete question.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData: question,\n\t\t\tcommentData: processed,\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t},\n\t\t})\n\t})\n}\n\nexport let _postRender = function (state) {\n\tlet { questionData, commentData, options } = state\n\n\tif (!questionData.includeSelftext) {\n\t\tdelete questionData.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData,\n\t\t\tcommentData,\n\t\t\toptions,\n\t\t})\n\t})\n}\n\nexport const getVideos = function () {\n\treturn jsonFetch('/videos')\n\t\t.then(r => {\n\t\t\tstore.dispatch(setVideosAction(r))\n\t\t\treturn r\n\t\t})\n}\n\nexport const openVideoLink = function (videoId) {\n\treturn window.open('/videos/' + videoId, '_blank')\n}\n\n// btoa: Binary to Ascii (Base64 only contains ascii characters)\n\n// Basic toBase64(username:password)\nconst toBasicAuth = (user, pass) => `Basic ${btoa(user + ':' + pass)}`\n\nexport let authorize = function (email, password) {\n\treturn jsonFetch('/auth', {\n\t\theaders: new Headers({\n\t\t\tauthorization: toBasicAuth(email, password),\n\t\t}),\n\t\tmethod: 'POST',\n\t}).then(r => {\n\t\tstore.dispatch(loginAction())\n\t\treturn r\n\t})\n}\n\nexport let register = function (email, password) {\n\treturn jsonFetch('/register', {\n\t\tbody: JSON.stringify({ email, password }),\n\t\tmethod: 'POST',\n\t})\n}\n\nexport let logout = function () {\n\treturn jsonFetch('/logout').then(r => {\n\t\tstore.dispatch(logoutAction())\n\t})\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Header, Segment, Loader } from 'semantic-ui-react'\nimport { getCredits } from './api'\n\nclass Credits extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getCredits()\n    }\n    render() {\n        return (\n            <Segment textAlign=\"center\" secondary>\n                <Header size=\"huge\">\n                    <Header.Subheader>Your Credits</Header.Subheader>\n                    <Header.Content>\n                        {this.props.credits != null ?\n                            this.props.credits :\n                            <Loader active />}\n                    </Header.Content>\n                </Header>\n            </Segment>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(Credits);","import React from 'react'\nimport { Link } from '@reach/router'\nimport { connect } from 'react-redux'\nimport { Menu, Dropdown } from 'semantic-ui-react'\n\nclass FrontNav extends React.Component {\n    render() {\n        return (\n            <Menu>\n                <Menu.Item header>Reddit Video Maker</Menu.Item>\n                <Menu.Item as={Link} to=\"/\">Dashboard</Menu.Item>\n                <Menu.Item as={Link} to=\"/support\">Contact us</Menu.Item>\n                <Menu.Menu position=\"right\">\n                    <Dropdown item text=\"Account\">\n                        <Dropdown.Menu>\n                            <Dropdown.Item as={Link} to=\"/account\">My Account</Dropdown.Item>\n                            {this.props.user.isAdmin && <Dropdown.Item as={Link} to=\"/admin\">Admin</Dropdown.Item>}\n                            <Dropdown.Item as={Link} to=\"/logout\">Log out</Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n                </Menu.Menu>\n            </Menu>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(FrontNav);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { buyCredits, checkPrice } from '../api'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\n\nlet stripekey = process.env.NODE_ENV === \"production\" ? \"pk_live_Dh8aRBNWH73HfNvlOVb4cOJE00eX9d9CAv\" : \"pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK\"\n\nclass BuyCredits extends React.Component {\n    state = {\n        credits: 10,\n        custom: false,\n        currentPrice: null,\n        stripe: null,\n\n        timeout: null,\n        perCredit: null,\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        // getCredits()\n        this.setState({ stripe: window.Stripe(stripekey) })\n        this.changeQuantity(null, { value: this.state.credits })\n    }\n    onPurchase = async () => {\n        let { session } = await buyCredits(this.state.credits)\n        this.state.stripe.redirectToCheckout({\n            sessionId: session.id,\n        }).then(res => {\n            console.log(res)\n        })\n    }\n    changeQuantity = (_, { value }) => {\n        this.setState({ credits: value })\n\n        if (this.state.timeout !== null) {\n            clearTimeout(this.state.timeout)\n        }\n        let timeout = setTimeout(async () => {\n            let { total } = await checkPrice(value)\n            this.setState({ currentPrice: total, perCredit: total / value, timeout: null })\n        }, 200)\n        this.setState({ timeout })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Credits />\n                <Grid>\n                    <Grid.Column>\n                        <Segment>\n                            <Header>Buy credits</Header>\n                            <Message>Credits are a one-time purchase. We do not save your payment information after your purchase.</Message>\n                            <p>One credit can be used to create one video.</p>\n                            <Form>\n                                <Form.Radio name=\"credits\" label=\"10 Credits\" value={10} checked={this.state.credits === 10} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"25 Credits\" value={25} checked={this.state.credits === 25} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"50 Credits\" value={50} checked={this.state.credits === 50} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"100 Credits\" value={100} checked={this.state.credits === 100} onChange={this.changeQuantity} />\n                                <Form.Input name=\"credits\" label=\"Custom amount\" value={this.state.credits} onChange={this.changeQuantity} type=\"number\" min={1} />\n                                <Header>\n                                    <Header.Content>\n                                        {this.state.currentPrice}\n                                    </Header.Content>\n                                    <Header.Subheader>\n                                        {Math.round(this.state.perCredit * 100) / 100}/Credit\n                                    </Header.Subheader>\n                                </Header>\n                                <Form.Button onClick={this.onPurchase} size=\"large\">Buy</Form.Button>\n                            </Form>\n                        </Segment>\n                    </Grid.Column>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(BuyCredits);","import React from 'react'\nimport { Button, Icon, Input } from 'semantic-ui-react'\n\nclass FileInput extends React.Component {\n    render() {\n        let buttonOnly = this.props.buttonOnly\n\n        let button =\n            <Button\n                icon={!this.props.label}\n                style={{ position: 'relative' }}\n                onClick={() => this.fileInput.click()}>\n                <input\n                    name={this.props.name}\n                    type=\"file\"\n                    accept={this.props.accept || null}\n                    ref={r => this.fileInput = r}\n                    style={{ display: 'none' }}\n                    onChange={this.props.onChange} />\n                <Icon name={this.props.icon || \"file\"}\n                    size={this.props.size} />\n                {this.props.label && this.props.label}\n            </Button>\n        return (\n            buttonOnly ? button :\n                <Input\n                    {...this.props}\n                    placeholder={this.props.placeholder || \"No file\"}\n                    value={this.props.file ? this.props.file.name : ''}\n                    label={button}\n                    labelPosition=\"left\"\n                    readOnly={true}\n                    size={this.props.size}\n                    onClick={() => this.fileInput.click()} />\n        )\n    }\n}\n\nexport default FileInput;","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Icon, List, Loader } from 'semantic-ui-react'\nimport { deleteSong, getSongs, uploadSong } from '../api'\nimport FileInput from '../FileInput'\nimport './index.css'\n\nclass ThemesList extends React.Component {\n    uploadSong = async (e) => {\n        let file = e.target.files[0]\n        let formData = new FormData()\n        formData.append('song', file)\n        await uploadSong(formData)\n    }\n    deleteSong = async song => {\n        await deleteSong(song._id)\n        getSongs()\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = (e, { name }) => this.setState({ [name]: e.target.files[0] })\n    componentDidMount() {\n        getSongs()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List relaxed verticalAlign=\"middle\">\n                    {this.props.songs ? this.props.songs.map(song =>\n                        <List.Item className=\"song-item\" key={song._id}>\n                            <List.Content className=\"song-icon\" floated=\"right\" as=\"a\" onClick={() => this.deleteSong(song)} title=\"Delete song\">\n                                <Icon name=\"delete\" />\n                            </List.Content>\n                            <List.Content>\n                                <List.Header>\n                                    {song.file.origname}\n                                </List.Header>\n                            </List.Content>\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n\n                <FileInput icon=\"music\" accept=\"audio/*\" buttonOnly name=\"song\" label=\"Upload song\" onChange={this.uploadSong} />\n                {/* <Popup trigger={<Button>Upload song</Button>}\n                    on=\"click\"\n                    position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.uploadSong}>\n                            <Header>Upload song</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\" />\n                            <Form.Button type=\"submit\">Upload</Form.Button>\n                            <Message size=\"tiny\" color=\"yellow\">\n                                Songs that are too short will be repeated\n                            </Message>\n                        </Form>\n                    </Container>\n                </Popup> */}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        songs: store.songs,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Divider, Form, Header, List, Loader, Popup } from 'semantic-ui-react'\nimport { createTheme, getThemes } from '../api'\n\nclass ThemesList extends React.Component {\n    createTheme = async () => {\n        const { theme } = await createTheme({ name: this.state.name })\n        navigate(`/themes/${theme}`)\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getThemes()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.themes ? this.props.themes.length > 0 ? this.props.themes.map(theme =>\n                        <List.Item key={theme._id} onClick={() => navigate(\"/themes/\" + theme._id)}>\n                            {/* <Link to={\"/themes/\" + theme._id}> */}\n                            <List.Content>\n                                <List.Header>{theme.name}</List.Header>\n                            </List.Content>\n                            {/* </Link> */}\n                        </List.Item>\n                    ): \n                    <p>You need to create a theme to get started. Click \"New theme\" below</p> :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n                <Popup trigger={<Button>New theme</Button>} on=\"click\" position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.createTheme}>\n                            <Header>Create new theme</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\"></Form.Input>\n                            <Form.Button type=\"submit\">Create</Form.Button>\n                        </Form>\n                    </Container>\n                </Popup>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, List, Loader } from 'semantic-ui-react'\nimport { getVideos } from './api'\n\nfunction formatDate(date) {\n    let datePad = date => (\"0\" + date).slice(-2)\n    let jsdate = new Date(date)\n    return `${jsdate.getFullYear()}-${datePad(jsdate.getMonth() + 1)}-${datePad(jsdate.getDate())} ${datePad(jsdate.getHours())}:${datePad(jsdate.getMinutes())}`\n}\n\nclass VideosList extends React.Component {\n    componentDidMount() {\n        getVideos()\n    }\n    getVideos = () => {\n        return isNaN(this.props.limit) ? this.props.videos : this.props.videos.slice(0, this.props.limit)\n    }\n    render() {\n        return (\n            <Container>\n                <List selection>\n                    {this.props.videos ? this.getVideos().map(video => {\n                        return (\n                            <List.Item disabled={!video.finished || video.failed} key={video._id} as=\"a\" href={\"/api/videos/\" + video.file}>\n                                <List.Content>\n                                    <List.Header>{video.name || \"Unnamed video\"}</List.Header>\n                                    {video.failed ? \"Failed rendering\" : (video.finished ? formatDate(video.finished) : \"Rendering...\")}\n                                </List.Content>\n                            </List.Item>\n                        )\n                    }) : <List.Item><Loader active /></List.Item>}\n                </List>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        videos: store.videos,\n    }\n}\n\nexport default connect(mapStateToProps)(VideosList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Form, Header } from 'semantic-ui-react'\nimport { longPollVideo, postPreview, getVideos } from './api'\nimport { toast } from 'react-toastify'\n\nclass Preview extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    state = {\n        song: null,\n        theme: null,\n        rendering: false,\n    }\n    preview = () => {\n        this.setState({ rendering: true })\n\n        postPreview(this.state.theme, this.state.song)\n            .then(res => {\n                getVideos()\n                return longPollVideo(res.file)\n            })\n            .then(res => {\n                toast.info('Preview is ready', {\n                    onClick: () => window.open(res.url, '_blank'),\n                })\n            })\n    }\n    render() {\n        let songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n        let themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n        songOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n        return (\n            <Form>\n                <Header>Preview</Header>\n                <p>You can render a preview of a theme and song. It will take about 20 seconds to render, and will not cost any credits. It will show up in your videos. </p>\n                <Form.Select\n                    label=\"Theme\"\n                    required\n                    disabled={this.state.rendering}\n                    placeholder=\"Select a theme\"\n                    value={this.props.theme}\n                    name=\"theme\"\n                    options={themeOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Select\n                    label=\"Song\"\n                    clearable\n                    disabled={this.state.rendering}\n                    placeholder=\"No song\"\n                    value={this.props.song}\n                    name=\"song\"\n                    options={songOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Button disabled={this.state.rendering || !this.state.theme} onClick={this.preview}>Preview</Form.Button>\n            </Form>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    songs: state.songs,\n    themes: state.themes,\n})\n\nexport default connect(mapStateToProps)(Preview);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Songs from '../Songs'\nimport Themes from '../Themes/index'\nimport Videos from '../Videos'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport Preview from '../Preview'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Get more credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Videos</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Videos limit={20} />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/video\">Make video</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Themes</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Themes />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Songs</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Songs />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Preview</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Preview />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard\n","import React from 'react'\nimport { logout } from './api'\nimport { navigate } from '@reach/router'\n\nexport default class Logout extends React.Component {\n    componentWillMount() {\n        this.logout();\n    }\n    logout() {\n        logout()\n            .then(r => {\n                navigate('/login', { replace: true })\n            })\n    }\n    render() {\n        return <></>\n    }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form } from 'semantic-ui-react';\nimport { setSong, setTheme } from '../redux/actions';\n\nclass Settings extends Component {\n\thandleTheme = (e, { value }) => {\n\t\tthis.props.setTheme(value)\n\t}\n\thandleSong = (e, { value }) => {\n\t\tthis.props.setSong(value)\n\t}\n\trender() {\n\t\tlet themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n\t\tlet songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n\t\tsongOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n\n\t\treturn (\n\t\t\t<Form onSubmit={this.props.onSubmit}>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Theme\"\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\tvalue={this.props.theme}\n\t\t\t\t\tname=\"theme\"\n\t\t\t\t\toptions={themeOptions}\n\t\t\t\t\tonChange={this.handleTheme}\n\t\t\t\t/>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Song\"\n\t\t\t\t\tclearable\n\t\t\t\t\tplaceholder=\"No song\"\n\t\t\t\t\tvalue={this.props.song}\n\t\t\t\t\tname=\"song\"\n\t\t\t\t\toptions={songOptions}\n\t\t\t\t\tonChange={this.handleSong}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n\tsong: state.song,\n\tthemes: state.themes,\n\tsongs: state.songs,\n}), { setTheme, setSong })(Settings);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Divider, Form, Icon, Message, Segment } from 'semantic-ui-react'\nimport { getThread } from '../api'\nimport { setComments, setQuestion, resetVideoState } from '../redux/actions'\nimport Settings from './Settings'\n\nclass Thread extends React.Component {\n\tstate = {\n\t\tinput: '',\n\t\tsort: 'top',\n\t\tloading: null,\n\t\terror: null,\n\t}\n\tcomponentWillMount() {\n\t\tthis.props.resetVideoState()\n\t}\n\tfetchThread = (thread, sort) => {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread, sort)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t\tnavigate('/video/post')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({ error: err, loading: false })\n\t\t\t})\n\t}\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread, this.state.sort)\n\t}\n\thandle = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\tlet sortOptions = [\n\t\t\t{ text: 'Top', value: 'top' },\n\t\t\t{ text: 'Best', value: 'best' },\n\t\t\t{ text: 'New', value: 'new' },\n\t\t]\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Settings />\n\t\t\t\t<Divider />\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Form.Input label=\"Thread\" required value={this.state.input} onChange={this.handle} name=\"input\" placeholder=\"Type a reddit thread ID or paste its URL\" autoFocus />\n\t\t\t\t\t<Form.Select label=\"Sort by\" required value={this.state.sort} onChange={this.handle} name=\"sort\" options={sortOptions} />\n\t\t\t\t\t<Form.Button primary loading={this.state.loading} disabled={!this.props.theme || !this.state.input}>OK<Icon name=\"angle right\" /></Form.Button>\n\t\t\t\t\t{this.state.error && <Message negative>{this.state.error}</Message>}\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tresetVideoState,\n})(Thread);","import React, { Component } from 'react';\nimport { Button, Divider, Segment } from 'semantic-ui-react';\nimport { postRender } from '../api';\nimport Settings from './Settings';\n\nclass Final extends Component {\n    state = { loading: false, done: false }\n    send = async () => {\n        this.setState({ loading: true, done: false })\n        await postRender()\n        this.setState({ loading: false, done: true })\n    }\n    render() {\n\n        return (\n            <Segment>\n                {this.state.done ?\n                    <p>The video is now rendering.</p> :\n                    <>\n                        <p>Change settings if needed and then send to render video.</p>\n                        <Settings />\n                        <Divider />\n                        <Button primary size=\"large\" loading={this.state.loading} onClick={this.send}>Render</Button>\n                    </>\n                }\n            </Segment>\n        )\n    }\n}\n\nexport default Final","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn (splits * 0.38152203637725923 + words * 0.2767486833003453) * 0.98\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}\n\nexport function calculateCommentList(commentArr) {\n\tlet total = []\n\tlet recAdd = comment => {\n\t\ttotal.push(estimateCommentHtml(comment.data.body_html).estimate)\n\n\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\tcomment.data.replies\n\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t.map(recAdd)\n\t\t}\n\t}\n\tcommentArr\n\t\t.filter(d => d.enabled)\n\t\t.map(recAdd)\n\n\treturn Math.round(1e2 * getFull(total)) / 1e2\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Header } from 'semantic-ui-react';\nimport { calculateCommentList, estimateCommentHtml } from './estimate';\n\nfunction readableTime(timeInSeconds) {\n    let mins = Math.floor(timeInSeconds / 60)\n    let hours = Math.floor(mins / 60)\n    mins -= hours * 60\n\n    let seconds = Math.floor(timeInSeconds) - mins * 60 - hours * 60\n\n    let str = \"\"\n    if (hours > 0) {\n        str += hours + \" h, \"\n    }\n    if (mins > 0) {\n        str += mins + \" m, \"\n    }\n    str += seconds + \" s\"\n\n    return str\n}\n\nclass TimeEstimator extends Component {\n    render() {\n        let time = calculateCommentList(this.props.comments)\n\n        if (this.props.question.includeSelftext && this.props.question.selftext_html) {\n            let selftext = this.props.question.selftext_html\n            time += estimateCommentHtml(selftext).estimate\n        }\n\n        return (\n            <div>\n                <Header>\n                    <Header.Content>Estimated video length: {readableTime(time)}</Header.Content>\n                </Header>\n                Comments selected: {this.props.comments.filter(c => c.enabled).length}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    comments: state.comments,\n    question: state.question,\n}))(TimeEstimator);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Header, Step } from 'semantic-ui-react'\nimport TimeEstimator from './TimeEstimator'\nimport { connect } from 'react-redux'\n\nclass Navbar extends React.PureComponent {\n    render() {\n        return (\n            <div>\n                {this.props.question && \n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                            <Step.Group>\n                                <Step active={this.props[\"*\"] === \"post\"} as={Link} to=\"post\">Question title</Step>\n                                <Step active={this.props[\"*\"] === \"selftext\"} as={Link} to=\"selftext\">Body text</Step>\n                                <Step active={this.props[\"*\"] === \"comments\"} as={Link} to=\"comments\">Comments</Step>\n                                <Step active={this.props[\"*\"] === \"final\"} as={Link} to=\"final\">Finish</Step>\n                            </Step.Group>\n                        </div>\n                        <TimeEstimator />\n                        <Header as=\"h2\">{this.props.question.title}</Header>\n                    </div>\n                }\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    question: state.question,\n}))(Navbar)","// These will hide the middle of the three regex groups\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nimport './Comment.css'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange = () => {\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tonBlur = e => {\n\t\tthis.propagateHtmlChange()\n\t}\n\tonStateChange = editor => this.setState({ editor })\n\tpropagateEnableChange = () => {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.propagateHtmlChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score >= 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <span key={award.count + award.icon_url}><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</span>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.onStateChange}\n\t\t\t\t\t\tonBlur={this.onBlur}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport './SortableComments.css'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tonDragEnd = (result) => {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import { navigate } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setComments, setProcessed } from '../../redux/actions';\nimport { estimateCommentHtml, getFull } from '../estimate';\nimport Comment from './Comment';\nimport SortableComments from './SortableComments';\nimport { Segment, Container, Header, Button, Input, Icon } from 'semantic-ui-react';\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\n\t\tthis.setProcessed()\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tsetProcessed() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\t\tconsole.log(filt)\n\t}\n\tonSubmit() {\n\t\tnavigate('/video/final')\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tif (this.props.comments.length === 0) {\n\t\t\treturn (<Container>\n\t\t\t\t<Header>No comments found for this thread</Header>\n\t\t\t</Container>)\n\t\t}\n\t\tlet comment = this.props.comments[this.state.current]\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center' }}>\n\t\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t\t<div style={{ flexGrow: 1, paddingLeft: 10 }}>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<div ref={ref => this.topComment = ref}>\n\t\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", padding: 10 }}>\n\t\t\t\t\t\t\t<Button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>\n\t\t\t\t\t\t\t\t<Icon name=\"arrow left\" />\n\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<Button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t<Icon name=\"arrow right\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 10 }}>\n\t\t\t\t\t\t\t<Button onClick={this.onSubmit} size=\"huge\" primary>Finish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tcomments: state.comments,\n}), {\n\tsetProcessed,\n\tsetComments\n})(PickComments);","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setTitle } from '../redux/actions';\n\nclass Question extends Component {\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tnavigate('selftext')\n\t}\n\tonChange = e => {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Header size=\"large\">Edit question</Header>\n\t\t\t\t\t<Form.Input value={this.props.title} onChange={this.onChange} />\n\t\t\t\t\t<Form.Button primary type=\"submit\">Continue</Form.Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle })(Question);","import React, { Component } from 'react'\nimport { foulSpanArray } from './sanitize'\n\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nfunction handleStrategy(contentBlock, callback) {\n    foulSpanArray.forEach(reg => {\n        findWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n    })\n}\nfunction editStrategy(contentBlock, callback) {\n    findWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n    return <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n    return <span className=\"highlight-warn\">{props.children}</span>\n}\n\nlet decorators = [\n    {\n        strategy: handleStrategy,\n        component: handleSpan,\n    },\n    {\n        strategy: editStrategy,\n        component: editSpan,\n    },\n]\n\nclass EditorComponent extends Component {\n    constructor(p) {\n        super(p)\n\n        this.inlineToolbarPlugin = createInlineToolbarPlugin()\n        this.linkPlugin = createLinkPlugin()\n        this.plugins = [\n            this.inlineToolbarPlugin,\n            this.linkPlugin,\n        ]\n\n        let d = convertFromHTML(p.data)\n        \n        this.state = {\n            editor: d.contentBlocks ? EditorState.createWithContent(\n                ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)\n            ) : EditorState.createEmpty(),\n        }\n    }\n    handlePress = e => {\n        e.stopPropagation()\n    }\n    onChange = val => {\n        this.setState({ editor: val })\n\n        let html = stateToHTML(this.state.editor.getCurrentContent())\n\n        if (this.props.data !== html) {\n            this.props.onChange(html)\n        }\n    }\n    render() {\n        return <div>\n            <Editor\n                editorState={this.state.editor}\n                onChange={this.onChange}\n                decorators={decorators}\n                plugins={this.plugins}\n            />\n            <this.inlineToolbarPlugin.InlineToolbar>\n                {extProps => <>\n                    <BoldButton {...extProps} />\n                    <ItalicButton {...extProps} />\n                    <UnderlineButton {...extProps} />\n                    <this.linkPlugin.LinkButton {...extProps} />\n                </>}\n            </this.inlineToolbarPlugin.InlineToolbar>\n        </div>\n    }\n}\n\nexport default EditorComponent","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setSelftext, setIncludeSelftext } from '../redux/actions';\nimport EditorComponent from './EditorComponent';\n\nclass Selftext extends Component {\n    onSubmit = e => {\n        e.preventDefault()\n\n        navigate('/video/comments')\n    }\n    onChangeSelftext = value => {\n        this.props.setSelftext(value)\n    }\n    onChangeInclude = (e, { checked }) => {\n        this.props.setIncludeSelftext(checked)\n    }\n    render() {\n        return (\n            <Segment>\n                <Form onSubmit={this.onSubmit}>\n                    <Header size=\"large\">Edit selftext</Header>\n                    <Form.Checkbox label=\"Include selftext?\" checked={this.props.includeSelftext} onChange={this.onChangeInclude} />\n                    <Segment style={{ display: this.props.includeSelftext ? 'block' : 'none' }}>\n                        <EditorComponent onChange={this.onChangeSelftext} data={this.props.selftext} />\n                    </Segment>\n                    <Form.Button primary type=\"submit\">Continue</Form.Button>\n                </Form>\n            </Segment>\n        )\n    }\n}\n\nexport default connect(state => ({\n    selftext: state.question.selftext_html || \"\",\n    includeSelftext: state.question.includeSelftext,\n}), { setSelftext, setIncludeSelftext })(Selftext);","import { Link, Redirect, Router } from '@reach/router'\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Header } from 'semantic-ui-react'\nimport { getSongs, getThemes } from '../api'\nimport SelectThread from './ChooseThread'\nimport Final from './Final'\nimport Navbar from './Navbar'\nimport PickComments from './PickComments/index'\nimport Question from './Question'\nimport SelfText from './SelfText'\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.beforeUnload = this.beforeUnload.bind(this)\n\t}\n\tcomponentDidMount() {\n\t\tgetThemes()\n\t\tgetSongs()\n\t\twindow.addEventListener('beforeunload', this.beforeUnload)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('beforeunload', this.beforeUnload)\n\t}\n\tbeforeUnload(e) {\n\t\tif (this.props.question) {\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t\t\t<Header style={{ paddingTop: 10 }} as=\"h1\">\n\t\t\t\t\t\t<Header.Content>Reddit Video Maker</Header.Content>\n\t\t\t\t\t\t<Header.Subheader>Create video</Header.Subheader>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Button style={{ marginLeft: 20 }} basic as={Link} to=\"/\">Go back</Button>\n\t\t\t\t</div>\n\t\t\t\t<Router>\n\t\t\t\t\t<Navbar path=\"/\">\n\t\t\t\t\t\t<SelectThread path=\"/\" />\n\t\t\t\t\t\t{/* Can't have fragments in Router element */}\n\t\t\t\t\t\t{this.props.question && <Question path=\"post\" />}\n\t\t\t\t\t\t{this.props.question && <SelfText path=\"selftext\" />}\n\t\t\t\t\t\t{this.props.question && <PickComments path=\"comments\" />}\n\t\t\t\t\t\t{this.props.question && <Final path=\"final\" />}\n\t\t\t\t\t\t<Redirect default from=\"*\" to=\"/video/\" noThrow />\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Router>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t}\n}\n\nexport default connect(mapStateToProps)(App)","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Form, Header, Segment } from 'semantic-ui-react'\nimport { deleteTheme, deleteThemeFile, editTheme, getTheme, uploadThemeFiles } from '../api'\nimport FileInput from '../FileInput'\nimport FrontNav from '../FrontNav'\n\nlet voices = [\n\t{\n\t\tvalue: \"daniel\",\n\t\ttext: \"Daniel UK\"\n\t},\n\t{\n\t\tvalue: \"google-us\",\n\t\ttext: \"Google US\"\n\t},\n]\n\nclass Theme extends React.Component {\n\tstate = {\n\t\tform: {},\n\n\t\t// Files\n\t\tintro: null,\n\t\ttransition: null,\n\t\toutro: null,\n\n\t\tloading: true,\n\n\t\tpreviewSong: false,\n\t}\n\tcomponentDidMount() {\n\t\tgetTheme(this.props.themeId)\n\t\t\t.then(theme => {\n\t\t\t\tthis.setState(theme)\n\t\t\t\tthis.setState({ form: theme })\n\t\t\t})\n\t}\n\tdelete = async () => {\n\t\tawait deleteTheme(this.props.themeId)\n\t\tnavigate('/', { replace: true })\n\t}\n\thandleChange = (_, { name, value }) => this.setState({ form: { ...this.state.form, [name]: value } })\n\thandleCheckboxChange = (_, { name, checked }) => this.setState({ form: { ...this.state.form, [name]: checked } })\n\thandleFileChange = e => {\n\t\te.preventDefault()\n\t\tthis.setState({ [e.target.name]: e.target.files[0] })\n\t}\n\tsubmit = () => {\n\t\tthis.setState({ loading: true })\n\t\teditTheme(this.props.themeId, this.state.form).then(async () => {\n\t\t\tconst { intro, transition, outro } = this.state\n\n\t\t\t// If at least one file has been selected, upload it/them.\n\t\t\tif (intro || transition || outro) {\n\t\t\t\tconst data = new FormData()\n\n\t\t\t\tintro && data.append('intro', intro)\n\t\t\t\toutro && data.append('outro', outro)\n\t\t\t\ttransition && data.append('transition', transition)\n\n\t\t\t\tawait uploadThemeFiles(this.props.themeId, data)\n\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t} else {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t}\n\t\t})\n\t}\n\tremoveFile = type => {\n\t\tdeleteThemeFile(this.props.themeId, { [type]: true })\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Form onSubmit={e => e.preventDefault()}>\n\t\t\t\t\t<Segment>\n\t\t\t\t\t\t<Header>Edit theme</Header>\n\t\t\t\t\t\t<p>Themes consist of an intro, a transition, an outro, and a voice. You can have several themes on one account. The files can be a maximum of 25MB each. All files are optional. </p>\n\t\t\t\t\t\t<p><b>Important: Make sure all files are 1920x1080 in size.</b></p>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t{/* <Form.Group> */}\n\t\t\t\t\t\t<Form.Input\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tlabel=\"Theme name\"\n\t\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\t\tvalue={this.state.form.name}\n\t\t\t\t\t\t\tonChange={this.handleChange}>\n\t\t\t\t\t\t</Form.Input>\n\t\t\t\t\t\t<Form.Select\n\t\t\t\t\t\t\tname=\"voice\"\n\t\t\t\t\t\t\tplaceholder=\"Voice\"\n\t\t\t\t\t\t\tlabel=\"TTS voice engine\"\n\t\t\t\t\t\t\tvalue={this.state.form.voice}\n\t\t\t\t\t\t\toptions={voices}\n\t\t\t\t\t\t\tonChange={this.handleChange}>\n\t\t\t\t\t\t</Form.Select>\n\t\t\t\t\t\t<Form.Input\n\t\t\t\t\t\t\tname=\"volume\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tplaceholder=\"Volume\"\n\t\t\t\t\t\t\tlabel=\"Music volume while tts is reading (in percent)\"\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\tvalue={this.state.form.volume}\n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.props.isAdmin &&\n\t\t\t\t\t\t\t<Form.Checkbox\n\t\t\t\t\t\t\t\tname=\"callToAction\"\n\t\t\t\t\t\t\t\tplaceholder=\"Call to action?\"\n\t\t\t\t\t\t\t\tlabel=\"Call to action\"\n\t\t\t\t\t\t\t\tchecked={this.state.form.callToAction}\n\t\t\t\t\t\t\t\tonChange={this.handleCheckboxChange}>\n\t\t\t\t\t\t\t</Form.Checkbox>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{/* </Form.Group> */}\n\t\t\t\t\t\t<Form.Group grouped>\n\t\t\t\t\t\t\t<Header>Intro</Header>\n\t\t\t\t\t\t\t<Form.Field inline>\n\t\t\t\t\t\t\t\t<FileInput\n\t\t\t\t\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\t\t\t\t\tname=\"intro\"\n\t\t\t\t\t\t\t\t\tbuttonOnly\n\t\t\t\t\t\t\t\t\tlabel={this.state.intro ? \"Change intro\" : \"No intro\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handleFileChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label>{this.state.intro && this.state.intro.origname}</label>\n\t\t\t\t\t\t\t</Form.Field>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group grouped>\n\t\t\t\t\t\t\t<Header>Transition</Header>\n\t\t\t\t\t\t\t<Form.Field inline>\n\t\t\t\t\t\t\t\t<FileInput\n\t\t\t\t\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\t\t\t\t\tname=\"transition\"\n\t\t\t\t\t\t\t\t\tbuttonOnly\n\t\t\t\t\t\t\t\t\tlabel={this.state.transition ? \"Change transition\" : \"No transition\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handleFileChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label>{this.state.transition && this.state.transition.origname}</label>\n\t\t\t\t\t\t\t\t{/* {this.state.transition.origname && <Button icon=\"trash\" secondary size=\"mini\" onClick={() => this.removeFile('transition')}></Button>} */}\n\t\t\t\t\t\t\t</Form.Field>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group grouped>\n\t\t\t\t\t\t\t<Header>Outro</Header>\n\t\t\t\t\t\t\t<Form.Field inline>\n\t\t\t\t\t\t\t\t<FileInput\n\t\t\t\t\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\t\t\t\t\tname=\"outro\"\n\t\t\t\t\t\t\t\t\tbuttonOnly\n\t\t\t\t\t\t\t\t\tlabel={this.state.outro ? \"Change outro\" : \"No outro\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handleFileChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label>{this.state.outro && this.state.outro.origname}</label>\n\t\t\t\t\t\t\t</Form.Field>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<Form.Group inline>\n\t\t\t\t\t\t\t<Form.Button floated=\"right\" onClick={this.submit} type=\"submit\">Save</Form.Button>\n\t\t\t\t\t\t\t<Form.Button floated=\"right\" type=\"button\" color=\"red\" onClick={this.delete}>Delete</Form.Button>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Segment>\n\t\t\t\t</Form>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = (state, props) => ({\n\ttheme: state.themes.find(th => th._id === props.themeId),\n\tisAdmin: state.user.isAdmin,\n})\n\nexport default connect(mapStateToProps)(Theme);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Header, List, Loader, Modal, Form, Button, Label, Message } from 'semantic-ui-react'\nimport { adminGetUsers, adminCreateUser, adminChangePass, adminGiveCredits, adminSetMultiplier } from '../api'\n\nclass UserList extends React.Component {\n    state = {\n        addingUser: false,\n        editingUser: false,\n        selectedUser: null,\n        email: \"\",\n        username: \"\",\n        password: \"\",\n        multiplier: 0,\n        creditsToGive: 0,\n        loading: false,\n    }\n    componentDidMount() {\n        adminGetUsers()\n    }\n    createUser = async () => {\n        this.setState({ loading: true })\n        await adminCreateUser({ email: this.state.email || null, username: this.state.username || null, password: this.state.password })\n        this.setState({ loading: false })\n        adminGetUsers()\n        this.closeAddModal()\n    }\n    openAddModal = () => this.setState({ addingUser: true, editingUser: false, loading: false, username: \"\", email: \"\", password: \"\" })\n    closeAddModal = () => this.setState({ addingUser: false })\n\n    setMultiplier = async () => {\n        this.setState({ loading: true })\n        await adminSetMultiplier(this.state.selectedUser._id, this.state.multiplier)\n        this.setState({ loading: false })\n        adminGetUsers()\n        this.closeEditModal()\n    }\n    changeUserPass = async () => {\n        this.setState({ loading: true })\n        await adminChangePass(this.state.selectedUser._id, this.state.password)\n        this.setState({ loading: false })\n        this.closeEditModal()\n    }\n    giveCredits = async () => {\n        this.setState({ loading: true })\n        await adminGiveCredits(this.state.selectedUser._id, this.state.creditsToGive)\n        this.setState({ loading: false, creditsToGive: 0 })\n        adminGetUsers()\n        this.closeEditModal()\n    }\n    openEditModal = (user) => this.setState({ addingUser: false, editingUser: true, loading: false, email: user.email, username: user.username, password: user.password, selectedUser: user, multiplier: user.multiplier })\n    closeEditModal = () => this.setState({ editingUser: false })\n\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.users ? this.props.users.map(user =>\n                        <List.Item key={user._id} onClick={() => this.openEditModal(user)}>\n                            <List.Content>\n                                <List.Header>{user.email || user.username} {user.isAdmin && <Label size=\"tiny\" color=\"red\">admin</Label>}</List.Header>\n                                <List.Description>{user.credits} credits</List.Description>\n                                <List.Description>{user.videoCount} videos made</List.Description>\n                            </List.Content>\n                        </List.Item>\n                    ) : <Loader active />}\n                </List>\n                <Divider />\n                <Button onClick={this.openAddModal}>Create user</Button>\n                {/* Adding Modal */}\n                <Modal open={this.state.addingUser} onClose={this.closeAddModal}>\n                    <Modal.Content>\n                        <Header>Add user</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input placeholder=\"Username\" type=\"text\" name=\"username\" value={this.state.username} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.createUser}>Create</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n                {/* Editing Modal */}\n                <Modal open={this.state.editingUser} onClose={this.closeEditModal}>\n                    <Modal.Content>\n                        <Header>Give credits</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form loading={this.state.loading}>\n                            <Header>Current credits: {this.state.selectedUser && this.state.selectedUser.credits}</Header>\n                            <Form.Input type=\"number\" name=\"creditsToGive\" step={1} value={this.state.creditsToGive} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.giveCredits} loading={this.state.loading}>Give credits</Form.Button>\n                    </Modal.Actions>\n                    <Divider />\n                    <Modal.Content>\n                        <Header>Change user password</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input disabled placeholder=\"Email or username\" type=\"text\" name=\"email\" value={this.state.email || this.state.username} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.changeUserPass} loading={this.state.loading}>Change password</Form.Button>\n                    </Modal.Actions>\n                    <Divider />\n                    <Modal.Content>\n                        <Header>Set price modifier</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        {this.state.multiplier > 1 && <Message color=\"negative\">This should probably be less than 1</Message>}\n                        <Form>\n                            <Form.Input placeholder=\"Price multiplier\" type=\"number\" name=\"multiplier\" min={0} step={0.01} value={this.state.multiplier} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.setMultiplier} loading={this.state.loading}>Set modifier</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        users: store.users,\n    }\n}\n\nexport default connect(mapStateToProps)(UserList);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport UserList from './UserList'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Admin Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Users</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<UserList />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Container, Form, Segment, Header, Message } from 'semantic-ui-react';\nimport FrontNav from './FrontNav';\nimport { changePassword } from './api';\nimport { toast } from 'react-toastify';\n\nclass Account extends React.Component {\n\thandleChange = (e, { name, value }) => this.setState({ [name]: value })\n\tstate = {\n\t\tcurrent: \"\",\n\t\tpassword: \"\",\n\t\tpasswordConfirm: \"\",\n\t\tchangedPass: false,\n\t\tloading: false,\n\t}\n\tchangePass = async () => {\n\t\tthis.setState({ loading: true })\n\t\tawait changePassword(this.state.current, this.state.password)\n\t\t\t.catch(err => {\n\t\t\t\ttoast.error(\"Something went wrong\")\n\t\t\t})\n\t\tthis.setState({ changePass: true, loading: false })\n\t}\n\trender() {\n\t\tlet inputerror = this.state.passwordConfirm.length > 0 && this.state.password !== this.state.passwordConfirm\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header>Change password</Header>\n\t\t\t\t\t{this.state.changedPass ? <p>Password updated!</p>\n\t\t\t\t\t\t: <Form onSubmit={this.changePass}>\n\t\t\t\t\t\t\t<Form.Input label=\"Email\" name=\"email\" value={this.props.user.email} disabled />\n\t\t\t\t\t\t\t{this.props.user.username && <Form.Input label=\"Username\" name=\"username\" value={this.props.user.username} disabled />}\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Current password\" label=\"Current password\" name=\"current\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"New password\" label=\"New password\" name=\"password\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Confirm password\" label=\"Confirm password\" name=\"passwordConfirm\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t{inputerror && <Message negative>Passwords do not match</Message>}\n\t\t\t\t\t\t\t<Form.Button primary type=\"submit\" disabled={!this.state.current || !this.state.passwordConfirm || inputerror}>Change password</Form.Button>\n\t\t\t\t\t\t</Form>}\n\t\t\t\t</Segment>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n})\n\nexport default connect(mapStateToProps)(Account)","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Container, Segment, Header } from 'semantic-ui-react';\nimport FrontNav from './FrontNav';\n\nclass Account extends React.Component {\n\thandleChange = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header>Contact us</Header>\n                    <p>For support, bug reports or business proposals, don't hesitate contacting us at <a href=\"mailto:support@redditvideomaker.com\">support@redditvideomaker.com</a></p>\n\t\t\t\t</Segment>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n})\n\nexport default connect(mapStateToProps)(Account)","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport BuyCredits from './BuyCredits';\nimport Dashboard from './Dashboard/index';\nimport Logout from './Logout';\nimport App from './render/App';\nimport Testing from './Testing';\nimport ThemeEdit from './Themes/_id';\nimport { getUser } from './api';\nimport Admin from './Admin'\nimport Account from './Account'\nimport Support from './Support'\n\nconst NotFound = ({ redirect = \"/\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nconst AdminPath = props => <div>{props.children}</div>\n\nclass AuthedRouter extends React.Component {\n    componentWillMount() {\n        getUser()\n    }\n    render() {\n        return (\n                <Router>\n                    <Dashboard path=\"/\" />\n                    <Support path=\"/support\" />\n                    <BuyCredits path=\"/buy-credits\" />\n                    <App path=\"/video/*\" />\n                    <ThemeEdit path=\"/themes/:themeId\" />\n                    <Logout path=\"/logout\" />\n                    <Account path=\"/account\" />\n                    <AdminPath path=\"/admin\">\n                        <Admin path=\"/\" />\n                    </AdminPath>\n                    <NotFound default />\n                </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(AuthedRouter)","import React from 'react';\nimport { Grid, Header, Segment, Form, Message } from 'semantic-ui-react'\nimport { authorize } from './api'\nimport { Link, redirectTo } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            loading: false,\n        }\n\n        this.login = this.login.bind(this)\n    }\n    login() {\n        this.setState({ error: null, loading: true })\n        authorize(this.state.email, this.state.password)\n            .catch(err => {\n                this.setState({ loading: false })\n                if (typeof err === \"string\") {\n                    this.setState({ error: err })\n                } else {\n                    console.error(err)\n                }\n            })\n            .then(d => {\n                redirectTo('/dashboard')\n            })\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Log in</Header>\n                    <Form onSubmit={this.login}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email or username\"\n                                disabled={this.state.loading}\n                                type=\"text\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                disabled={this.state.loading}\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                disabled={this.state.loading}\n                                color=\"teal\">\n                                Log in\n                            </Form.Button>\n                            <div><Link to=\"/register\">Register</Link></div>\n                        </Segment>\n                    </Form>\n                    <Message size=\"small\">Forgot password?</Message>\n                    {this.state.error && <Message error>{this.state.error}</Message>}\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Grid, Header, Segment, Form, Comment } from 'semantic-ui-react'\nimport { register } from './api'\nimport { Link } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n        }\n\n        this.register = this.register.bind(this)\n    }\n    register() {\n        register(this.state.email, this.state.password)\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Register</Header>\n                    <Form onSubmit={this.register}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                color=\"teal\">\n                                Register\n                            </Form.Button>\n                            <Comment><Link to=\"/login\">Log in</Link></Comment>\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport Login from './Login';\nimport Register from './Register';\n\nconst NotFoundLogin = ({ redirect = \"/login\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nclass BogRouter extends React.Component {\n    render() {\n        return (\n            <Router>\n                <Register path=\"/register\" />\n                <Login path=\"/login\" />\n                <NotFoundLogin default />\n            </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(BogRouter)","import React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport AuthedRouter from './AuthedRouter';\nimport DefaultRouter from './DefaultRouter';\n\nclass App extends React.Component {\n    render() {\n        return (\n            this.props.loggedIn ? <AuthedRouter /> : <DefaultRouter />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\nimport './index.css';\nimport store from './redux/store';\nimport * as serviceWorker from './render/serviceWorker';\n\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t\t<ToastContainer position=\"bottom-right\" />\n\t</Provider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}